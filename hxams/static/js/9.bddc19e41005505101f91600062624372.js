webpackJsonp([9],{"1k5b":function(e,t,a){var i=a("3Oka");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("3f0f91da",i,!1,{})},"3Oka":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.materialAdd[data-v-58bb5616] {\n  padding: 10px 0 !important;\n}\n.materialAdd .demo-form-inline[data-v-58bb5616] {\n    margin-left: 10px;\n}\n.materialAdd .demo-form-inline .el-form-item[data-v-58bb5616] {\n      margin-bottom: 10px !important;\n}\n[data-v-58bb5616] .pagination {\n  margin: 10px 10px 0 10px !important;\n  float: right;\n}\n.footer[data-v-58bb5616] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n",""])},"5yx0":function(e,t,a){"use strict";a("mvHQ");var i={name:"ReceiveTable",props:["id","time","receiveflag","flagType"],data:function(){return{receiveDetailList:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize}}},created:function(){void 0===this.receiveflag&&(this.receiveflag=!1),this.getPagerE01Z2Json()},methods:{handleCurrentChange:function(e){this.pageObj.pageIndex=e,this.getPagerE01Z2Json()},PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getPagerE01Z2Json()},getPagerE01Z2Json:function(){this.receiveflag?this.getLedgerData():this.getReciveData()},getLedgerData:function(){var e=this;this.$axios({method:"post",url:this.API.queryMaterialAccountManagementPage,data:{stype:this.flagType,ymds:this.time.startTime,ymde:this.time.endTime,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;"1"==a.code?(e.receiveDetailList=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"获取数据失败，请刷新重试！"})}).catch(function(e){})},getReciveData:function(){var e=this;this.$axios({method:"get",url:this.API.findByIde01z200,params:{isEdit:!1,startTime:this.time.startTime,endTime:this.time.endTime,id:this.id,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;"1"==a.code?(e.receiveDetailList=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"获取数据失败，请刷新重试！"})}).catch(function(e){})}},components:{pagination:a("cMGX").a}},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"receive-table-container"},[a("el-table",{staticClass:"receive_table",staticStyle:{width:"100%"},attrs:{data:e.receiveDetailList,height:"440px"}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1)+" ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"a0101",label:"档案人员","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z211a",label:"材料名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z211",label:"材料类别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z124",label:"份数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z224",label:"页数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z227",label:"形成时间"}})],1),e._v(" "),a("div",{staticClass:"receive_page"},[a("pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1)],1)};n._withStripped=!0;var l={render:n,staticRenderFns:[]},s=l;var r=!1;var o=a("VU/8")(i,s,!1,function(e){r||a("6GN6")},"data-v-531a0f57",null);o.options.__file="src/views/materialManage/materialReceive/ReceiveTable.vue";t.a=o.exports},"6GN6":function(e,t,a){var i=a("CTpZ");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("421e9f3e",i,!1,{})},"9f2X":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.areatree-selected-container .filter-tree {\n  /*box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);*/\n  border-bottom: 1px solid #ddd;\n  padding-bottom: 10px;\n  height: 300px;\n  overflow: auto;\n  font-size: 14px;\n}\n.areatree-selected-container .filter-tree .el-tree-node:focus > .el-tree-node__content {\n    background-color: #88B1CA !important;\n    color: #fff;\n}\n.areatree-selected-container .filter-tree .el-tree > > > .is-current .el-tree-node__label {\n    color: #409EFF;\n    font-weight: 700;\n}\n.areatree-selected-container .footer {\n  padding: 10px 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n",""])},CTpZ:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.receive-table-container .receive_page[data-v-531a0f57] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  margin: 10px 0;\n}\n",""])},D4Or:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.outDialog[data-v-ccd11be6] .el-dialog .el-dialog__body {\n  padding: 10px 0 0 0 !important;\n}\n.display-material-container[data-v-ccd11be6] {\n  background-color: #fff;\n}\n.display-material-container .title[data-v-ccd11be6] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    font-size: 14px;\n    padding: 10px;\n}\n.display-material-container .title .el-button[data-v-ccd11be6] {\n      size: small;\n      color: white;\n      text-align: center;\n}\n.display-material-container .title .left[data-v-ccd11be6] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n.display-material-container .title .right[data-v-ccd11be6] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n.display-material-container .title .right .el-input[data-v-ccd11be6] {\n        padding-right: 10px;\n        width: 150px;\n}\n.display-material-container .el-table__body tr.current-row > td[data-v-ccd11be6] {\n    background: #DCEBFA !important;\n    color: #606266;\n}\n.display-material-container .material_page[data-v-ccd11be6] {\n    margin-top: 10px;\n    text-align: right;\n}\n",""])},EviN:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.receive-detail-container .receive_page[data-v-6e30c231] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  margin: 10px 0;\n}\n",""])},F0gz:function(e,t,a){var i=a("tqze");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("d0b49d82",i,!1,{})},QPKd:function(e,t,a){var i=a("VTb2");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("513f9f78",i,!1,{})},VTb2:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.receive-back-container .el-textarea__inner[data-v-3a88f1ee] {\n  margin: 10px 0;\n}\n.receive-back-container .opration[data-v-3a88f1ee] {\n  text-align: center;\n  margin-top: 10px;\n}\n",""])},XmMM:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.outDialog[data-v-0bc9d476] .el-dialog .el-dialog__body {\n  padding: 10px 0 10px !important;\n}\n.receive-add-edit-container .opration[data-v-0bc9d476] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  margin: 10px;\n}\n.receive-add-edit-container .bm-input[data-v-0bc9d476] {\n  position: relative;\n}\n.receive-add-edit-container .click-div[data-v-0bc9d476] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 10%;\n  height: 100%;\n}\n.receive-add-edit-container .top-icon[data-v-0bc9d476] {\n  position: absolute;\n  right: 10px;\n  top: 10px;\n}\n.receive-add-edit-container .footer[data-v-0bc9d476] {\n  text-align: center;\n  padding: 10px 0;\n}\n",""])},aGSw:function(e,t,a){var i=a("D4Or");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("5b63bfbc",i,!1,{})},jYqf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),n=a.n(i),l=a("mvHQ"),s=a.n(l),r=a("cMGX"),o=a("bOdI"),c=a.n(o),p=a("5yx0"),d={components:{hxTables:a("icmf").a,receiveTable:p.a},props:["selectMaterial"],data:function(){var e;return e={time:{startTime:"",endTime:""},pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},receiveDetailList:[],columns:[{index:!0,prop:"tableindex",label:"序号",width:"6%",align:"center"},{prop:"a0101",label:"档案人员",showOverflowTooltip:!0,width:"11%"},{prop:"e01z211a",label:"材料名称",showOverflowTooltip:!0,width:"12%"},{prop:"e01z211",label:"材料类别",width:"11%"},{prop:"e01z124",label:"份数",showOverflowTooltip:!0,width:"12%"},{prop:"e01z224",label:"页数",width:"12%"},{prop:"e01z227",label:"形成时间",showOverflowTooltip:!0,width:"12%"},{prop:"valStatusName",label:"材料状态",showOverflowTooltip:!0,width:"13%"}],tableData:[]},c()(e,"pageObj",{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize}),c()(e,"options",{mutiSelect:!1,index:!1,loading:!1,initTable:!0,border:!1,maxHeight:1===this.selectMaterial.forwardtype?"230px":"250px",indexWidth:"6%"}),e},created:function(){},methods:{fetchTableData:function(){var e=this;this.$axios({method:"get",url:this.API.toEditMaterialReceiving,params:{stype:2,id:this.selectMaterial.id,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;"1"==a.code?(e.tableData=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"获取数据失败，请刷新重试！"})}).catch(function(e){})}}},h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"receive-detail-container"},[a("el-form",{ref:"receiveForm",staticStyle:{margin:"0 15px"},attrs:{model:e.selectMaterial,"label-width":"110px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"来件单位名称：",prop:"e01z204a"}},[a("el-input",{attrs:{readonly:""},model:{value:e.selectMaterial.e01z204a,callback:function(t){e.$set(e.selectMaterial,"e01z204a",t)},expression:"selectMaterial.e01z204a"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接收人：",prop:"e01z207"}},[a("el-input",{attrs:{readonly:""},model:{value:e.selectMaterial.e01z207,callback:function(t){e.$set(e.selectMaterial,"e01z207",t)},expression:"selectMaterial.e01z207"}})],1)],1)],1),e._v(" "),1===e.selectMaterial.forwardtype?a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接收类型：",prop:"forwardTypeValue"}},[a("el-input",{attrs:{readonly:""},model:{value:e.selectMaterial.forwardTypeValue,callback:function(t){e.$set(e.selectMaterial,"forwardTypeValue",t)},expression:"selectMaterial.forwardTypeValue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机要号：",prop:"confidentialno"}},[a("el-input",{attrs:{readonly:""},model:{value:e.selectMaterial.confidentialno,callback:function(t){e.$set(e.selectMaterial,"confidentialno",t)},expression:"selectMaterial.confidentialno"}})],1)],1)],1):e._e(),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"份数：",prop:"e01z234"}},[a("el-input",{attrs:{readonly:""},model:{value:e.selectMaterial.e01z234,callback:function(t){e.$set(e.selectMaterial,"e01z234",t)},expression:"selectMaterial.e01z234"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"收件日期：",prop:"e01z201"}},[a("el-input",{attrs:{readonly:""},model:{value:e.selectMaterial.e01z201,callback:function(t){e.$set(e.selectMaterial,"e01z201",t)},expression:"selectMaterial.e01z201"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注：",prop:"e01z231"}},[a("el-input",{attrs:{type:"textarea",readonly:"",autosize:{minRows:2,maxRows:4}},model:{value:e.selectMaterial.e01z231,callback:function(t){e.$set(e.selectMaterial,"e01z231",t)},expression:"selectMaterial.e01z231"}})],1)],1)],1)],1),e._v(" "),a("hxTables",{ref:"table",attrs:{pageObj:e.pageObj,columns:e.columns,dataSource:e.tableData,options:e.options,fetch:e.fetchTableData}})],1)};h._withStripped=!0;var g={render:h,staticRenderFns:[]},m=g;var u=!1;var v=a("VU/8")(d,m,!1,function(e){u||a("o4JO")},"data-v-6e30c231",null);v.options.__file="src/views/materialManage/materialReceive/MaterialReceiveDetail.vue";var f=v.exports,b=a("BO1k"),y=a.n(b),x=a("rXDJ"),_=a("a6hc"),w=a("Ev+9"),z={name:"AddReceiveMaterial",props:[],components:{pagination:r.a,materialTypeSelect:_.a,OrganizationTreeSelect:w.a},created:function(){this.materialForm.e01z227=new Date},mounted:function(){this.getPersonData()},data:function(){return{e01z704b:"",defaultDepartmentID:"",isBackObj:!0,materialForm:{e01z211a:"",e01z227:this.commonFun.dateFormat(new Date,"yyyyMMdd"),e01z124:"",e01z224:1,e01z231:"",e01z211:"",e01z217:""},personTableData:[],selectedPersonlist:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},searchForm:{departmentID:"",nameAndPinyin:""},rules:{e01z211a:[{required:!0,message:"请输入材料名称",trigger:"change"},{min:0,max:this.fieldsConfig.commonLength.eighty,message:"长度必须在0到 "+this.fieldsConfig.commonLength.eighty+"位字符之间",trigger:"blur"}],e01z227:[{required:!0,message:"请选择制成日期",trigger:"change"}],e01z211:[{required:!0,message:"请选择材料类号",trigger:"change"}],e01z124:[{required:!0,message:"请选择分数",trigger:"change"}],e01z224:[{required:!0,message:"请选中页数",trigger:"change"}],e01z231:[{min:0,max:this.fieldsConfig.commonLength.fiveHundred,message:"长度必须在0到 "+this.fieldsConfig.commonLength.fiveHundred+"位字符之间",trigger:"blur"}]}}},methods:{PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getPersonData()},orgTreeSelectCall:function(e){this.searchForm.departmentID=e?e.id:""},applyTypeCall:function(e){this.materialForm.e01z211=e.codeno,this.materialForm.e01z217=e.code},handleChangeScore:function(e){},handleChange:function(e){},getPersonData:function(){var e=this;this.$axios({loading:{isShow:!1,target:".filesTable"},method:"post",url:this.API.queryArchivistsPage,data:{b0000:this.searchForm.departmentID,a0101:this.searchForm.nameAndPinyin,type:"",e01z704b:this.e01z704b,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;"1"===a.code?(e.personTableData=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"查询人员失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})}).finally(function(){e.changeTableStatus()})},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.getPersonData()},handleSelectionChange:function(e,t){if(-1!==e.findIndex(function(e){return e.a0100===t.a0100}))this.selectedPersonlist=this.distinctPerson(this.selectedPersonlist,e);else{var a=this.selectedPersonlist.findIndex(function(e){return e.a0100===t.a0100});this.selectedPersonlist.splice(a,1)}},handleSelectAll:function(e){var t=this;0===e.length?this.personTableData.forEach(function(e){var a=t.selectedPersonlist.findIndex(function(t){return t.a0100===e.a0100});-1!==a&&t.selectedPersonlist.splice(a,1)}):this.selectedPersonlist=this.distinctPerson(this.selectedPersonlist,e)},removePerson:function(e){var t=this.selectedPersonlist.findIndex(function(t){return t.a0100===e.a0100});this.selectedPersonlist.splice(t,1),this.changeTableStatus()},changeTableStatus:function(){var e=this;this.$refs.multipleTable.clearSelection(),this.selectedPersonlist.forEach(function(t){e.personTableData.forEach(function(a){t.a0100===a.a0100&&e.$refs.multipleTable.toggleRowSelection(a,!0)})})},distinctPerson:function(e,t){var a=e.concat(t),i=[],n={},l=!0,s=!1,r=void 0;try{for(var o,c=y()(a);!(l=(o=c.next()).done);l=!0){var p=o.value;n[p.a0100]||(i.unshift(p),n[p.a0100]=1)}}catch(e){s=!0,r=e}finally{try{!l&&c.return&&c.return()}finally{if(s)throw r}}return i},saveNewMaterial:function(){var e=this;this.$refs.materialForm.validate(function(t){if(!t)return!1;if(0===e.selectedPersonlist.length)return e.$confirm("请选择档案人员！","提示",{confirmButtonText:"确认",showCancelButton:!1,type:"warning",center:!0}),!1;var a={materialForm:e.materialForm,selectedPersonlist:e.selectedPersonlist};e.$emit("editMaterialBack",a)})},cancle:function(){this.$emit("editMaterialBack","")}}},D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"materialAdd"},[a("el-form",{ref:"materialForm",staticStyle:{"margin-right":"20px"},attrs:{rules:e.rules,model:e.materialForm,"label-width":"130px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"材料名称：",prop:"e01z211a"}},[a("el-input",{model:{value:e.materialForm.e01z211a,callback:function(t){e.$set(e.materialForm,"e01z211a",t)},expression:"materialForm.e01z211a"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"材料类别：",prop:"e01z211"}},[a("materialTypeSelect",{attrs:{chioceOptionId:e.materialForm.e01z211,isBackObj:e.isBackObj,isAll:!1,isType:!1},on:{applyTypeCall:e.applyTypeCall}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"材料形成时间：",prop:"e01z227"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyyMMdd","value-format":"yyyyMMdd"},model:{value:e.materialForm.e01z227,callback:function(t){e.$set(e.materialForm,"e01z227",t)},expression:"materialForm.e01z227"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"份数：",prop:"e01z124",id:"e01z124","label-width":"80px"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:1e8},on:{change:e.handleChangeScore},model:{value:e.materialForm.e01z124,callback:function(t){e.$set(e.materialForm,"e01z124",t)},expression:"materialForm.e01z124"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"页数：",prop:"e01z224"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:1e8},on:{change:e.handleChange},model:{value:e.materialForm.e01z224,callback:function(t){e.$set(e.materialForm,"e01z224",t)},expression:"materialForm.e01z224"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"材料备注：",prop:"e01z231"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.materialForm.e01z231,callback:function(t){e.$set(e.materialForm,"e01z231",t)},expression:"materialForm.e01z231"}})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{staticStyle:{"border-right":"1px solid #CCCCCC"},attrs:{span:12}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:"输入姓名或拼音"},model:{value:e.searchForm.nameAndPinyin,callback:function(t){e.$set(e.searchForm,"nameAndPinyin",t)},expression:"searchForm.nameAndPinyin"}})],1),e._v(" "),a("el-form-item",[a("OrganizationTreeSelect",{attrs:{e01z704b:e.e01z704b,defaultOptions:e.defaultDepartmentID},on:{OrgTreeSelectCall:e.orgTreeSelectCall}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"filesTable",attrs:{data:e.personTableData,height:"210px"},on:{select:e.handleSelectionChange,"select-all":e.handleSelectAll}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"48px"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"60px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1)+" ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"a0101",label:"姓名",width:"80px","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0111a",label:"籍贯",width:"170px","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0192a",label:"工作单位及职务","show-overflow-tooltip":""}})],1),e._v(" "),a("pagination",{attrs:{enableSmall:"true",pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"已选档案人员列表："}})],1),e._v(" "),a("el-table",{ref:"selectedMultipleTable",attrs:{data:e.selectedPersonlist,"empty-text":"已选择档案人员为空",height:"240px"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60px",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0101",label:"姓名",width:"80px","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0111a",label:"籍贯",width:"170px","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0192a",label:"工作单位及职务","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",icon:"el-icon-close",circle:"",title:"删除"},on:{click:function(a){e.removePerson(t.row)}}})]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveNewMaterial}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.cancle}},[e._v("取消")])],1)],1)};D._withStripped=!0;var k={render:D,staticRenderFns:[]},T=k;var $=!1;var P=a("VU/8")(z,T,!1,function(e){$||a("1k5b")},"data-v-58bb5616",null);P.options.__file="src/views/materialManage/materialReceive/AddReceiveMaterial.vue";var M=P.exports,C={name:"MaterialReceiveAddEidt",props:["selectMaterial"],components:{areaTreeSelected:x.a,addReceiveMaterial:M},data:function(){return{departmentId:"",area_tree_visible:!1,materialList:[],selectReceive:{e01z204a:"",e01z204b:"",confidentialno:"",e01z207:"",e01z201:"",type:"",e01z231:""},rules:{e01z204a:[{required:!0,message:"请选择或者请输入",trigger:"blur"},{min:0,max:this.fieldsConfig.commonLength.eighty,message:"长度必须在0到"+this.fieldsConfig.commonLength.eighty+"位字符之间",trigger:"blur"}],e01z201:[{required:!0,message:"请选择收件日期",trigger:"change"}],e01z207:[{required:!0,message:"请输入收件人",trigger:"change"},{min:0,max:this.fieldsConfig.commonLength.forty,message:"长度必须在0到"+this.fieldsConfig.commonLength.forty+"位字符之间",trigger:"blur"}],type:[{required:!0,message:"请选择接收类型",trigger:"change"}],confidentialno:[{required:!0,message:"请输入机要号",trigger:"change"},{min:0,max:50,message:"长度必须在0到50位字符之间",trigger:"blur"}],e01z231:[{min:0,max:this.fieldsConfig.commonLength.fiveHundred,message:"长度必须在0到"+this.fieldsConfig.commonLength.fiveHundred+"位字符之间",trigger:"blur"}]},transferouttypes:[{value:0,label:"机要转递"},{value:1,label:"专人取送"}],flag:!1}},created:function(){this.selectReceive.e01z201=new Date},methods:{selectChange:function(e){this.rules.confidentialno[0].required="1"!=e},editMaterialBack:function(e){if(""!=e){var t=[],a=!0,i=!1,n=void 0;try{for(var l,s=y()(e.selectedPersonlist);!(a=(l=s.next()).done);a=!0){var r=l.value,o={a0100:r.a0100,a0101:r.a0101,e01z211a:e.materialForm.e01z211a,e01z211:e.materialForm.e01z211,e01z000:"",sourcetype:0,e01z124:e.materialForm.e01z124,e01z224:e.materialForm.e01z224,e01z217:e.materialForm.e01z217,e01z227:this.commonFun.dateFormat(e.materialForm.e01z227,"yyyyMMdd")};t.push(o)}}catch(e){i=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}this.materialList=t,this.save("selectReceive")}else this.$emit("backAdd","cancle")},getBack:function(e){this.area_tree_visible=!1,""!=e&&(this.selectReceive.e01z204a=e.name,this.selectReceive.e01z204b=e.code,this.departmentId=e.id)},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a="";a=""!=t.selectMaterial?t.API.updataMaterialReceiving:t.API.saveOrMaterialReceiving;var i={e01z204a:t.selectReceive.e01z204a,confidentialno:t.selectReceive.confidentialno,e01z207:t.selectReceive.e01z207,e01z201:t.commonFun.dateFormat(t.selectReceive.e01z201,"yyyyMMdd"),type:t.selectReceive.type,e01z231:t.selectReceive.e01z231,e01z204b:t.selectReceive.e01z204b,lists:t.materialList},n=s()(i);t.$axios({method:"post",url:a,data:{resultJson:n,id:t.id}}).then(function(e){"1"==e.data.code?(""==t.selectMaterial?t.$message({message:"添加数据成功！",type:"success"}):t.$message({message:"编辑数据成功！",type:"success"}),t.$emit("backAdd","")):t.$message({type:"error",message:"操作失败，请刷新重试！"})}).catch(function(e){})})}}},j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"receive-add-edit-container"},[a("el-form",{ref:"selectReceive",staticStyle:{"margin-right":"20px"},attrs:{rules:e.rules,model:e.selectReceive,"label-width":"130px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"来件单位：",prop:"e01z204a"}},[a("el-input",{staticClass:"bm-input",model:{value:e.selectReceive.e01z204a,callback:function(t){e.$set(e.selectReceive,"e01z204a",t)},expression:"selectReceive.e01z204a"}}),e._v(" "),a("div",{staticClass:"click-div",on:{click:function(t){e.area_tree_visible=!0}}},[a("i",{staticClass:"el-icon-more top-icon"})])],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"收件日期：",prop:"e01z201"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyyMMdd","value-format":"yyyyMMdd"},model:{value:e.selectReceive.e01z201,callback:function(t){e.$set(e.selectReceive,"e01z201",t)},expression:"selectReceive.e01z201"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"接收人：",prop:"e01z207"}},[a("el-input",{model:{value:e.selectReceive.e01z207,callback:function(t){e.$set(e.selectReceive,"e01z207",t)},expression:"selectReceive.e01z207"}})],1)],1),e._v(" "),1!==e.selectReceive.forwardtype&&e.flag?e._e():a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"接收类型：",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择接收类型"},on:{change:e.selectChange},model:{value:e.selectReceive.type,callback:function(t){e.$set(e.selectReceive,"type",t)},expression:"selectReceive.type"}},e._l(e.transferouttypes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),1!==e.selectReceive.forwardtype&&e.flag?e._e():a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"机要号：",prop:"confidentialno"}},[a("el-input",{attrs:{disabled:"1"==e.selectReceive.type},model:{value:e.selectReceive.confidentialno,callback:function(t){e.$set(e.selectReceive,"confidentialno",t)},expression:"selectReceive.confidentialno"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"接收备注：",prop:"e01z231"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.selectReceive.e01z231,callback:function(t){e.$set(e.selectReceive,"e01z231",t)},expression:"selectReceive.e01z231"}})],1)],1)],1)],1),e._v(" "),a("add-receive-material",{on:{editMaterialBack:e.editMaterialBack}}),e._v(" "),e.area_tree_visible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"单位选择","close-on-click-modal":!1,"append-to-body":"",width:"30%",height:"50%",visible:e.area_tree_visible},on:{"update:visible":function(t){e.area_tree_visible=t}}},[a("areaTreeSelected",{attrs:{departmentId:e.departmentId},on:{back:e.getBack}})],1):e._e()],1)};j._withStripped=!0;var R={render:j,staticRenderFns:[]},S=R;var I=!1;var O=a("VU/8")(C,S,!1,function(e){I||a("mbYw")},"data-v-0bc9d476",null);O.options.__file="src/views/materialManage/materialReceive/MaterialReceiveAddEidt.vue";var A=O.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"receive-back-container"},[e._v("\n\t退回原因：\n\t"),a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),e._v(" "),a("div",{staticClass:"opration"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.cancle}},[e._v("取消")])],1)],1)};F._withStripped=!0;var B={render:F,staticRenderFns:[]},U=B;var E=!1;var L=a("VU/8")({props:["selectDeceive"],data:function(){return{msg:""}},methods:{confirm:function(){""!=this.msg?this.$emit("backreceive",this.msg,this.selectDeceive):this.$message("请输入退回原因！")},cancle:function(){this.$emit("backreceive","")}}},U,!1,function(e){E||a("QPKd")},"data-v-3a88f1ee",null);L.options.__file="src/views/materialManage/materialReceive/ReceiveBack.vue";var q=L.exports,H={name:"DisplayBatch",components:{pagination:r.a,materialReceiveDetail:f,mterialReceiveAddEidt:A,receiveBack:q},props:["mainHeight"],data:function(){return{delFlag:!0,edit_visible:!1,startDate:"",endDate:"",e01z204a:"",e01z207:"",receiveList:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},detail_receive_popUp:!1,add_receive_popUp:!1,receive_back_popUp:!1,selectDeceive:"",dialogTitle:"",backContent:"",status:"2",tableHeight:"",displayType:1,uploadUrl:"",reportData:""}},watch:{mainHeight:function(e,t){this.mainHeight=e,this.tableHeight=this.mainHeight-75-1*this.$refs.table.$el.offsetHeight-24}},created:function(){this.queryPageAll()},mounted:function(){this.uploadUrl=this.API.baobiaoURL},methods:{startTimeChange:function(){var e=this.startDate.substring(0,4)+"-"+this.startDate.substring(4,6)+"-"+this.startDate.substring(6),t=this.endDate.substring(0,4)+"-"+this.endDate.substring(4,6)+"-"+this.endDate.substring(6);e&&e.length>0&&t&&t.length>0&&(new Date(e).getTime()>new Date(t).getTime()&&(this.$message({type:"error",message:"开始日期不能大于结束日期!"}),this.startDate=""))},endTimeChange:function(){var e=this.startDate.substring(0,4)+"-"+this.startDate.substring(4,6)+"-"+this.startDate.substring(6),t=this.endDate.substring(0,4)+"-"+this.endDate.substring(4,6)+"-"+this.endDate.substring(6);e&&e.length>0&&t&&t.length>0&&(new Date(e).getTime()>new Date(t).getTime()&&(this.$message({type:"error",message:"开始日期不能大于结束日期!"}),this.endDate=""))},handleCurrentChange:function(e){this.pageObj.pageIndex=e,this.queryPageAll()},PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.queryPageAll()},queryPageAll:function(){var e=this;this.$axios({method:"post",url:this.API.queryMaterialReceivingPage,data:{stype:this.displayType,e01z204a:this.e01z204a,e01z207:this.e01z207,startTime:this.startDate,endTime:this.endDate,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;"1"==a.code?(e.receiveList=a.data.list,e.pageObj.total=a.data.total,e.receiveList.forEach(function(e){var t=e;t.isEidt=!1,0===e.forwardtype&&0===e.status?(t.showFlag=!1,t.delFlag=!1):(t.showFlag=!0,t.delFlag=!0),e=t})):e.$message({type:"error",message:"操作失败，请刷新重试！"})}).catch(function(e){})},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.queryPageAll()},receiveAdd:function(){this.dialogTitle="接收登记",this.add_receive_popUp=!0,this.selectDeceive=""},receiveEidt:function(){""!=this.selectDeceive?(this.dialogTitle="编辑",this.add_receive_popUp=!0):this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},receiveDel:function(){var e=this;""!=this.selectDeceive?"0"==this.selectDeceive.receivingType&&"0"==this.selectDeceive.status?this.$confirm("您确认删除这条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteDataFromS()}).catch(function(){e.selectDeceive="",e.$message({type:"info",message:"已取消"})}):this.$message.warning("只有手录数据并且没有被处理的数据才可以删除！"):this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},deleteDataFromS:function(){var e=this;this.$axios({method:"get",url:this.API.deleteMaterialReceiving,params:{id:this.selectDeceive.id,stype:this.displayType}}).then(function(t){var a=t.data;"1"==a.code?(e.selectDeceive="",e.$confirm("删除成功！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0}).then(function(){e.queryPageAll()})):"16"==a.code?e.$message.error("删除失败，只有手录数据并且没有被处理的数据才可以删除！"):e.$message({type:"error",message:"删除失败，请刷新重试！"})}).catch(function(e){})},detail:function(e,t){this.selectDeceive=n()({},e),this.detail_receive_popUp=!0},clickRow:function(e){this.selectDeceive=e},getAddBack:function(e){this.add_receive_popUp=!1,this.selectDeceive="","cancle"!=e&&this.queryPageAll()},receive:function(e){var t=this;this.$confirm("确定要接收该材料？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.status="2",t.toRecive(e)}).catch(function(){t.selectDeceive="",t.$message({type:"info",message:"已取消"})})},toRecive:function(e){var t=this;this.$axios({method:"post",url:this.API.changeStatus,data:{id:this.selectDeceive.id,status:this.status,backContent:this.backContent}}).then(function(a){"1"==a.data.code?(t.selectDeceive="",e.isEidt=!0,e.delFlag=!0,""==t.backContent?t.$message.success("接收成功！"):t.$message.success("退回成功！"),t.queryPageAll()):t.$message({type:"error",message:"操作失败，请刷新重试！"})}).catch(function(e){})},getBack:function(e,t){this.receive_back_popUp=!1,""!=e&&(this.backContent=e,this.status="1",this.toRecive(t))},getExport:function(){var e=this;this.$confirm("确定导出？","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var t=e.$refs.table.columns,a=e.commonFun.getExportParameters2(t,t.length-1);e.$axios({method:"post",url:e.API.exportMaterialReceivingList,responseType:"arraybuffer",data:{stype:e.displayType,e01z204a:e.e01z204a,e01z207:e.e01z207,startTime:e.startDate,endTime:e.endDate,titlels:a.titlels,colsls:a.colsls}}).then(function(e){this.commonFun.fileDownload(e.data,"材料接收按批次展示列表.xlsx")}.bind(e))}).catch(function(e){this.$message.warning("取消")}.bind(this))},gethangeReportData:function(){var e="";this.e01z204a&&(e+="and  E01Z204A like '%"+this.e01z204a+"%' "),this.e01z207&&(e+="and  E01Z207 like '%"+this.e01z207+"%' "),this.startDate&&(e+="and   E01Z201 &gt;="+this.startDate+" "),this.endDate&&(e+="and E01Z201 &lt;="+this.endDate+" "),this.reportData=e},handlePrint:function(){var e=this.API.constObj.reportFormData[7].id,t=this.$store.state.user.uAreacode;this.gethangeReportData();var a;a="U_AREACODE ='"+t+"'"+this.reportData,this.openPostWindow(this.uploadUrl,e,a)},openPostWindow:function(e,t,a){e=e+"?uuid="+t+"&SQLSCRIPT="+a,e=encodeURI(e),window.open(e)}}},N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"archives-check-container"},[a("div",{staticClass:"title"},[a("div",{staticClass:"left"},[a("el-button",{attrs:{type:"primary"},on:{click:e.receiveAdd}},[e._v("接收登记")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.receiveDel}},[e._v("刪除 ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.getExport}},[e._v("导出")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handlePrint}},[e._v("打印")])],1),e._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{clearable:"",placeholder:"来件单位"},model:{value:e.e01z204a,callback:function(t){e.e01z204a=t},expression:"e01z204a"}}),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"接收人员"},model:{value:e.e01z207,callback:function(t){e.e01z207=t},expression:"e01z207"}}),e._v(" "),a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{format:"yyyyMMdd","value-format":"yyyyMMdd",type:"date",placeholder:"材料开始日期"},on:{change:e.startTimeChange},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"date",format:"yyyyMMdd","value-format":"yyyyMMdd",placeholder:"材料结束日期"},on:{change:e.endTimeChange},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)]),e._v(" "),a("el-table",{ref:"table",staticClass:"material_table",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",height:e.tableHeight,data:e.receiveList},on:{"row-click":e.clickRow}},[a("el-table-column",{attrs:{label:"序号",align:"center","min-width":"6%"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z204a",label:"来件单位","show-overflow-tooltip":"","min-width":"16%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z201",label:"接收时间","min-width":"13%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z207",label:"接收人员","min-width":"11%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"archnames",label:"档案人员","show-overflow-tooltip":"","min-width":"14%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusValue",label:"状态","min-width":"10%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receivingTypeName",label:"来源","min-width":"12%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeValue",label:"接收类型","min-width":"10%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作",fixed:"right","min-width":"8%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",icon:"iconfont gd-chakan",circle:"",title:"详细"},on:{click:function(a){e.detail(t.row,t.$index)}}})]}}])})],1),e._v(" "),a("div",[a("pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1),e._v(" "),e.detail_receive_popUp?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",staticStyle:{height:"90%",overflow:"hidden"},attrs:{title:"详情","append-to-body":"","close-on-click-modal":!1,width:"60%",height:"100%",visible:e.detail_receive_popUp},on:{"update:visible":function(t){e.detail_receive_popUp=t}}},[a("materialReceiveDetail",{attrs:{selectMaterial:e.selectDeceive},on:{back:e.getBack}})],1):e._e(),e._v(" "),e.add_receive_popUp?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",staticStyle:{"margin-top":"-12vh !important",overflow:"hidden"},attrs:{title:e.dialogTitle,"append-to-body":"","close-on-click-modal":!1,width:"70%",visible:e.add_receive_popUp},on:{"update:visible":function(t){e.add_receive_popUp=t}}},[a("mterialReceiveAddEidt",{attrs:{selectMaterial:e.selectDeceive},on:{backAdd:e.getAddBack}})],1):e._e(),e._v(" "),e.receive_back_popUp?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"退回","append-to-body":"","close-on-click-modal":!1,width:"50%",height:"200px",visible:e.receive_back_popUp},on:{"update:visible":function(t){e.receive_back_popUp=t}}},[a("receiveBack",{attrs:{selectDeceive:e.selectDeceive},on:{backreceive:e.getBack}})],1):e._e()],1)};N._withStripped=!0;var Z={render:N,staticRenderFns:[]},V=Z;var J=!1;var X=a("VU/8")(H,V,!1,function(e){J||a("oAtb")},"data-v-176ccc78",null);X.options.__file="src/views/materialManage/materialReceive/DisplayBatch.vue";var G=X.exports,Q={name:"DisplayMaterial",components:{pagination:r.a,materialReceiveDetail:f,mterialReceiveAddEidt:A,receiveBack:q},props:["mainHeight"],data:function(){return{delFlag:!0,edit_visible:!1,startDate:"",endDate:"",e01z204a:"",a0101:"",displayMaterialList:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},detail_receive_popUp:!1,add_receive_popUp:!1,receive_back_popUp:!1,selectDeceive:"",dialogTitle:"",backContent:"",status:"2",tableHeight:"",displayType:2,uploadUrl:"",reportData:""}},watch:{mainHeight:function(e,t){this.mainHeight=e,this.tableHeight=this.mainHeight-75-1*this.$refs.table.$el.offsetHeight-132}},created:function(){this.queryPageAll()},mounted:function(){this.uploadUrl=this.API.baobiaoURL},methods:{startTimeChange:function(){var e=this.startDate.substring(0,4)+"-"+this.startDate.substring(4,6)+"-"+this.startDate.substring(6),t=this.endDate.substring(0,4)+"-"+this.endDate.substring(4,6)+"-"+this.endDate.substring(6);e&&e.length>0&&t&&t.length>0&&(new Date(e).getTime()>new Date(t).getTime()&&(this.$message({type:"error",message:"开始日期不能大于结束日期!"}),this.startDate=""))},endTimeChange:function(){var e=this.startDate.substring(0,4)+"-"+this.startDate.substring(4,6)+"-"+this.startDate.substring(6),t=this.endDate.substring(0,4)+"-"+this.endDate.substring(4,6)+"-"+this.endDate.substring(6);e&&e.length>0&&t&&t.length>0&&(new Date(e).getTime()>new Date(t).getTime()&&(this.$message({type:"error",message:"开始日期不能大于结束日期!"}),this.endDate=""))},handleCurrentChange:function(e){this.pageObj.pageIndex=e,this.queryPageAll()},PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.queryPageAll()},queryPageAll:function(){var e=this;this.$axios({method:"post",url:this.API.queryMaterialReceivingPage,data:{stype:this.displayType,e01z204a:this.e01z204a,a0101:this.a0101,startTime:this.startDate,endTime:this.endDate,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;"1"==a.code?(e.displayMaterialList=a.data.list,e.pageObj.total=a.data.total,e.displayMaterialList.forEach(function(e){var t=e;t.isEidt=!1,0===e.forwardtype&&0===e.status?(t.showFlag=!1,t.delFlag=!1):(t.showFlag=!0,t.delFlag=!0),e=t})):e.$message({type:"error",message:"操作失败，请刷新重试！"})}).catch(function(e){})},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.queryPageAll()},receiveAdd:function(){this.dialogTitle="接收登记",this.add_receive_popUp=!0,this.selectDeceive=""},receiveEidt:function(){""!=this.selectDeceive?(this.dialogTitle="编辑",this.add_receive_popUp=!0):this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},receiveDel:function(){var e=this;""!=this.selectDeceive?"0"==this.selectDeceive.receivingType&&"0"==this.selectDeceive.val_status?this.$confirm("您确认删除这条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteDataFromS()}).catch(function(){e.selectDeceive="",e.$message({type:"info",message:"已取消"})}):this.$message.warning("只有手录数据并且没有被处理的数据才可以删除！"):this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},deleteDataFromS:function(){var e=this;this.$axios({method:"get",url:this.API.deleteMaterialReceiving,params:{stype:this.displayType,id:this.selectDeceive.e01z200}}).then(function(t){var a=t.data;"1"==a.code?(e.selectDeceive="",e.$confirm("删除成功！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0}).then(function(){e.queryPageAll()})):"16"==a.code?e.$message.error("删除失败，只有手录数据并且没有被处理的数据才可以删除！"):e.$message({type:"error",message:"删除失败，请刷新重试！"})}).catch(function(e){})},detail:function(e,t){this.selectDeceive=n()({},e),this.detail_receive_popUp=!0},clickRow:function(e){this.selectDeceive=e},getAddBack:function(e){this.add_receive_popUp=!1,this.selectDeceive="","cancle"!=e&&this.queryPageAll()},receive:function(e){var t=this;this.$confirm("确定要接收该材料？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.status="2",t.toRecive(e)}).catch(function(){t.selectDeceive="",t.$message({type:"info",message:"已取消"})})},toRecive:function(e){var t=this;this.$axios({method:"post",url:this.API.changeStatus,data:{id:this.selectDeceive.id,status:this.status,backContent:this.backContent}}).then(function(a){"1"==a.data.code?(t.selectDeceive="",e.isEidt=!0,e.delFlag=!0,""==t.backContent?t.$message.success("接收成功！"):t.$message.success("退回成功！"),t.queryPageAll()):t.$message({type:"error",message:"操作失败，请刷新重试！"})}).catch(function(e){})},getBack:function(e,t){this.receive_back_popUp=!1,""!=e&&(this.backContent=e,this.status="1",this.toRecive(t))},getExport:function(){var e=this;this.$confirm("确定导出？","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var t=e.$refs.table.columns,a=e.commonFun.getExportParameters(t);e.$axios({method:"post",url:e.API.exportMaterialReceivingList,responseType:"arraybuffer",data:{stype:e.displayType,e01z204a:e.e01z204a,e01z207:e.e01z207,startTime:e.startDate,endTime:e.endDate,titlels:a.titlels,colsls:a.colsls}}).then(function(e){this.commonFun.fileDownload(e.data,"材料接收按材料展示列表.xlsx")}.bind(e))}).catch(function(e){this.$message.warning("取消")}.bind(this))},gethangeReportData:function(){var e="";this.e01z204a&&(e+="and  z200.E01Z204A like '%"+this.e01z204a+"%' "),this.e01z207&&(e+="and  z2.a0101 like '%"+this.a0101+"%' "),this.startDate&&(e+="and   z200.E01Z201 &gt;="+this.startDate+" "),this.endDate&&(e+="and z200.E01Z201 &lt;="+this.endDate+" "),this.reportData=e},handlePrint:function(){var e=this.API.constObj.reportFormData[8].id,t=this.$store.state.user.uAreacode;this.gethangeReportData();var a;a="and  z2.U_AREACODE = '"+t+"'"+this.reportData,this.openPostWindow(this.uploadUrl,e,a)},openPostWindow:function(e,t,a){e=e+"?uuid="+t+"&SQLSCRIPT="+a,e=encodeURI(e),window.open(e)}}},K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"display-material-container"},[a("div",{staticClass:"title"},[a("div",{staticClass:"left"},[a("el-button",{attrs:{type:"primary"},on:{click:e.receiveAdd}},[e._v("接收登记")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.receiveDel}},[e._v("刪除 ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.getExport}},[e._v("导出")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handlePrint}},[e._v("打印")])],1),e._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{clearable:"",placeholder:"来件单位"},model:{value:e.e01z204a,callback:function(t){e.e01z204a=t},expression:"e01z204a"}}),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"人员姓名"},model:{value:e.a0101,callback:function(t){e.a0101=t},expression:"a0101"}}),e._v(" "),a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{format:"yyyyMMdd","value-format":"yyyyMMdd",type:"date",placeholder:"材料开始日期"},on:{change:e.startTimeChange},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"date",format:"yyyyMMdd","value-format":"yyyyMMdd",placeholder:"材料结束日期"},on:{change:e.endTimeChange},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)]),e._v(" "),a("el-table",{ref:"table",staticClass:"material_table",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",height:e.tableHeight,data:e.displayMaterialList},on:{"row-click":e.clickRow}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z201",label:"收件日期","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e100a",label:"档案编号","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0101",label:"姓名","show-overflow-tooltip":"",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0104a",label:"性别","show-overflow-tooltip":"",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0107",label:"出生年月","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0111a",label:"籍贯","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0192a",label:"工作单位与职务","show-overflow-tooltip":"",width:"140px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z204a",label:"来件单位","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"forwardtypeName",label:"接收方式","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"confidentialno",label:"机要号","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z211",label:"材料类别","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z211a",label:"材料名称","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z227",label:"形成时间","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z224",label:"材料页数",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receivingTypeName",label:"来源","min-width":"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"valStatusName",label:"审核结果","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z231a",label:"材料备注","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z207",label:"接收人","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z231",label:"备注","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"archivistTime",label:"归档时间","show-overflow-tooltip":"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"archivist",label:"归档人","show-overflow-tooltip":"",width:"90px"}})],1),e._v(" "),a("div",[a("pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1),e._v(" "),e.detail_receive_popUp?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",staticStyle:{height:"90%",overflow:"hidden"},attrs:{title:"详情","append-to-body":"","close-on-click-modal":!1,width:"60%",height:"100%",visible:e.detail_receive_popUp},on:{"update:visible":function(t){e.detail_receive_popUp=t}}},[a("materialReceiveDetail",{attrs:{selectMaterial:e.selectDeceive},on:{back:e.getBack}})],1):e._e(),e._v(" "),e.add_receive_popUp?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",staticStyle:{"margin-top":"-12vh !important",overflow:"hidden"},attrs:{title:e.dialogTitle,"append-to-body":"","close-on-click-modal":!1,width:"70%","max-height":"80%",visible:e.add_receive_popUp},on:{"update:visible":function(t){e.add_receive_popUp=t}}},[a("mterialReceiveAddEidt",{attrs:{selectMaterial:e.selectDeceive},on:{backAdd:e.getAddBack}})],1):e._e(),e._v(" "),e.receive_back_popUp?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"退回","append-to-body":"","close-on-click-modal":!1,width:"50%",height:"200px",visible:e.receive_back_popUp},on:{"update:visible":function(t){e.receive_back_popUp=t}}},[a("receiveBack",{attrs:{selectDeceive:e.selectDeceive},on:{backreceive:e.getBack}})],1):e._e()],1)};K._withStripped=!0;var W={render:K,staticRenderFns:[]},Y=W;var ee=!1;var te=a("VU/8")(Q,Y,!1,function(e){ee||a("aGSw")},"data-v-ccd11be6",null);te.options.__file="src/views/materialManage/materialReceive/DisplayMaterial.vue";var ae={name:"MaterialReceive",components:{displayBatch:G,displayMaterial:te.exports},mounted:function(){this.mainHeight=window.innerHeight-this.$refs.elMain.$el.offsetTop-15},data:function(){return{activeName:"first",mainHeight:""}},methods:{handleClick:function(e,t){this.$refs.displayBatch.queryPageAll(),this.$refs.displayMaterial.queryPageAll()}}},ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"material_Batch_receive_container"},[a("el-main",{ref:"elMain",style:{height:e.mainHeight}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"按批次展示",name:"first"}},[a("displayBatch",{ref:"displayBatch",attrs:{mainHeight:e.mainHeight}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"按材料展示",name:"second"}},[a("displayMaterial",{ref:"displayMaterial",attrs:{mainHeight:e.mainHeight}})],1)],1)],1)],1)};ie._withStripped=!0;var ne={render:ie,staticRenderFns:[]},le=ne;var se=!1;var re=a("VU/8")(ae,le,!1,function(e){se||a("F0gz")},"data-v-93018780",null);re.options.__file="src/views/materialManage/materialReceive/MaterialReceive.vue";t.default=re.exports},kAyj:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.material_Batch_receive_container[data-v-176ccc78] {\n  background-color: #fff;\n  padding-bottom: 0 !important;\n}\n.material_Batch_receive_container .title[data-v-176ccc78] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    font-size: 14px;\n    padding: 10px;\n}\n.material_Batch_receive_container .title .el-button[data-v-176ccc78] {\n      size: small;\n      color: white;\n      text-align: center;\n}\n.material_Batch_receive_container .title .left[data-v-176ccc78] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n.material_Batch_receive_container .title .right[data-v-176ccc78] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n.material_Batch_receive_container .title .right .el-input[data-v-176ccc78] {\n        padding-right: 10px;\n        width: 150px;\n}\n.material_Batch_receive_container .el-table__body tr.current-row > td[data-v-176ccc78] {\n    background: #DCEBFA !important;\n    color: #606266;\n}\n.material_Batch_receive_container .material_page[data-v-176ccc78] {\n    margin-top: 10px;\n    text-align: right;\n}\n",""])},mbYw:function(e,t,a){var i=a("XmMM");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("12630068",i,!1,{})},mlan:function(e,t,a){var i=a("9f2X");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("8c0bd1fe",i,!1,{})},o4JO:function(e,t,a){var i=a("EviN");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("20182678",i,!1,{})},oAtb:function(e,t,a){var i=a("kAyj");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("111e236d",i,!1,{})},rXDJ:function(e,t,a){"use strict";var i={name:"AreaTreeSelected",props:["departmentId","stype"],data:function(){return{treeList:[],oldTreeList:[],checkedObj:""}},created:function(){this.getTreeData()},watch:{departmentId:function(e){var t=this;this.$nextTick(function(){t.$refs.treeBox.setCurrentKey(e)})}},methods:{renderContent:function(e,t){t.node;var a=t.data;t.store;return e("span",[e("span",[a.name])])},getTreeData:function(){var e=this,t="";t=this.stype&&2==this.stype?this.API.areaTreeByUAreacode:this.API.areaTree,this.$axios({loading:{isShow:!1},method:"get",url:t,params:{stype:this.stype}}).then(function(t){var a=t.data;"1"==a.code?(e.oldTreeList=a.data,e.treeList=e.commonFun.toTreeDataNormal(a.data,{childKey:"id",fatherKey:"pId"})):e.$message({type:"error",message:"获取区域树形下拉框数据失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},handleNodeClick:function(e){this.checkedObj=e},save:function(){""===this.checkedObj&&this.$message("请选中一条数据！"),this.$emit("back",this.checkedObj)},cancle:function(){this.$emit("back")}}},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"areatree-selected-container"},[a("el-tree",{ref:"treeBox",staticClass:"filter-tree",attrs:{"highlight-current":!0,height:"300px","node-key":"departmentId","render-content":e.renderContent,"default-expand-all":"",data:e.treeList},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确认")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.cancle}},[e._v("取消")])],1)],1)};n._withStripped=!0;var l={render:n,staticRenderFns:[]},s=l;var r=!1;var o=a("VU/8")(i,s,!1,function(e){r||a("mlan")},null,null);o.options.__file="src/views/materialManage/materialReceive/AreaTreeSelected.vue";t.a=o.exports},tqze:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n[data-v-93018780] .el-tabs__item {\n  margin-left: 10px;\n}\n.material_Batch_receive_container .el-main[data-v-93018780] {\n  background-color: #fff;\n  padding: 0 !important;\n}\n",""])}});