webpackJsonp([64],{"2V5S":function(e,t,a){var n=a("5Znt");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("966dc238",n,!1,{})},"4mhV":function(e,t,a){var n=a("hd+D");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("2790d09e",n,!1,{})},"5Znt":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\nel-dialog .del-dialog-cnt[data-v-b54a0d7e] {\n  font-size: 16px;\n  text-align: center;\n}\n.userRole[data-v-b54a0d7e] {\n  width: 100%;\n  font-size: 14px;\n}\n.userRole .container[data-v-b54a0d7e] {\n    padding: 0 0 0 0 !important;\n    border-left: none;\n    border-right: none;\n}\n.userRole .container .demo-form-inline[data-v-b54a0d7e] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      padding: 10px 0 10px 10px;\n}\n.userRole .container .demo-form-inline .el-input[data-v-b54a0d7e] {\n        width: 180px;\n        margin: 0 10px 0 10px;\n}\n.userRole .container .demo-form-inline .sele[data-v-b54a0d7e] {\n        width: 180px;\n}\n.userRole .container .pagination[data-v-b54a0d7e] {\n      margin: 0;\n}\n.gray[data-v-b54a0d7e] {\n  color: #dcdfe6;\n}\n.red[data-v-b54a0d7e] {\n  color: #ff0000;\n}\n",""])},X4J1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("cMGX"),i=a("/kpT"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setUserRole"},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全部角色")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0",height:"1px",background:"rgba(255,255,255,1)","box-shadow":"0px 1px 0px 0px rgba(9,37,93,0.14)"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.chioceValue,callback:function(t){e.chioceValue=t},expression:"chioceValue"}},e._l(e.dataOptions,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveRole}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.cancelSet}},[e._v("取 消")])],1)],1)};s._withStripped=!0;var o={render:s,staticRenderFns:[]},l=o;var r=!1;var c=a("VU/8")({name:"SetUserRole",props:["chioceUserId"],data:function(){return{userId:"",dataOptions:[],chioceValue:[],checkAll:!1,isIndeterminate:!0,dataIdList:[]}},created:function(){},mounted:function(){this.userId=this.chioceUserId,this.getData()},computed:{},methods:{handleCheckAllChange:function(e){this.chioceValue=e?this.dataIdList:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.dataIdList.length,this.isIndeterminate=t>0&&t<this.dataIdList.length},getData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".setUserRole"},method:"get",url:this.API.findRoles,params:{id:this.userId}}).then(function(t){var a=t.data;"1"==a.code?(e.dataOptions=[],e.chioceValue=[],e.dataOptions=a.data.powerRoles,e.chioceValue=a.data.userRoleIds,e.isIndeterminate=!1,e.checkAll=!1,e.dataIdList=[],e.dataOptions.forEach(function(t){e.dataIdList.push(t.id)})):e.$message({type:"error",message:"获取用户角色信息失败，请退出重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},cancelSet:function(){this.$emit("SetUserRoleCallBack",!1)},saveRole:function(){var e=this;0!=this.chioceValue.length?this.$axios({loading:{isShow:!0,target:".setUserRole"},method:"post",url:this.API.roleSetting,data:{id:this.userId,roleIds:this.chioceValue.join(",")}}).then(function(t){"1"==t.data.code?(e.$message({type:"success",message:"用户角色设置成功!"}),e.$emit("SetUserRoleCallBack",!0)):e.$message({type:"error",message:"保存角色失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})}):this.$message({type:"waring",message:"分配角色列表不能为空!"})}}},l,!1,function(e){r||a("4mhV")},"data-v-69568933",null);c.options.__file="src/views/userRightsManagement/SetUserRole.vue";var d=c.exports,h={name:"userRole",components:{Pagination:n.a,UserGroupTreeSelect:i.a,SetUserRole:d},data:function(){return{bSetTableHeight:!1,tableHeight:window.innerHeight-70-52-5,tableData:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},setRolesVisible:!1,userObj:{},searchForm:{cn:"",organizationIDS:""}}},created:function(){},mounted:function(){this.getData()},watch:{bSetTableHeight:function(e,t){this.tableHeight=window.innerHeight-this.$refs.multipleTable.$el.offsetTop-130}},methods:{handleCurrentChange:function(e){this.pageObj.pageIndex=e,this.getData()},PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getData()},UserGroupTreeSelectCall:function(e){this.searchForm.organizationIDS=e?e.id:""},SetUserRoleCallBack:function(e){this.setRolesVisible=!1,e&&this.getData()},getData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".userRole"},method:"post",url:this.API.findUserListPage,data:{organizationIDS:this.searchForm.organizationIDS,cn:this.searchForm.cn,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;e.bSetTableHeight=!0,"1"==a.code?(e.tableData=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"获取用户列表失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.getData()},showRoleDialog:function(e,t){this.userObj=this.tableData[e],this.setRolesVisible=!0}}},p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userRole"},[a("div",{staticClass:"container"},[a("div",{staticClass:"demo-form-inline"},[a("UserGroupTreeSelect",{staticClass:"sele",attrs:{defaultOptions:e.searchForm.organizationIDS},on:{UserGroupTreeSelectCall:e.UserGroupTreeSelectCall},model:{value:e.searchForm.organizationIDS,callback:function(t){e.$set(e.searchForm,"organizationIDS",t)},expression:"searchForm.organizationIDS"}}),e._v(" "),a("el-input",{attrs:{placeholder:"输入姓名或账户",clearable:""},model:{value:e.searchForm.cn,callback:function(t){e.$set(e.searchForm,"cn",t)},expression:"searchForm.cn"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{id:"userRoleTable",data:e.tableData,height:e.tableHeight}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1)+" ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cn",label:"姓名",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uid",label:"账户",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"stationName",label:"岗位",sortable:"","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleNames",label:"所属角色","min-width":"130","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",icon:"iconfont gd-renyuanguanli1",circle:"",title:"设置角色"},on:{click:function(a){e.showRoleDialog(t.$index,t.row)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("Pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1)],1),e._v(" "),e.setRolesVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"设置用户角色",visible:e.setRolesVisible,width:"580px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.setRolesVisible=t}}},[a("SetUserRole",{attrs:{chioceUserId:e.userObj.id},on:{SetUserRoleCallBack:e.SetUserRoleCallBack}})],1):e._e()],1)};p._withStripped=!0;var g={render:p,staticRenderFns:[]},u=g;var b=!1;var m=a("VU/8")(h,u,!1,function(e){b||a("2V5S")},"data-v-b54a0d7e",null);m.options.__file="src/views/userRightsManagement/UserRole.vue";t.default=m.exports},"hd+D":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.setUserRole[data-v-69568933] {\n  padding: 0 0 10px 16px !important;\n}\n.setUserRole .el-checkbox[data-v-69568933] {\n    display: block !important;\n}\n.setUserRole .el-checkbox__input[data-v-69568933] {\n    display: inline-block !important;\n}\n.setUserRole .el-checkbox + .el-checkbox[data-v-69568933] {\n    margin-left: 0 !important;\n}\n.setUserRole[data-v-69568933] .el-checkbox__input.is-checked + .el-checkbox__label {\n    color: #606266 !important;\n}\n.setUserRole .dialog-footer[data-v-69568933] {\n    padding-top: 10px;\n    text-align: center;\n}\n.setUserRole .el-select[data-v-69568933] {\n    width: 100%;\n}\n",""])}});