webpackJsonp([26],{"8T7z":function(e,t,a){var i=a("a/Fb");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("28e5423d",i,!1,{})},B5u3:function(e,t,a){var i=a("Hmkr");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("1dca8e6e",i,!1,{})},BdrB:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.fileTypeSelect .el-select[data-v-78a988a2] {\n  width: 100%;\n}\n",""])},GiKf:function(e,t,a){var i=a("xlfD");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("79d9dada",i,!1,{})},Hmkr:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.outsiderBorrowApply[data-v-a792c698] {\n  width: 100%;\n  height: 100%;\n}\n.outsiderBorrowApply .container[data-v-a792c698] {\n    padding: 25px 0 0 0 !important;\n}\n.outsiderBorrowApply .container .el-header[data-v-a792c698] {\n      padding: 0 7vw;\n}\n.outsiderBorrowApply .container .el-main[data-v-a792c698] {\n      padding: 0;\n      overflow: hidden;\n}\n",""])},Ul7f:function(e,t,a){"use strict";a("g7ZD");var i={name:"FileTypeSelect",props:["chioceOptionId"],data:function(){return{dataList:[],chioceId:this.chioceOptionId}},computed:{},created:function(){this.getData()},methods:{changeChioceId:function(e){this.chioceId=e,this.$emit("FileTypeCall",e)},getData:function(){var e=this;this.$axios({loading:{isShow:!1},method:"get",url:this.API.getDataList,params:{id:this.API.constObj.fileType}}).then(function(t){var a=t.data;"1"==a.code?(e.dataList=a.data,e.chioceOptionId&&e.chioceOptionId.length>0&&(e.chioceId=e.chioceOptionId,e.$emit("FileTypeCall",e.chioceId))):e.$message({type:"error",message:"获取档案类型下拉框数据失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})}}},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fileTypeSelect"},[a("el-radio-group",{on:{change:e.changeChioceId},model:{value:e.chioceId,callback:function(t){e.chioceId=t},expression:"chioceId"}},e._l(e.dataList,function(t){return a("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1)],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]},l=r;var o=!1;var s=a("VU/8")(i,l,!1,function(e){o||a("rZtw")},"data-v-78a988a2",null);s.options.__file="src/components/FileTypeSelect.vue";t.a=s.exports},Wak3:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.editPersonnelFiles[data-v-5ea2b9a9] {\n  width: 100%;\n}\n.editPersonnelFiles .el-row[data-v-5ea2b9a9] {\n    padding: 20px;\n}\n",""])},Wd5F:function(e,t,a){var i=a("Wak3");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("14e8ba36",i,!1,{})},WppX:function(e,t,a){e.exports=a.p+"static/img/robotRight.802af21.png"},"a/Fb":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.outsiderApply[data-v-40a05969] {\n  height: 80vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.outsiderApply .rowHeader[data-v-40a05969] {\n    padding: 20px 20px 20px;\n}\n.outsiderApply .rowHeader .el-col[data-v-40a05969] {\n      width: 50%;\n}\n.outsiderApply .el-form[data-v-40a05969] {\n    padding: 0 20px !important;\n}\n.outsiderApply .el-form .el-row .areaTitle[data-v-40a05969] {\n      margin: 10px 0 20px 0;\n}\n.outsiderApply .el-form .el-row .areaTitle strong[data-v-40a05969] {\n        font: 18px large;\n}\n.outsiderApply .el-form .el-row .areaTitle span[data-v-40a05969] {\n        color: #F56C6C;\n        font: 12px Extra Small;\n}\n.outsiderApply .el-form .el-row .el-form-item[data-v-40a05969] {\n      border: 1px solid #C4CEE2;\n}\n.outsiderApply .el-form .el-row .el-form-item[data-v-40a05969] .el-form-item__label {\n        border-right: 1px solid #C4CEE2;\n        background-color: #F3F9FC;\n}\n.outsiderApply .el-form .el-row .el-form-item[data-v-40a05969] .el-input__inner,\n      .outsiderApply .el-form .el-row .el-form-item[data-v-40a05969] .el-textarea__inner {\n        border: none !important;\n}\n.outsiderApply .el-form .el-row .el-form-item[data-v-40a05969] .el-radio-group,\n      .outsiderApply .el-form .el-row .el-form-item[data-v-40a05969] .el-date-editor,\n      .outsiderApply .el-form .el-row .el-form-item[data-v-40a05969] .el-slider {\n        padding-left: 15px;\n}\n.outsiderApply .intelligentRobot[data-v-40a05969] {\n    width: 100vw;\n    height: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.outsiderApply .intelligentRobot .messageMain[data-v-40a05969] {\n      position: relative;\n}\n.outsiderApply .intelligentRobot .messageMain .closeBtn[data-v-40a05969] {\n        position: absolute;\n        top: -35px;\n        right: -20px;\n        background-color: #8194A6;\n        border-radius: 50%;\n        border-radius: 50%;\n        z-index: 100;\n        cursor: pointer;\n        font-size: 16px !important;\n        padding: 6px;\n}\n.outsiderApply .intelligentRobot .messageMain .messageContent[data-v-40a05969] {\n        position: relative;\n        background: #398ff0;\n        border-radius: 85px;\n        color: #FFFFFF;\n        font-size: 16px;\n        padding: 36px 47px 36px 200px;\n}\n.outsiderApply .intelligentRobot .messageMain .messageContent .robot[data-v-40a05969] {\n          width: 131px;\n          height: 184px;\n          position: absolute;\n          top: -36px;\n          left: 38px;\n}\n.outsiderApply .intelligentRobot .messageMain .messageContent p[data-v-40a05969] {\n          font-size: 18px;\n          margin-bottom: 20px;\n}\n.outsiderApply .intelligentRobot .messageMain .messageContent p span[data-v-40a05969] {\n            font-size: 26px;\n}\n.outsiderApply .intelligentRobot .messageMain .messageContent span[data-v-40a05969] {\n          font-size: 18px;\n}\n.outsiderApply .intelligentRobot .messageMain .btnArea[data-v-40a05969] {\n        text-align: center;\n        margin-top: 51px;\n}\n.outsiderApply .intelligentRobot .messageMain .btnArea .el-button[data-v-40a05969] {\n          font-size: 14px;\n          border-radius: 3px;\n}\n",""])},hfWG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Gu7T"),n=a.n(i),r=a("cMGX"),l=a("Ev+9"),o=a("41Z1"),s={name:"SelectPersonnelFiles",props:["isAreaQuery","mainHeight"],components:{Pagination:r.a,OrganizationTreeSelect:l.a,AreaTreeSelect:o.a},data:function(){return{tableData:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},tableHeight:"",isSearchByArea:this.isAreaQuery||!1,multipleSelection:[],searchForm:{areaCodeID:"",departmentID:"",nameAndPinyin:""},isShowAreaSelect:!1}},created:function(){},mounted:function(){this.getData()},watch:{tableData:function(e,t){this.tableHeight=this.mainHeight-1*this.$refs.multipleTable.$el.offsetTop-52}},methods:{toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},getRowKey:function(e){return e.a0100},handleCurrentChange:function(e){this.pageObj.pageIndex=e,this.getData()},PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getData()},orgTreeSelectCall:function(e){this.searchForm.departmentID=e?e.id:""},areaTreeSelectCall:function(e){this.searchForm.areaCodeID=e?e.code:""},goBack:function(){this.$router.push("/applyMain")},getData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".selectPersonnelFiles"},method:"post",url:this.API.getA01,data:{uAreaCode:this.$store.state.user.uAreacode,b0000:this.searchForm.departmentID,a0101:this.searchForm.nameAndPinyin,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;"1"==a.code?(e.tableData=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"查询档案失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.getData()},confirmChioce:function(){if(this.multipleSelection.length<1)this.$message({message:"请至少选中一条数据!",type:"warning"});else{var e=this.dataSort(this.multipleSelection);this.$emit("changeStep",2,e)}},handleSelectionChange:function(e){if(e.length>this.API.constObj.applyTotalNumber)this.$message({message:"单次最多只能查借阅"+this.API.constObj.applyTotalNumber+"人!",type:"warning"});else{this.multipleSelection=e;var t=this.dataSort(this.multipleSelection);this.multipleSelection.length>0&&1,this.$emit("changeStep",1,t)}},dataSort:function(e){var t=[];return 0==e.length?t=[]:e.forEach(function(e,a){var i=e;i.type="外来人员查询",t.push(i)}),t}}},p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"selectPersonnelFiles"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"输入姓名或拼音"},model:{value:e.searchForm.nameAndPinyin,callback:function(t){e.$set(e.searchForm,"nameAndPinyin",t)},expression:"searchForm.nameAndPinyin"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.goBack}},[e._v("返回")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8,align:"right"}},[a("el-badge",{staticClass:"item",attrs:{value:e.multipleSelection.length,type:"primary"}},[a("el-button",{attrs:{size:"small",type:"primary",disabled:!(e.multipleSelection.length>0)},on:{click:e.confirmChioce}},[e._v("下一步\n\t\t\t  \t"),a("i",{staticClass:"el-icon-arrow-right el-icon-right"})])],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"row-key":e.getRowKey,height:e.tableHeight,"empty-text":"没有查到相关数据，试试更换其他搜索条件!"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1)+" ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"a0101",label:"姓名","min-width":"100","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0111A",label:"籍贯","min-width":"250","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0192a",label:"工作单位及职务","min-width":"250","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"120","reserve-selection":""}})],1),e._v(" "),a("Pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1)};p._withStripped=!0;var c={render:p,staticRenderFns:[]},m=c;var d=!1;var g=a("VU/8")(s,m,!1,function(e){d||a("GiKf")},"data-v-0a1b7c1b",null);g.options.__file="src/views/archivalBorrowing/outsider/SelectPersonnelFiles.vue";var u=g.exports,h={name:"EditPersonnelFiles",props:["defaultTables","mainHeight"],components:{},data:function(){return{tableDatas:[],position:0,spanArr:[],tableHeight:""}},created:function(){},mounted:function(){},computed:{},watch:{defaultTables:function(e,t){this.tableDatas=[].concat(n()(e)),this.rowspan()},tableDatas:function(e,t){this.tableHeight=this.mainHeight-164}},methods:{cellRight:function(e){e.row,e.column,e.rowIndex,e.columnIndex},rowspan:function(){var e=this;this.position=0,this.spanArr=[],this.tableDatas.forEach(function(t,a){0===a?(e.spanArr.push(1),e.position=0):e.tableDatas[a].type===e.tableDatas[a-1].type?(e.spanArr[e.position]+=1,e.spanArr.push(0)):(e.spanArr.push(1),e.position=a)})},objectSpanMethod:function(e){e.row,e.column,e.rowIndex,e.columnIndex},handleDelete:function(e,t){this.tableDatas.splice(e,1),this.rowspan()},prevStep:function(){this.$emit("changeStep",1)},nextStep:function(){this.$emit("changeStep",3,this.tableDatas)}}},y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editPersonnelFiles"},[a("el-row",[a("el-col",{attrs:{span:12,align:"left"}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-arrow-left"},on:{click:e.prevStep}},[e._v("上一步")])],1),e._v(" "),a("el-col",{attrs:{span:12,align:"right"}},[a("el-button",{attrs:{size:"small",type:"primary",disabled:!(e.tableDatas.length>0)},on:{click:e.nextStep}},[e._v("下一步\n\t\t\t\t\t"),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",attrs:{data:e.tableDatas,"span-method":e.objectSpanMethod,height:e.tableHeight,"empty-text":"没有数据了，请返回上一步重新选择!","cell-style":e.cellRight}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0101",label:"姓名","min-width":"160","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0111A",label:"籍贯","min-width":"160","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0192a",label:"工作单位及职务","min-width":"200","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){e.handleDelete(t.$index,t.row)}}})]}}])})],1)],1)};y._withStripped=!0;var f={render:y,staticRenderFns:[]},b=f;var v=!1;var F=a("VU/8")(h,b,!1,function(e){v||a("Wd5F")},"data-v-5ea2b9a9",null);F.options.__file="src/views/archivalBorrowing/outsider/EditPersonnelFiles.vue";var w=F.exports,x=a("KerB"),_=a("PODl"),S=a("Ul7f"),A={name:"OutsiderApply",props:["defaultTables","mainHeight"],components:{ApplyTypeSelect:x.a,ReadReasonsSelect:_.a,FileTypeSelect:S.a},data:function(){var e=this;return{isFinish:!1,searchCode:"",applyForm:{applymanname:"",applymanorg:"",applypost:"",idnumber:"",contactway:"",politic:"",applymanname2:"",applymanorg2:"",applypost2:"",idnumber2:"",contactway2:"",politic2:"",isexistreference:!0,readingtime:480,applytype:this.API.constObj.applyTypeSelectId[1].id,readingstarttime:"",readingendtime:"",rstype:this.API.constObj.fileTypeList[0].id,purpose:"",describe:"",readingDate:[]},oldRstype:"",outsiderApplyHeight:"",maxReadingTime:480,fileID:"",fileName:"",chioceFileData:[],rules:{applymanname:[{required:!0,message:"请输入查阅人1姓名",trigger:"blur"},{min:2,max:e.fieldsConfig.applymanname.byteLength,message:"长度在 2 到 "+e.fieldsConfig.applymanname.byteLength+"个字符",trigger:"blur"}],applymanname2:[{required:!1,message:"请输入查阅人2姓名",trigger:"blur"},{min:2,max:e.fieldsConfig.applymanname.byteLength,message:"长度在 2 到 "+e.fieldsConfig.applymanname.byteLength+" 个字符",trigger:"blur"}],applymanorg:[{required:!0,message:"请输入查档人1单位",trigger:"blur"},{min:2,max:e.fieldsConfig.applymanorg.byteLength,message:"长度在 2 到 "+e.fieldsConfig.applymanorg.byteLength+" 个字符",trigger:"blur"}],applymanorg2:[{required:!1,message:"请输入查档人2单位",trigger:"blur"},{min:2,max:e.fieldsConfig.applymanorg.byteLength,message:"长度在 2 到"+e.fieldsConfig.applymanorg.byteLength+" 个字符",trigger:"blur"}],applypost:[{required:!0,message:"请输入查档人1职务",trigger:"blur"},{min:2,max:e.fieldsConfig.applypost.byteLength,message:"长度在 2 到 "+e.fieldsConfig.applypost.byteLength+" 个字符",trigger:"blur"}],applypost2:[{required:!1,message:"请输入查档人2职务",trigger:"blur"},{min:2,max:e.fieldsConfig.applypost.byteLength,message:"长度在 2 到 "+e.fieldsConfig.applypost.byteLength+" 个字符",trigger:"blur"}],politic:[{required:!0,message:"请输入查阅人1政治面貌",trigger:"blur"},{min:2,max:e.fieldsConfig.commonLength.fifty,message:"长度在 2 到 "+e.fieldsConfig.commonLength.fifty+"个字符",trigger:"blur"}],politic2:[{required:!1,message:"请输入查阅人2政治面貌",trigger:"blur"},{min:2,max:e.fieldsConfig.commonLength.fifty,message:"长度在 2 到 "+e.fieldsConfig.commonLength.fifty+" 个字符",trigger:"blur"}],idnumber:[{required:!0,message:"请输入查档人1证件号码",trigger:"blur"},{min:18,max:18,message:"请填写正确的身份证格式",trigger:"blur"},{validator:function(t,a,i){a===e.applyForm.idnumber2?i(new Error("查档人1和查档人2证件号码重复!")):i()},trigger:"blur"}],idnumber2:[{required:!1,message:"请输入查档人2证件号码",trigger:"blur"},{min:18,max:18,message:"请填写正确的身份证格式",trigger:"blur"},{validator:function(t,a,i){0===a.length?i():a===e.applyForm.idnumber?i(new Error("查档人1和查档人2证件号码重复!")):i()},trigger:"blur"}],contactway:[{required:!0,message:"请输入查档人1手机号",trigger:"blur"},{validator:function(t,a,i){0==/^1[3456789]\d{9}$/.test(a)?i(new Error("手机号无效!")):a===e.applyForm.contactway2?i(new Error("查档人1和查档人2手机号重复!")):i()},trigger:"blur"}],contactway2:[{required:!1,message:"请输入查档人2联系方式",trigger:"blur"},{validator:function(t,a,i){0===a.length?i():0==/^1[3456789]\d{9}$/.test(a)?i(new Error("手机号无效!")):a===e.applyForm.contactway?i(new Error("查档人1和查档人2手机号重复!")):i()},trigger:"blur"}],readingtime:[{required:!0,message:"请输入查档时限",trigger:"blur"}],purpose:[{required:!0,message:"请选择查借阅理由",trigger:"change"}],readingDate:[{required:!0,message:"请选择查借阅起止时间",trigger:"change"},{validator:function(e,t,a){(new Date).getTime();var i=new Date(t[0]).getTime();(new Date(t[1]).getTime()-i)/1e3<600?a(new Error("查借阅结束时间至少要比开始时间晚10分钟")):a()},trigger:"change"}],isexistreference:[{required:!0,message:"请选择是否有介绍信",trigger:"change"}],describe:[{required:!1,message:"请输入详细描述",trigger:"blur"},{min:0,max:200,message:"长度在0到 200 个字符",trigger:"blur"}]}}},created:function(){this.startTime()},mounted:function(){},computed:{},watch:{"applyForm.readingDate":{handler:function(e,t){void 0!=e&&0!=e.length||(this.maxReadingTime=480)}},defaultTables:function(e,t){this.chioceFileData=[].concat(n()(e)),this.concatParams(),this.outsiderApplyHeight=this.mainHeight-52}},methods:{startTime:function(){var e=new Date,t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,""),a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()+1)).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");this.applyForm.readingstarttime=t,this.applyForm.readingendtime=a,this.applyForm.readingDate.push(t),this.applyForm.readingDate.push(a)},ApplyTypeCall:function(e){this.applyForm.applytype=e,this.applyForm.applytype===this.API.constObj.applyTypeSelectId[0].id?this.applyForm.rstype=this.API.constObj.fileTypeList[1].id:(this.applyForm.applytype,this.API.constObj.applyTypeSelectId[1].id,this.applyForm.rstype=this.oldRstype)},ReadReasonsCall:function(e){this.applyForm.purpose=e},FileTypeCall:function(e){this.applyForm.rstype=e,this.oldRstype=e},getDate:function(e){if(e&&2==e.length){this.applyForm.readingstarttime=this.commonFun.dateFormat(e[0],"yyyy-MM-dd HH:mm"),this.applyForm.readingendtime=this.commonFun.dateFormat(e[1],"yyyy-MM-dd HH:mm");var t=new Date(this.applyForm.readingstarttime).getTime(),a=new Date(this.applyForm.readingendtime).getTime();this.maxReadingTime=parseInt((a-t)/1e3/60)}},addApply:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a={applymanname:t.applyForm.applymanname,applymanorg:t.applyForm.applymanorg,applypost:t.applyForm.applypost,idnumber:t.applyForm.idnumber,contactway:t.applyForm.contactway,politic:t.applyForm.politic,applymanname2:t.applyForm.applymanname2,applymanorg2:t.applyForm.applymanorg2,applypost2:t.applyForm.applypost2,idnumber2:t.applyForm.idnumber2,contactway2:t.applyForm.contactway2,politic2:t.applyForm.politic2,isexistreference:t.applyForm.isexistreference,readingtime:t.applyForm.readingtime,applytype:t.applyForm.applytype,readingstarttime:t.applyForm.readingstarttime,readingendtime:t.applyForm.readingendtime,rstype:t.applyForm.rstype,purpose:t.applyForm.purpose,describe:t.applyForm.describe,a0100:t.fileID,name:t.fileName};t.$axios({loading:{isShow:!0,text:"查借阅申请处理耗时可能较长,请耐心等候..."},method:"post",url:t.API.borrowAndReadApply,data:a}).then(function(e){var a=e.data;"1"==a.code?(t.$message({type:"success",message:"申请成功!"}),t.searchCode=a.data,t.isFinish=!0):t.$message({type:"error",message:"申请失败，请返回重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})})},concatParams:function(){var e="",t="";this.chioceFileData.forEach(function(a,i,n){i==n.length-1?(e+=a.a0100,t+=a.a0101):(e+=a.a0100+",",t+=a.a0101+",")}),this.fileID=e,this.fileName=t},prevStep:function(){this.$emit("changeStep",2)},goBack:function(){this.$emit("changeStep",4),this.$router.push({path:"applyMain"})}}},C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"outsiderApply",style:{height:e.outsiderApplyHeight}},[i("el-row",{directives:[{name:"show",rawName:"v-show",value:0==e.isFinish,expression:"isFinish==false"}],staticClass:"rowHeader"},[i("el-col",{attrs:{span:11,align:"left"}},[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-arrow-left"},on:{click:e.prevStep}},[e._v("上一步")])],1),e._v(" "),i("el-col",{attrs:{span:11,align:"right"}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.addApply("applyForm")}}},[e._v("提交申请\n\t\t\t\t\t"),i("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1),e._v(" "),i("el-form",{directives:[{name:"show",rawName:"v-show",value:0==e.isFinish,expression:"isFinish==false"}],ref:"applyForm",staticClass:"demo-ruleForm",attrs:{model:e.applyForm,rules:e.rules,"label-width":"172px",size:"small"}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{staticClass:"areaTitle",attrs:{span:24}},[i("strong",[e._v("查档人员信息")]),e._v(" "),i("span",[e._v("（ * 为必填项，其它为选填项）")])]),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"姓名",prop:"applymanname"}},[i("el-input",{attrs:{placeholder:"请输入查档人1姓名"},model:{value:e.applyForm.applymanname,callback:function(t){e.$set(e.applyForm,"applymanname",t)},expression:"applyForm.applymanname"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"姓名",prop:"applymanname2"}},[i("el-input",{attrs:{placeholder:"请输入查档人2姓名"},model:{value:e.applyForm.applymanname2,callback:function(t){e.$set(e.applyForm,"applymanname2",t)},expression:"applyForm.applymanname2"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"单位",prop:"applymanorg"}},[i("el-input",{attrs:{placeholder:"请输入查档人1单位"},model:{value:e.applyForm.applymanorg,callback:function(t){e.$set(e.applyForm,"applymanorg",t)},expression:"applyForm.applymanorg"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"单位",prop:"applymanorg2"}},[i("el-input",{attrs:{placeholder:"请输入查档人2单位"},model:{value:e.applyForm.applymanorg2,callback:function(t){e.$set(e.applyForm,"applymanorg2",t)},expression:"applyForm.applymanorg2"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"职务",prop:"applypost"}},[i("el-input",{attrs:{placeholder:"请输入查档人1职务"},model:{value:e.applyForm.applypost,callback:function(t){e.$set(e.applyForm,"applypost",t)},expression:"applyForm.applypost"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"职务",prop:"applypost2"}},[i("el-input",{attrs:{placeholder:"请输入查档人2职务"},model:{value:e.applyForm.applypost2,callback:function(t){e.$set(e.applyForm,"applypost2",t)},expression:"applyForm.applypost2"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"政治面貌",prop:"politic"}},[i("el-input",{attrs:{placeholder:"请输入查档人1政治面貌"},model:{value:e.applyForm.politic,callback:function(t){e.$set(e.applyForm,"politic",t)},expression:"applyForm.politic"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"政治面貌",prop:"politic2"}},[i("el-input",{attrs:{placeholder:"请输入查档人2政治面貌"},model:{value:e.applyForm.politic2,callback:function(t){e.$set(e.applyForm,"politic2",t)},expression:"applyForm.politic2"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"证件号码",prop:"idnumber"}},[i("el-input",{attrs:{placeholder:"请输入查档人1证件号码",maxlength:"18"},model:{value:e.applyForm.idnumber,callback:function(t){e.$set(e.applyForm,"idnumber",t)},expression:"applyForm.idnumber"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"证件号码",prop:"idnumber2"}},[i("el-input",{attrs:{placeholder:"请输入查档人2证件号码",maxlength:"18"},model:{value:e.applyForm.idnumber2,callback:function(t){e.$set(e.applyForm,"idnumber2",t)},expression:"applyForm.idnumber2"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"联系方式",prop:"contactway"}},[i("el-input",{attrs:{placeholder:"请输入查档人1手机号"},model:{value:e.applyForm.contactway,callback:function(t){e.$set(e.applyForm,"contactway",t)},expression:"applyForm.contactway"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"联系方式",prop:"contactway2"}},[i("el-input",{attrs:{placeholder:"请输入查档人2手机号"},model:{value:e.applyForm.contactway2,callback:function(t){e.$set(e.applyForm,"contactway2",t)},expression:"applyForm.contactway2"}})],1)],1),e._v(" "),i("el-col",{staticClass:"areaTitle",attrs:{span:24}},[i("strong",[e._v("申请信息")]),e._v(" "),i("span",[e._v("（ * 为必填项，其它为选填项）")])]),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"有无介绍信",prop:"isexistreference"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:e.applyForm.isexistreference,callback:function(t){e.$set(e.applyForm,"isexistreference",t)},expression:"applyForm.isexistreference"}},[i("el-radio",{attrs:{label:!0}},[e._v("有介绍信")]),e._v(" "),i("el-radio",{attrs:{label:!1}},[e._v("无介绍信")])],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"查阅理由",prop:"purpose"}},[i("ReadReasonsSelect",{attrs:{chioceOptionId:e.applyForm.purpose},on:{ReadReasonsCall:e.ReadReasonsCall}})],1)],1),e._v(" "),e.show?i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"查阅起止时间",prop:"readingDate"}},[i("el-date-picker",{staticClass:"autoForm",attrs:{type:"daterange","range-separator":"至","start-placeholder":"查借阅开始日期","end-placeholder":"查借阅结束日期"},on:{change:e.getDate,blur:e.getDate},model:{value:e.applyForm.readingDate,callback:function(t){e.$set(e.applyForm,"readingDate",t)},expression:"applyForm.readingDate"}})],1)],1):e._e(),e._v(" "),e.show?i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"查档时限(分钟)",prop:"readingtime"}},[i("el-slider",{attrs:{min:480,max:e.maxReadingTime,"show-input":""},model:{value:e.applyForm.readingtime,callback:function(t){e.$set(e.applyForm,"readingtime",t)},expression:"applyForm.readingtime"}})],1)],1):e._e(),e._v(" "),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"详细描述",prop:"describe"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:5},maxlength:"200",placeholder:"请输入详细描述(0-200个字符)"},model:{value:e.applyForm.describe,callback:function(t){e.$set(e.applyForm,"describe",t)},expression:"applyForm.describe"}})],1)],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.isFinish,expression:"isFinish==true"}],staticClass:"intelligentRobot"},[i("div",{staticClass:"messageMain"},[i("div",{staticClass:"messageContent"},[i("img",{staticClass:"robot",attrs:{src:a("WppX"),alt:"机器人"}}),e._v(" "),i("p",[e._v("本次申请的查询码为："),i("span",[e._v(e._s(e.searchCode))])]),e._v(" "),e._m(0)]),e._v(" "),i("div",{staticClass:"btnArea"},[i("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.goBack}},[e._v("返回首页")])],1)])])],1)};C._withStripped=!0;var D={render:C,staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[this._v("注：本查询码作为查阅重要依据，请记录完成后"),t("br"),this._v('点击"返回首页"按钮退出该界面!')])}]},T=D;var I=!1;var $=a("VU/8")(A,T,!1,function(e){I||a("8T7z")},"data-v-40a05969",null);$.options.__file="src/views/archivalBorrowing/outsider/OutsiderApply.vue";var k={name:"OutsiderBorrowApply",components:{SelectPersonnelFiles:u,EditPersonnelFiles:w,OutsiderApply:$.exports},data:function(){return{mainHeight:"",activeStep:0,selectFiles:[],editFiles:[],processStatus:"process",finishStatus:"finish"}},created:function(){},mounted:function(){this.mainHeight=window.innerHeight-this.$refs.elMain.$el.offsetTop},computed:{},methods:{changeStep:function(e,t){if(!(e<0||e>4))switch(this.activeStep=e,e){case 0:this.selectFiles=[],this.editFiles=[];break;case 1:case 2:this.editFiles=[],t&&(this.selectFiles=[].concat(n()(t)));break;case 3:t&&(this.editFiles=[].concat(n()(t)));break;case 4:break;default:this.selectFiles=[],this.editFiles=[]}}}},P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outsiderBorrowApply"},[a("div",{staticClass:"container"},[a("el-header",[a("el-steps",{attrs:{active:e.activeStep,"process-status":e.processStatus,"finish-status":e.finishStatus,"align-center":""}},[a("el-step",{attrs:{title:"选择档案人员"}}),e._v(" "),a("el-step",{attrs:{title:"确认档案人员"}}),e._v(" "),a("el-step",{attrs:{title:"填写申请表"}}),e._v(" "),a("el-step",{attrs:{title:"记录查询码"}})],1)],1),e._v(" "),a("el-main",{ref:"elMain",style:{height:e.mainHeight+"px"}},[a("SelectPersonnelFiles",{directives:[{name:"show",rawName:"v-show",value:e.activeStep<=1,expression:"activeStep<=1"}],attrs:{mainHeight:e.mainHeight,isAreaQuery:!1},on:{changeStep:e.changeStep}}),e._v(" "),a("EditPersonnelFiles",{directives:[{name:"show",rawName:"v-show",value:2==e.activeStep,expression:"activeStep==2"}],attrs:{mainHeight:e.mainHeight,defaultTables:e.selectFiles},on:{changeStep:e.changeStep}}),e._v(" "),a("OutsiderApply",{directives:[{name:"show",rawName:"v-show",value:3==e.activeStep,expression:"activeStep==3"}],attrs:{mainHeight:e.mainHeight,defaultTables:e.editFiles},on:{changeStep:e.changeStep}})],1)],1)])};P._withStripped=!0;var R={render:P,staticRenderFns:[]},O=R;var j=!1;var H=a("VU/8")(k,O,!1,function(e){j||a("B5u3")},"data-v-a792c698",null);H.options.__file="src/views/archivalBorrowing/outsider/OutsiderBorrowApply.vue";t.default=H.exports},rZtw:function(e,t,a){var i=a("BdrB");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("8fe3e962",i,!1,{})},xlfD:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.selectPersonnelFiles[data-v-0a1b7c1b] {\n  width: 100%;\n}\n.selectPersonnelFiles .el-row[data-v-0a1b7c1b] {\n    margin-left: 0;\n    margin-right: 0;\n    padding: 32px 32px 0 20px;\n}\n",""])}});