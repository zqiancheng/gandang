webpackJsonp([18],{"/l4p":function(e,t,a){var n=a("7W/U");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("6c9a118c",n,!1,{})},"3Ls5":function(e,t,a){var n=a("gkiD");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("1308d9f0",n,!1,{})},"52DQ":function(e,t,a){var n=a("ERZ4");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("5a9a415e",n,!1,{})},"7W/U":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.addOrEditPage .dialog-footer[data-v-383d2cae] {\n  margin-top: 15px;\n  text-align: center;\n}\n.addOrEditPage .el-select[data-v-383d2cae] {\n  width: 100%;\n}\n",""])},DSKs:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.moduleType .el-select[data-v-7a4b4a14] {\n  width: 100%;\n}\n",""])},ERZ4:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.menuManagement[data-v-440fcd3e] .el-table__expand-icon {\n  margin-right: 10px;\n  float: left;\n}\n.table[data-v-440fcd3e] .el-table__body-wrapper {\n  overflow-y: auto;\n}\n.menuManagement[data-v-440fcd3e] .el-dialog__body {\n  padding: 10px !important;\n}\n.menuManagement[data-v-440fcd3e] {\n  width: 100%;\n  min-width: 1126px;\n}\n.menuManagement .container[data-v-440fcd3e] {\n    padding: 10px !important;\n    border-left: none;\n    border-right: none;\n}\n.menuManagement .container .el-form[data-v-440fcd3e] {\n      padding: 0 20px;\n}\n.menuManagement .container .el-form .el-form-item--mini.el-form-item[data-v-440fcd3e],\n      .menuManagement .container .el-form .el-form-item--small.el-form-item[data-v-440fcd3e] {\n        margin-bottom: 14px;\n}\n",""])},IKUA:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.el-scrollbar .el-scrollbar__view .el-select-dropdown__item[data-v-510f700c] {\n  height: auto;\n  padding: 0;\n}\n.el-select-dropdown__item.selected[data-v-510f700c] {\n  font-weight: normal;\n}\nul li > .el-tree .el-tree-node__content[data-v-510f700c] {\n  height: auto;\n}\n.el-tree-node__label[data-v-510f700c] {\n  font-weight: normal;\n}\n.el-tree > .is-current .el-tree-node__label[data-v-510f700c] {\n  color: #409EFF;\n  font-weight: 700;\n}\n.el-tree > .is-current .el-tree-node__children .el-tree-node__label[data-v-510f700c] {\n  color: #606266;\n  font-weight: normal;\n}\n",""])},PB7I:function(e,t,a){var n=a("wsTg");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("6488fc14",n,!1,{})},PSdj:function(e,t,a){var n=a("IKUA");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("9afcf0e2",n,!1,{})},gkiD:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\nel-dialog .del-dialog-cnt[data-v-7592a1b0] {\n  font-size: 16px;\n  text-align: center;\n}\n.pageInMenuList[data-v-7592a1b0] {\n  width: 100%;\n  font-size: 14px;\n}\n.pageInMenuList .el-row[data-v-7592a1b0] {\n    margin-bottom: 15px;\n}\n.gray[data-v-7592a1b0] {\n  color: #dcdfe6;\n}\n.red[data-v-7592a1b0] {\n  color: #ff0000;\n}\n",""])},kOMT:function(e,t,a){var n=a("DSKs");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("51797e79",n,!1,{})},lMIR:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.menuSort[data-v-4b136dbc] {\n  width: 100%;\n}\n.menuSort .title[data-v-4b136dbc] {\n    padding: 0 20px 20px;\n}\n",""])},"u7/z":function(e,t,a){var n=a("lMIR");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("f974d204",n,!1,{})},wsTg:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.addOrEditMenu[data-v-3df41104] {\n  margin: 0 10px;\n}\n.addOrEditMenu .dialog-footer[data-v-3df41104] {\n    margin-top: 15px;\n    padding: 10px;\n    text-align: center;\n}\n.addOrEditMenu .el-select[data-v-3df41104] {\n    width: 100%;\n}\n.addOrEditMenu[data-v-3df41104] .el-form-item__label {\n    text-align: left !important;\n}\n",""])},yyGG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),i=a.n(n),s=(a("g7ZD"),{name:"ModuleType",props:["chioceOptionId"],data:function(){return{dataList:[],chioceId:""}},computed:{},created:function(){this.getData()},methods:{changeChioceId:function(e){this.chioceId=e;var t=this.findObjById(e);this.$emit("ModuleTypeCall",t)},findObjById:function(e){for(var t={},a=0;a<this.dataList.length;a++)if(e==this.dataList[a].id){t=this.dataList[a];break}return t},getData:function(){var e=this;this.$axios({loading:{isShow:!1},method:"get",url:this.API.getDataList,params:{id:this.API.constObj.moduleTypeId}}).then(function(t){var a=t.data;if("1"==a.code){e.dataList=a.data,e.chioceOptionId?e.chioceId=e.chioceOptionId:e.chioceId=e.dataList[0].id;var n=e.findObjById(e.chioceId);e.$emit("ModuleTypeCall",n)}else e.$message({type:"error",message:"获取模块分类下拉框数据失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})}}}),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"moduleType"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.changeChioceId},model:{value:e.chioceId,callback:function(t){e.chioceId=t},expression:"chioceId"}},e._l(e.dataList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)};r._withStripped=!0;var l={render:r,staticRenderFns:[]},o=l;var d=!1;var c=a("VU/8")(s,o,!1,function(e){d||a("kOMT")},"data-v-7a4b4a14",null);c.options.__file="src/components/ModuleType.vue";var u=c.exports,m={name:"AllMenuTreeSelect",props:["defaultOptions","isFilter"],data:function(){return{selectedOptions:[],treeProps:{value:"id",label:"name",children:"children"},oldTreeList:[],treeList:[]}},created:function(){this.getData()},mounted:function(){},methods:{handleChange:function(e){var t="";e&&e.length>0&&(t=e[e.length-1]);var a=this.findObjById(t);this.$emit("AllMenuTreeSelectCall",a)},findObjById:function(e){for(var t={},a=0;a<this.oldTreeList.length;a++)if(e==this.oldTreeList[a].id){t=this.oldTreeList[a];break}return t},getData:function(){var e=this,t=this;this.$axios({loading:{isShow:!1},method:"get",url:this.API.menuTreeList}).then(function(a){var n=a.data;if("1"==n.code){var i={childKey:"id",fatherKey:"parentid"};if(t.oldTreeList=n.data,t.isFilter&&(t.oldTreeList=t.filterMenu(t.oldTreeList)),t.treeList=t.commonFun.toTreeDataNormal(n.data,i),t.defaultOptions){var s=t.commonFun.findTreeNodeById(t.oldTreeList,t.defaultOptions,i);t.selectedOptions=t.commonFun.createArrIdAndReverse(s,"id")}else""==t.defaultOptions?t.selectedOptions=[]:t.selectedOptions.push(t.treeList[0].id);var r=t.selectedOptions[t.selectedOptions.length-1],l=e.findObjById(r);e.$emit("AllMenuTreeSelectCall",l)}else t.$message({type:"error",message:"获取菜单树形下拉框数据失败，请刷新重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})},filterMenu:function(e){var t=this,a=e;return a.forEach(function(e,a){e.type==t.API.constObj.moduleTypeList[1].id&&(e.disabled=!0)}),a}}},p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"allMenuTreeSelect"},[a("el-cascader",{attrs:{placeholder:"请选择","expand-trigger":"hover",options:e.treeList,"change-on-select":!0,props:e.treeProps,clearable:!0,"show-all-levels":!1},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1)};p._withStripped=!0;var h={render:p,staticRenderFns:[]},g=h;var f=!1;var b=a("VU/8")(m,g,!1,function(e){f||a("PSdj")},"data-v-510f700c",null);b.options.__file="src/components/AllMenuTreeSelect.vue";var v={name:"AddOrEditMenu",components:{AllMenuTreeSelect:b.exports,ModuleType:u},props:["menuObject","isEdit"],data:function(){return{menuForm:{id:"",name:"",path:"",code:"",style:"",type:"",parentid:"",istrilateral:!1,isshow:!0,isenable:!0,issuperuser:!1},defaultMenuTree:[],isTrilateral:[{value:!0,label:"是"},{value:!1,label:"否"}],isShow:[{value:!0,label:"是"},{value:!1,label:"否"}],isEnable:[{value:!0,label:"是"},{value:!1,label:"否"}],isSuperMenu:[{value:!0,label:"是"},{value:!1,label:"否"}],pageType:"add",rules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:3,max:12,message:"长度在 3 到 12 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入菜单编码",trigger:"blur"},{min:3,max:36,message:"长度在3到 36 个字符",trigger:"blur"}],style:[{required:!0,message:"请输入菜单图标",trigger:"blur"},{min:3,max:100,message:"长度在3到 100 个字符",trigger:"blur"}],path:[{required:!0,message:"请输入访问地址",trigger:"blur"},{min:1,max:100,message:"长度在1到 100 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择菜单分类",trigger:"blur"}],istrilateral:[{required:!0,message:"请选择是否三员",trigger:"blur"}],isenable:[{required:!0,message:"请选择是否启用",trigger:"blur"}],issuperuser:[{required:!0,message:"请选择是否超级菜单",trigger:"blur"}],isshow:[{required:!0,message:"请选择是否显示",trigger:"blur"}]}}},created:function(){this.isEdit?(this.pageType="edit",this.setFormData()):this.pageType="add"},mounted:function(){},computed:{},methods:{ModuleTypeCall:function(e){e.id&&e.id.length>0?(this.menuForm.type=e.id,this.rules.path[0].required=!0,e.id==this.API.constObj.moduleTypeList[0].id&&(this.rules.path[0].required=!1)):this.menuForm.type=""},AllMenuTreeSelectCall:function(e){e&&e.id?this.menuForm.parentid=e.id:this.menuForm.parentid=""},setFormData:function(){this.menuForm.id=this.menuObject.id,this.menuForm.name=this.menuObject.name,this.menuForm.path=this.menuObject.path,this.menuForm.code=this.menuObject.code,this.menuForm.type=this.menuObject.type,this.menuForm.style=this.menuObject.style,this.menuForm.parentid=this.menuObject.parentid,this.menuForm.istrilateral=this.menuObject.istrilateral,this.menuForm.isshow=this.menuObject.isshow,this.menuForm.isenable=this.menuObject.isenable,this.menuForm.issuperuser=this.menuObject.issuperuser,this.defaultMenuTree.push(this.menuObject.parentid)},addOrEditMenu:function(e){var t="修改",a=this;"add"==a.pageType&&(t="添加",delete a.menuForm.id),this.$refs[e].validate(function(e){if(!e)return!1;a.$axios({method:"post",url:a.API.saveOrUpdateMenu,data:a.menuForm}).then(function(e){var n=e.data;"1"==n.code?(a.$message({type:"success",message:t+"菜单成功!"}),a.resetForm(),a.$emit("AddOrEditMenuCallBack",!0)):"4"==n.code?a.$message({type:"error",message:"菜单名称或菜单编码已存在，请修改！"}):a.$message({type:"error",message:t+"菜单失败，请退出重试！"})}).catch(function(e){a.$message({type:"error",message:"请求异常，请检查网络！"})})})},cancelOperation:function(){this.resetForm(),this.$emit("AddOrEditMenuCallBack",!1)},resetForm:function(){this.pageType="add",this.$refs.menuForm.resetFields()}}},y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addOrEditMenu"},[a("el-form",{ref:"menuForm",staticClass:"demo-ruleForm",attrs:{model:e.menuForm,rules:e.rules,"label-width":"110px",size:"small"}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入菜单名称(3~12个字符)",minLength:"3",maxLength:"12"},model:{value:e.menuForm.name,callback:function(t){e.$set(e.menuForm,"name",t)},expression:"menuForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"菜单编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入菜单编码(3~36个字符)",minLength:"3",maxLength:"36"},model:{value:e.menuForm.code,callback:function(t){e.$set(e.menuForm,"code",t)},expression:"menuForm.code"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"菜单图标",prop:"style"}},[a("el-input",{attrs:{placeholder:"请输入菜单图标名(3~100个字符)",minLength:"3",maxLength:"100"},model:{value:e.menuForm.style,callback:function(t){e.$set(e.menuForm,"style",t)},expression:"menuForm.style"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上级菜单",prop:"parentid"}},[a("AllMenuTreeSelect",{attrs:{isFilter:!0,defaultOptions:e.defaultMenuTree},on:{AllMenuTreeSelectCall:e.AllMenuTreeSelectCall}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"菜单分类",prop:"type"}},[a("ModuleType",{attrs:{chioceOptionId:e.menuForm.type},on:{ModuleTypeCall:e.ModuleTypeCall}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否启用",prop:"isenable"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.menuForm.isenable,callback:function(t){e.$set(e.menuForm,"isenable",t)},expression:"menuForm.isenable"}},e._l(e.isEnable,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否超级菜单",prop:"issuperuser"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.menuForm.issuperuser,callback:function(t){e.$set(e.menuForm,"issuperuser",t)},expression:"menuForm.issuperuser"}},e._l(e.isSuperMenu,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否三员",prop:"istrilateral"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.menuForm.istrilateral,callback:function(t){e.$set(e.menuForm,"istrilateral",t)},expression:"menuForm.istrilateral"}},e._l(e.isTrilateral,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否显示",prop:"isshow"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.menuForm.isshow,callback:function(t){e.$set(e.menuForm,"isshow",t)},expression:"menuForm.isshow"}},e._l(e.isShow,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"访问地址",prop:"path"}},[a("el-input",{attrs:{placeholder:"请输入访问地址(不超过100个字符)",minLength:"1",maxLength:"100"},model:{value:e.menuForm.path,callback:function(t){e.$set(e.menuForm,"path",t)},expression:"menuForm.path"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["add"==e.pageType?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addOrEditMenu("menuForm")}}},[e._v("添加")]):"edit"==e.pageType?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addOrEditMenu("menuForm")}}},[e._v("保存")]):e._e(),e._v(" "),a("el-button",{on:{click:e.cancelOperation}},[e._v("取 消")])],1)],1)};y._withStripped=!0;var _={render:y,staticRenderFns:[]},x=_;var O=!1;var w=a("VU/8")(v,x,!1,function(e){O||a("PB7I")},"data-v-3df41104",null);w.options.__file="src/views/infoCenterManagement/AddOrEditMenu.vue";var F=w.exports,M=(a("mvHQ"),a("cMGX")),$={name:"AddOrEditPage",components:{},props:["menuObj"],data:function(){return{pageForm:{id:"",menuid:"",name:"",code:"",path:""},pageType:"add",rules:{name:[{required:!0,message:"请输入页面名称",trigger:"blur"},{min:2,max:12,message:"机构名称必须是2-12 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入编码",trigger:"blur"},{min:2,max:12,message:"编码必须是2-12 个字符",trigger:"blur"}],path:[{required:!0,message:"路径",trigger:"blur"},{min:2,max:100,message:"路径必须是2-100 个字符",trigger:"blur"}]}}},created:function(){this.menuObj.id?(this.pageType="edit",this.setFormData()):this.pageType="add",this.pageForm.menuid=this.menuObj.menuId},mounted:function(){},computed:{},methods:{setFormData:function(){this.pageForm.id=this.menuObj.id,this.pageForm.name=this.menuObj.name,this.pageForm.code=this.menuObj.code,this.pageForm.path=this.menuObj.path},addOrEditPage:function(e){var t="修改",a=this;"add"==a.pageType&&(t="添加",delete a.pageForm.id),this.$refs[e].validate(function(e){if(!e)return!1;a.$axios({method:"post",url:a.API.saveMenuChilds,data:a.pageForm}).then(function(e){var n=e.data;"1"==n.code?(a.$message({type:"success",message:t+"菜单子页面成功!"}),a.resetForm(),a.$emit("AddOrEditPageCallBack",!0)):"7"==n.code?a.$message({type:"error",message:"页面名称或编码重复，请修改！"}):a.$message({type:"error",message:t+"菜单子页面失败，请退出重试！"})}).catch(function(e){a.$message({type:"error",message:"请求异常，请检查网络！"})})})},cancelOpt:function(){this.resetForm(),this.$emit("AddOrEditPageCallBack",!1)},resetForm:function(){this.pageType="add",this.$refs.pageForm.resetFields()}}},T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addOrEditPage"},[a("el-form",{ref:"pageForm",staticClass:"demo-ruleForm",attrs:{model:e.pageForm,rules:e.rules,"label-width":"100px",size:"small"}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"页面名称",prop:"name"}},[a("el-input",{attrs:{minLength:"2",maxLength:"12",placeholder:"请输入页面名称(2~12字符)"},model:{value:e.pageForm.name,callback:function(t){e.$set(e.pageForm,"name",t)},expression:"pageForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"编码",prop:"code"}},[a("el-input",{attrs:{minLength:"2",maxLength:"12",placeholder:"请输入编码(2~12个字符)"},model:{value:e.pageForm.code,callback:function(t){e.$set(e.pageForm,"code",t)},expression:"pageForm.code"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"路径",prop:"path"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:7},minLength:"2",maxLength:"100",placeholder:"请输入路径(2~100个字符)"},model:{value:e.pageForm.path,callback:function(t){e.$set(e.pageForm,"path",t)},expression:"pageForm.path"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["add"==e.pageType?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addOrEditPage("pageForm")}}},[e._v("添加")]):"edit"==e.pageType?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addOrEditPage("pageForm")}}},[e._v("保存")]):e._e(),e._v(" "),a("el-button",{on:{click:e.cancelOpt}},[e._v("取 消")])],1)],1)};T._withStripped=!0;var j={render:T,staticRenderFns:[]},I=j;var k=!1;var C=a("VU/8")($,I,!1,function(e){k||a("/l4p")},"data-v-383d2cae",null);C.options.__file="src/views/infoCenterManagement/AddOrEditPage.vue";var S=C.exports,D={name:"PageInMenuList",props:["menuObject"],components:{Pagination:M.a,AddOrEditPage:S},data:function(){return{tableData:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},chioceMenuId:"",menuObject:{},pageVisible:!1,dialogTitle:"添加子页面"}},created:function(){this.chioceMenuId=this.menuObject.id,this.getData()},mounted:function(){},computed:{},methods:{handleCurrentChange:function(e){this.pageObj.pageIndex=e,this.getData()},PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getData()},AddOrEditPageCallBack:function(e){this.pageVisible=!1,e&&this.getData()},getData:function(){var e=this;this.$axios({method:"get",url:this.API.menuChildsPage,params:{menuid:this.chioceMenuId,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;"1"==a.code?(e.tableData=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"查询失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},addPage:function(){this.menuObject={},this.menuObject.menuId=this.chioceMenuId,this.dialogTitle="添加子页面",this.pageVisible=!0},handleEdit:function(e,t){this.menuObject=this.tableData[e],this.menuObject.menuId=this.chioceMenuId,this.dialogTitle="编辑子页面",this.pageVisible=!0},handleDelete:function(e,t){var a=this.tableData[e],n=this;this.$confirm("确定要删除该子页面吗?","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.delPage(a.id,n)}).catch(function(){})},delPage:function(e,t){t.$axios({method:"get",url:t.API.deleteMenuChilds,params:{id:e}}).then(function(e){"1"==e.data.code?(t.$message({type:"success",message:"子页面菜单删除成功!"}),t.getData()):t.$message({type:"error",message:"子页面删除失败，请刷新重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})}}},E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pageInMenuList"},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.addPage}},[e._v("添加")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"",height:"300"}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1)+" ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"页面名",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"编号",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"path",label:"路径","min-width":"200",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("Pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1)],1)],1),e._v(" "),e.pageVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:e.dialogTitle,visible:e.pageVisible,width:"30%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.pageVisible=t}}},[a("AddOrEditPage",{attrs:{menuObj:e.menuObject},on:{AddOrEditPageCallBack:e.AddOrEditPageCallBack}})],1):e._e()],1)};E._withStripped=!0;var L={render:E,staticRenderFns:[]},P=L;var A=!1;var B=a("VU/8")(D,P,!1,function(e){A||a("3Ls5")},"data-v-7592a1b0",null);B.options.__file="src/views/infoCenterManagement/PageInMenuList.vue";var V=B.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menuSort"},[a("div",{staticClass:"title"},[a("el-button",{attrs:{type:"primary"},on:{click:e.initSort}},[e._v("初始化排序")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.upData}},[e._v("上移")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.downData}},[e._v("下移")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveData}},[e._v("保存")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.data,height:"400","highlight-current-row":"","row-class-name":e.tableRowClassName},on:{"current-change":e.currentChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"菜单名称",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"类型",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"编码",align:"left"}})],1)],1)};R._withStripped=!0;var z={render:R,staticRenderFns:[]},q=z;var U=!1;var N=a("VU/8")({name:"MenuSort",props:["pid"],data:function(){return{data:[],currentRow:"",index:""}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".table"},method:"post",url:this.API.menuTreeListByPid,data:{pid:this.pid}}).then(function(t){var a=t.data;"1"===a.code?e.data=a.data:e.$message({type:"error",message:"获取管档单位列表失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.index=a},currentChange:function(e){this.currentRow=e,this.index=e.index},upData:function(){if(""!==this.currentRow)if(this.index>0){var e=this.data[this.index-1];this.data.splice(this.index-1,1),this.data.splice(this.index,0,e),this.index=this.index-1}else this.$message("已经是第一条，不可上移");else this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},downData:function(){if(""!==this.currentRow)if(this.index+1===this.data.length)this.$message("已经是最后一条，不可下移");else{var e=this.data[this.index+1];this.data.splice(this.index+1,1),this.data.splice(this.index,0,e),this.index=this.index+1}else this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},saveData:function(){var e=this,t=[];this.data.forEach(function(e){t.push(e.id)}),this.$axios({loading:{isShow:!0,target:".table"},method:"post",url:this.API.sortSaveMenu,data:{ids:t.join(",")}}).then(function(t){"1"===t.data.code?(e.$message({type:"success",message:"排序成功！"}),e.$emit("sortDetCallBack",!0)):e.$message({type:"error",message:"排序失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},initSort:function(){var e=this;this.$confirm("您确认初始化排序吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.initSortSubmit()}).catch(function(){e.$message({type:"info",message:"已取消"})})},initSortSubmit:function(){var e=this;this.$axios({loading:{isShow:!0,target:".table"},method:"post",url:this.API.initSortMenu,data:{pid:this.pid}}).then(function(t){"1"===t.data.code?(e.$message({type:"success",message:"初始化排序成功！"}),e.$emit("sortDetCallBack",!0)):e.$message({type:"error",message:"初始化排序失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})}}},q,!1,function(e){U||a("u7/z")},"data-v-4b136dbc",null);N.options.__file="src/views/infoCenterManagement/MenuSort.vue";var Z={name:"MenuManagement",props:["chioceFile"],components:{AddOrEditMenu:F,PageInMenuList:V,MenuSort:N.exports},data:function(){return{bSetTableHeight:!1,menuObject:"",menuVisible:!1,pageInMenuListVisible:!1,dialogTitle:"添加菜单",oldData:[],tableHeight:0,data:[],isEdit:!0,sortShow:!1}},created:function(){this.getData()},mounted:function(){},watch:{bSetTableHeight:{handler:function(e){this.tableHeight=window.innerHeight-this.$refs.multipleTable.$el.offsetTop-70-20}}},computed:{propList:function(){return i()(this.props).map(function(e){return{name:e}})}},updated:function(){},methods:{expandAll:function(){for(var e=document.getElementsByClassName("el-table__expand-icon"),t=0;t<e.length;t++)e[t].click()},showAddOrEditMenu:function(){this.isEdit=!1,this.dialogTitle="添加菜单",this.menuVisible=!0},currentChange:function(e){this.menuObject=e},handleEdit:function(e){this.menuObject=e,this.isEdit=!0,this.dialogTitle="编辑菜单信息",this.menuVisible=!0},AddOrEditMenuCallBack:function(e){this.menuVisible=!1,e&&this.getData()},handleDelete:function(e){var t=this;this.$confirm("确定删除该菜单吗?","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.children&&e.children.length>0?t.$message({type:"warning",message:"该项下存在页面不能删除!"}):t.requestDel(e.id)}).catch(function(){})},handleAllPage:function(e){this.menuObject=e,this.pageInMenuListVisible=!0},requestDel:function(e){var t=this;this.$axios({method:"get",url:this.API.deleteMenu,params:{id:e}}).then(function(e){"1"==e.data.code?(t.$message({type:"success",message:"删除菜单成功"}),t.getData()):t.$message({type:"error",message:"删除菜单成功失败，请刷新重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})},getData:function(){var e=this,t=this;this.$axios({method:"get",url:this.API.menuTreeList}).then(function(a){e.bSetTableHeight=!0;var n=a.data;"1"==n.code?(t.oldData=n.data,t.data=t.commonFun.toTreeData3(n.data)):t.$message({type:"error",message:"获取菜单列表失败，请刷新重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})},authorize:function(){if(null===this.menuObject||""===this.menuObject){if(this.data.length<2)return void this.$message("少于两条数据，不需要排序")}else if(void 0===this.menuObject.children||this.menuObject.children.length<2)return void this.$message("少于两条数据，不需要排序");this.sortShow=!0},sortDetCallBack:function(e){e&&(this.sortShow=!1,this.getData())}}},H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menuManagement"},[a("div",{staticClass:"container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.showAddOrEditMenu}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.authorize()}}},[e._v("排序")])],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.data,height:e.tableHeight,"row-key":"id","default-expand-all":"","highlight-current-row":""},on:{"current-change":e.currentChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"菜单名称",align:"left","min-width":"15%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"类型",align:"left","min-width":"15%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"编码",align:"left","min-width":"15%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isenable",label:"是否启用",align:"left","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[!0===t.row.isenable?a("el-tag",{attrs:{type:"success"}},[e._v("是")]):a("el-tag",{attrs:{type:"danger"}},[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"issuperuser",label:"是否超级菜单",align:"left","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[!0===t.row.issuperuser?a("el-tag",{attrs:{type:"success"}},[e._v("是")]):a("el-tag",{attrs:{type:"danger"}},[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isshow",label:"是否显示",align:"left","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[!0===t.row.isshow?a("el-tag",{attrs:{type:"success"}},[e._v("是")]):a("el-tag",{attrs:{type:"danger"}},[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"istrilateral",label:"是否三员",align:"left","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[!0===t.row.istrilateral?a("el-tag",{attrs:{type:"success"}},[e._v("是")]):a("el-tag",{attrs:{type:"danger"}},[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",icon:"el-icon-edit",circle:"",title:"编辑"},on:{click:function(a){e.handleEdit(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-close",circle:"",title:"删除"},on:{click:function(a){e.handleDelete(t.row)}}})]}}])})],1)],1),e._v(" "),e.menuVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:e.dialogTitle,visible:e.menuVisible,width:"710px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.menuVisible=t}}},[a("AddOrEditMenu",{attrs:{isEdit:e.isEdit,menuObject:e.menuObject},on:{AddOrEditMenuCallBack:e.AddOrEditMenuCallBack}})],1):e._e(),e._v(" "),e.pageInMenuListVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"子页面集合",visible:e.pageInMenuListVisible,width:"70%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.pageInMenuListVisible=t}}},[a("PageInMenuList",{attrs:{menuObject:e.menuObject}})],1):e._e(),e._v(" "),e.sortShow?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"菜单排序",width:"50%",visible:e.sortShow,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.sortShow=t}}},[a("menu-sort",{attrs:{pid:e.menuObject.id},on:{sortDetCallBack:e.sortDetCallBack}})],1):e._e()],1)};H._withStripped=!0;var K={render:H,staticRenderFns:[]},G=K;var Q=!1;var W=a("VU/8")(Z,G,!1,function(e){Q||a("52DQ")},"data-v-440fcd3e",null);W.options.__file="src/views/infoCenterManagement/MenuManagement.vue";t.default=W.exports}});