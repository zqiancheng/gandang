webpackJsonp([43],{"+S28":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.fileAuthorization[data-v-82b600fa] {\n  min-width: 1126px;\n}\n.fileAuthorization .container[data-v-82b600fa] {\n    padding: 0 !important;\n    border-left: none;\n    border-right: none;\n}\n.fileAuthorization .container .el-main[data-v-82b600fa] {\n      padding: 0;\n}\n.fileAuthorization[data-v-82b600fa] .el-tabs__nav-wrap::after {\n    height: 1px;\n}\n",""])},"81aU":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.applyStatusSelect .el-select[data-v-cf7f0fc8] {\n  width: 100%;\n}\n",""])},G8ea:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("cMGX"),o=a("FtYe"),n=a("KmTd"),s=a("hPY1"),l=a("PODl"),r={name:"AuthorizationList",props:["tableType","mainHeight"],components:{Pagination:i.a,ApplyStatusSelect:s.a,ReadReasonsSelect:l.a,PersonnelsAuthorization:o.a,ApplyFileDetail:n.a},data:function(){return{imageFileUrl:"",dialogApproveShowVisible:!1,tableHeight:"",authorizationType:this.tableType,tableData:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},editBook:{},multipleSelection:[],detailVisible:!1,authorizationVisible:!1,dialogTitle:"查借申请",searchForm:{userName:"",startDate:"",endDate:"",applyStatus:"",purpose:"",describe:""}}},created:function(){this.getData()},mounted:function(){this.tableHeight=this.mainHeight-75-1*this.$refs.multipleTable.$el.offsetHeight-40},computed:{},watch:{mainHeight:function(t,e){this.mainHeight=t,this.tableHeight=this.mainHeight-75-1*this.$refs.multipleTable.$el.offsetHeight-40}},methods:{PageTurning:function(t){this.pageObj.pageIndex=t.page_index,this.pageObj.pageSize=t.page_size,this.getData()},AuthorizationCallBack:function(){this.authorizationVisible=!1,this.getData()},ReadReasonsCall:function(t){this.searchForm.purpose=t},ApplyStatusCall:function(t){this.searchForm.applyStatus=t},getData:function(){var t=this;this.$axios({loading:{isShow:!0,target:".authorizationList"},method:"post",url:this.API.recordAccredit,data:{stype:this.authorizationType,userName:this.searchForm.userName,status:this.searchForm.applyStatus,startDate:this.searchForm.startDate,endDate:this.searchForm.endDate,purpose:this.searchForm.purpose,describe:this.searchForm.describe,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(e){var a=e.data;"1"==a.code?(t.tableData=a.data.list,t.pageObj.total=a.data.total):"10"==a.code&&t.$message({type:"error",message:"查询失败，请刷新重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})},startDateChange:function(){var t=this.searchForm.startDate,e=this.searchForm.endDate;t&&t.length>0&&e&&e.length>0&&(new Date(t).getTime()>new Date(e).getTime()&&(this.$message({type:"error",message:"申请开始日期不能大于结束日期!"}),this.searchForm.startDate=""))},endDateChange:function(){var t=this.searchForm.startDate,e=this.searchForm.endDate;t&&t.length>0&&e&&e.length>0&&(new Date(t).getTime()>new Date(e).getTime()&&(this.$message({type:"error",message:"申请开始日期不能大于结束日期!"}),this.searchForm.endDate=""))},dateFormat:function(t,e,a,i){return this.commonFun.dateFormat(a,"yyyy-MM-dd HH:mm")},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.getData()},handleDetail:function(t,e){this.editBook=this.tableData[t],this.detailVisible=!0},handleEdit:function(t,e){this.editBook=this.tableData[t],this.authorizationVisible=!0},bookData:function(t,e){e.$axios({loading:{isShow:!0,target:".authorizationList"},method:"post",url:e.API.borrowAndReadRegister,data:{id:t}}).then(function(t){"1"==t.data.code?(e.$message({type:"success",message:"登记处理成功!"}),e.getData()):e.$message({type:"error",message:"登记处理失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},handleApproveShowClose:function(){this.dialogApproveShowVisible=!1},handleView:function(t,e){var a=this;this.$axios({loading:{isShow:!0,targrt:".picUpload"},method:"post",url:this.API.approvalShow,data:{id:e.id}}).then(function(t){var e=t.data;"1"==e.code?""!=e.img.imagefile&&void 0!=e.img.imagefile?(a.dialogApproveShowVisible=!0,a.imageFileUrl=e.img.imagefile):a.$message({type:"warning",message:"图片未上传成功!"}):a.$message({type:"error",message:"获取失败，请刷新！"})}).catch(function(t){a.$message({type:"error",message:"请求异常，请检查网络！"})})}}},c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"authorizationList"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchForm}},[a("el-form-item",[a("el-input",{staticClass:"inputWidth120",attrs:{placeholder:"输入申请人"},model:{value:t.searchForm.userName,callback:function(e){t.$set(t.searchForm,"userName",e)},expression:"searchForm.userName"}})],1),t._v(" "),a("el-form-item",[a("el-date-picker",{staticClass:"inputWidth150",attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"申请开始日期"},on:{change:t.startDateChange},model:{value:t.searchForm.startDate,callback:function(e){t.$set(t.searchForm,"startDate",e)},expression:"searchForm.startDate"}})],1),t._v(" "),a("el-form-item",[a("el-date-picker",{staticClass:"inputWidth150",attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"申请结束日期"},on:{change:t.endDateChange},model:{value:t.searchForm.endDate,callback:function(e){t.$set(t.searchForm,"endDate",e)},expression:"searchForm.endDate"}})],1),t._v(" "),a("el-form-item",[a("ReadReasonsSelect",{staticClass:"inputWidth210",on:{ReadReasonsCall:t.ReadReasonsCall}})],1),t._v(" "),a("el-form-item",[a("ApplyStatusSelect",{staticClass:"inputWidth170",on:{ApplyStatusCall:t.ApplyStatusCall}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:t.search}},[t._v("查询")])],1)],1),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,height:t.tableHeight}},[a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",icon:"el-icon-view",circle:"",title:"审批单预览"},on:{click:function(a){t.handleView(e.$index,e.row)}}}),t._v(" "),a("el-button",{attrs:{type:"success",icon:"iconfont gd-chakan",circle:"",title:"详细"},on:{click:function(a){t.handleDetail(e.$index,e.row)}}}),t._v(" "),"流程完成"===e.row.name?a("el-button",{staticClass:"gray",attrs:{type:"success",icon:"iconfont gd-danganshenpi",circle:"",title:"授权"}}):a("el-button",{attrs:{type:"success",icon:"iconfont gd-danganshenpi",circle:"",title:"授权"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.pageObj.pageIndex*t.pageObj.pageSize+e.$index+1)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"申请人",width:"80","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"cyly",label:"查借阅理由",width:"160","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"querycode",label:"查询码",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"u_createdate",label:"申请时间",sortable:"",width:"140",formatter:t.dateFormat}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"状态",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"aData",label:"申请档案集合","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"rsName",label:"档案类型","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"describe",label:"详细描述","min-width":"170","show-overflow-tooltip":""}})],1),t._v(" "),a("Pagination",{attrs:{pageIndex:t.pageObj.pageIndex,total:t.pageObj.total,pageSize:t.pageObj.pageSize},on:{PageTurning:t.PageTurning}}),t._v(" "),t.detailVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"详细",visible:t.detailVisible,width:"65%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(e){t.detailVisible=e}}},[a("ApplyFileDetail",{attrs:{chioceObj:t.editBook}})],1):t._e(),t._v(" "),t.authorizationVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"授权",visible:t.authorizationVisible,width:"900px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(e){t.authorizationVisible=e}}},[a("PersonnelsAuthorization",{attrs:{applyId:t.editBook.id,archivesType:t.editBook.rstype},on:{AuthorizationCallBack:t.AuthorizationCallBack}})],1):t._e(),t._v(" "),a("el-dialog",{staticClass:"approveShowDialog",attrs:{title:"审批单预览",visible:t.dialogApproveShowVisible,fullscreen:"","before-close":t.handleApproveShowClose,center:""},on:{"update:visible":function(e){t.dialogApproveShowVisible=e}}},[a("div",{staticClass:"approveImg"},[a("img",{attrs:{src:t.imageFileUrl,alt:""}})])])],1)};c._withStripped=!0;var d={render:c,staticRenderFns:[]},h=d;var p=!1;var u=a("VU/8")(r,h,!1,function(t){p||a("TzUI")},"data-v-64750246",null);u.options.__file="src/views/archivalBorrowing/AuthorizationList.vue";var m={name:"FileAuthorization",components:{AuthorizationList:u.exports},data:function(){return{mainHeight:"",activeName:"fileAuthorization",tabsData:[{label:"档案授权",name:"fileAuthorization",tableType:"1"},{label:"快捷授权",name:"mainHeight",tableType:"2"},{label:"重新授权",name:"againAuthorization",tableType:"3"}]}},created:function(){},mounted:function(){this.mainHeight=window.innerHeight-this.$refs.elMain.$el.offsetTop},computed:{},methods:{handleClick:function(t,e){}}},g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fileAuthorization"},[a("div",{staticClass:"container"},[a("el-main",{ref:"elMain",style:{height:t.mainHeight}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabsData,function(e,i){return a("el-tab-pane",{key:i,attrs:{label:e.label,name:e.name}},[t.activeName==e.name?a("AuthorizationList",{ref:"authorizationList",refInFor:!0,attrs:{mainHeight:t.mainHeight,tableType:e.tableType}}):t._e()],1)}),1)],1)],1)])};g._withStripped=!0;var f={render:g,staticRenderFns:[]},b=f;var v=!1;var y=a("VU/8")(m,b,!1,function(t){v||a("ZQQR")},"data-v-82b600fa",null);y.options.__file="src/views/archivalBorrowing/FileAuthorization.vue";e.default=y.exports},GJrm:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\nel-dialog .del-dialog-cnt[data-v-64750246] {\n  font-size: 16px;\n  text-align: center;\n}\n.authorizationList[data-v-64750246] {\n  width: 100%;\n  font-size: 14px;\n}\n.authorizationList .demo-form-inline[data-v-64750246] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.authorizationList .el-form[data-v-64750246] {\n    padding: 13px 10px 0;\n}\n.authorizationList .inputWidth120[data-v-64750246] {\n    width: 120px;\n}\n.authorizationList .inputWidth240[data-v-64750246] {\n    width: 240px;\n}\n.authorizationList .inputWidth210[data-v-64750246] {\n    width: 210px;\n}\n.authorizationList .inputWidth150[data-v-64750246] {\n    width: 150px;\n}\n.authorizationList .inputWidth170[data-v-64750246] {\n    width: 170px;\n}\n.authorizationList .el-form-item--mini.el-form-item[data-v-64750246],\n  .authorizationList .el-form-item--small.el-form-item[data-v-64750246] {\n    margin-bottom: 10px;\n}\n.authorizationList .gray[data-v-64750246] {\n    background-color: #dcdfe6;\n    border-color: #dcdfe6;\n    color: #909399;\n}\n[data-v-64750246] .el-dialog__body {\n  padding: 20px 0 20px !important;\n}\n.approveImg[data-v-64750246] {\n  text-align: center;\n  padding: 20px 60px;\n}\n.approveShowDialog[data-v-64750246] .el-dialog {\n  border-radius: 0;\n}\n.approveShowDialog[data-v-64750246] .el-dialog /deep/ .el-dialog__header {\n  border-radius: 0;\n}\n",""])},TzUI:function(t,e,a){var i=a("GJrm");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("105ebd58",i,!1,{})},ZQQR:function(t,e,a){var i=a("+S28");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("27147bc9",i,!1,{})},cw61:function(t,e,a){var i=a("81aU");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("c48926a0",i,!1,{})},hPY1:function(t,e,a){"use strict";a("g7ZD");var i={name:"ApplyStatusSelect",props:["chioceOptionId"],data:function(){return{dataList:[],chioceId:this.chioceOptionId}},computed:{},created:function(){this.getData()},methods:{changeChioceId:function(t){this.chioceId=t,this.$emit("ApplyStatusCall",t)},getData:function(){var t=this;this.$axios({loading:{isShow:!1},method:"get",url:this.API.getDataList,params:{id:this.API.constObj.applyStatusId}}).then(function(e){var a=e.data;"1"==a.code?(t.dataList=a.data,t.chioceOptionId&&t.chioceOptionId.length>0&&(t.chioceId=t.chioceOptionId,t.$emit("roleBenEditCall",t.chioceId))):t.$message({type:"error",message:"获取状态下拉框数据失败，请刷新重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})}}},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"applyStatusSelect"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择状态"},on:{change:t.changeChioceId},model:{value:t.chioceId,callback:function(e){t.chioceId=e},expression:"chioceId"}},t._l(t.dataList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)};o._withStripped=!0;var n={render:o,staticRenderFns:[]},s=n;var l=!1;var r=a("VU/8")(i,s,!1,function(t){l||a("cw61")},"data-v-cf7f0fc8",null);r.options.__file="src/components/ApplyStatusSelect.vue";e.a=r.exports}});