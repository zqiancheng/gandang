webpackJsonp([101],{MQqe:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("mvHQ");var n={name:"SystemLogManagement",components:{pagination:a("cMGX").a},data:function(){return{pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},systemLogList:[],status:"",uCreator:"",ip:"",data:"",startDateStr:"",endDateStr:"",options:[{value:"0",label:"异常"},{value:"1",label:"成功"}],tableHeight:"400"}},created:function(){this.findSystemLogPage()},watch:{systemLogList:{handler:function(t){this.tableHeight=window.innerHeight-this.$refs.table.$el.offsetTop-40-52-102}}},methods:{handleCurrentChange:function(t){this.pageObj.pageIndex=t,this.findSystemLogPage()},PageTurning:function(t){this.pageObj.pageIndex=t.page_index,this.pageObj.pageSize=t.page_size,this.findSystemLogPage()},findSystemLogPage:function(){var t=this;this.$axios({loading:{isShow:!0,target:".systemLog-management-container"},method:"post",url:this.API.findSystemLogPage,data:{status:this.status,ip:this.ip,startDateStr:this.startDateStr,endDateStr:this.endDateStr,uCreator:this.uCreator,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(e){var a=e.data;"1"==a.code?(t.systemLogList=a.data.list,t.pageObj.total=a.data.total):t.$message({type:"error",message:"获取数据失败，请刷新重试！"})}).catch(function(t){})},search:function(){if(null===this.data)this.startDateStr="",this.endDateStr="";else if((this.data||""!=this.data)&&this.data.length>0){var t=this.data;this.startDateStr=this.commonFun.dateFormat(t[0],"yyyyMMdd"),this.endDateStr=this.commonFun.dateFormat(t[1],"yyyyMMdd")}else this.startDateStr="",this.endDateStr="";this.pageObj.pageIndex=this.API.constObj.pageIndex,this.findSystemLogPage()},getExport:function(){var t=this;this.$confirm("确定导出？","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var e=t.$refs.table.columns,a=t.commonFun.getExportParameters2(e,e.length);if(null===t.data)t.startDateStr="",t.endDateStr="";else if((t.data||""!=t.data)&&t.data.length>0){var n=t.data;t.startDateStr=t.commonFun.dateFormat(n[0],"yyyyMMdd"),t.endDateStr=t.commonFun.dateFormat(n[1],"yyyyMMdd")}else t.startDateStr="",t.endDateStr="";t.$axios({method:"post",url:t.API.exportFindSystemLog,responseType:"arraybuffer",data:{status:t.status,ip:t.ip,startDateStr:t.startDateStr,endDateStr:t.endDateStr,uCreator:t.uCreator,titlels:a.titlels,colsls:a.colsls}}).then(function(t){var e="登录日志"+(new Date).getTime()+".xlsx";this.commonFun.fileDownload(t.data,e)}.bind(t))}).catch(function(t){this.$message.warning("取消")}.bind(this))}}},s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"systemLog-management-container"},[a("el-header",{staticClass:"my-header",staticStyle:{height:"45px"}},[t._v("系统日志管理")]),t._v(" "),a("el-main",[a("div",{staticClass:"systemLog-management-title"},[a("div",{staticClass:"systemLog-management-title-left"},[t._v("\n\t\t\t\t操作状态：\n\t\t\t\t"),a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v("\n\t\t\t\t操作人：\n\t\t\t\t"),a("el-input",{attrs:{clearable:"",placeholder:"请输入操作人"},model:{value:t.uCreator,callback:function(e){t.uCreator=e},expression:"uCreator"}}),t._v("\n\t\t\t\tIP：\n\t\t\t\t"),a("el-input",{attrs:{clearable:"",placeholder:"请输入IP地址"},model:{value:t.ip,callback:function(e){t.ip=e},expression:"ip"}}),t._v("\n\t\t\t\t时间：\n\t\t\t\t"),a("el-date-picker",{attrs:{type:"daterange",format:"yyyyMMdd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.getExport}},[t._v("导出")])],1)]),t._v(" "),a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.systemLogList,height:t.tableHeight}},[a("el-table-column",{attrs:{label:"序号",align:"center","min-width":"6%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.pageObj.pageIndex*t.pageObj.pageSize+e.$index+1)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"uCreator",label:"操作人","show-overflow-tooltip":"","min-width":"15%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP地址","min-width":"15%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"statusValue",label:"操作状态","min-width":"15%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"describe",label:"简要说明","show-overflow-tooltip":"","min-width":"34%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"uCreatedate",label:"时间","min-width":"15%"}})],1),t._v(" "),a("div",{staticClass:"material_page"},[a("pagination",{attrs:{pageIndex:t.pageObj.pageIndex,total:t.pageObj.total,pageSize:t.pageObj.pageSize},on:{PageTurning:t.PageTurning}})],1)],1)],1)};s._withStripped=!0;var i={render:s,staticRenderFns:[]},o=i;var r=!1;var l=a("VU/8")(n,o,!1,function(t){r||a("TygD")},"data-v-138d2a86",null);l.options.__file="src/views/logAuditManagement/SystemLogManagement.vue";e.default=l.exports},TygD:function(t,e,a){var n=a("pd6v");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("9c7877e0",n,!1,{})},pd6v:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.systemLog-management-container .my-header[data-v-138d2a86] {\n  padding-top: 15px;\n  display: none;\n}\n.systemLog-management-container .el-main[data-v-138d2a86] {\n  background-color: #fff;\n  padding: 0 !important;\n}\n.systemLog-management-container .el-main .systemLog-management-title[data-v-138d2a86] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    margin: 10px 10px;\n}\n.systemLog-management-container .el-main .systemLog-management-title .el-select[data-v-138d2a86] {\n      width: 180px;\n      margin-right: 10px;\n}\n.systemLog-management-container .el-main .systemLog-management-title .el-input[data-v-138d2a86] {\n      width: 180px;\n      margin-right: 10px;\n}\n.systemLog-management-container .el-main .systemLog-management-title .el-button[data-v-138d2a86] {\n      margin: 0 0 0 10px;\n}\n.systemLog-management-container .el-main .material_page[data-v-138d2a86] {\n    margin-top: 10px;\n    text-align: right;\n}\n",""])}});