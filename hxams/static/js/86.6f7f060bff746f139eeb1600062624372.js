webpackJsonp([86],{DNj4:function(e,t,a){var i=a("TyUO");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("0ee3cb76",i,!1,{})},TyUO:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.outsideReadingFile[data-v-6cccf1ea] {\n  padding: 15px 0 0 0 !important;\n}\n.outsideReadingFile .el-header[data-v-6cccf1ea],\n  .outsideReadingFile .el-footer[data-v-6cccf1ea] {\n    background-color: #E9EEF3;\n    color: #333;\n    text-align: center;\n    height: 60px;\n    line-height: 60px;\n    font-size: 26px;\n}\n.outsideReadingFile .el-main[data-v-6cccf1ea] {\n    padding: 20px 0 0 !important;\n}\n.outsideReadingFile .el-main .el-form[data-v-6cccf1ea] {\n      padding: 0 20px;\n}\n.outsideReadingFile .dialog-footer[data-v-6cccf1ea] {\n    text-align: center;\n    padding: 15px 0;\n}\n",""])},bBuV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("cMGX"),r=a("FJaO"),o={name:"OutsideReadingFile",props:["applyObj"],components:{Pagination:i.a,ReadingArchivesList:r.default},data:function(){return{tableHeight:null,readingArchivesVisible:!1,pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},chioceObj:{},readForm:{},tableData:[]}},created:function(){this.$store.state.applyInfo&&(this.readForm=this.$store.state.applyInfo),this.getFilesById()},mounted:function(){this.tableHeight=window.innerHeight-82-1*this.$refs.multipleTable.$el.offsetTop-30+"px"},computed:{},methods:{PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getFilesById()},ReadingArchivesListBack:function(){this.readingArchivesVisible=!1,this.$refs.readingArchivesListChild.clearTimer(),this.getFilesById()},dialogBeforeClose:function(e){this.$refs.readingArchivesListChild.clearTimer(),this.readingArchivesVisible=!1},goBack:function(){this.$store.commit("removeStoreByName",this.API.constObj.applyInfo),this.$router.push({name:"checkReadFile"})},getFilesById:function(){var e=this;this.$axios({loading:{isShow:!0,target:".outsideReadingFile"},method:"get",url:this.API.getA01s,params:{id:this.readForm.borrowandreadid,stype:this.commonFun.recognitionFileType(this.readForm.rstype),pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;"1"==a.code?(e.tableData=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"查询档案信息失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},lookFile:function(e,t){this.chioceObj=t,this.readingArchivesVisible=!0}}},s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container outsideReadingFile"},[e.readForm.uAreaname?a("el-header",[e._v(e._s(e.readForm.uAreaname))]):e._e(),e._v(" "),a("el-main",{staticClass:"firstStep"},[a("el-form",{ref:"readForm",staticClass:"demo-ruleForm",attrs:{model:e.readForm,"label-width":"120px",size:"small"}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"查阅目的"}},[a("el-input",{attrs:{readonly:"",placeholder:"暂无查阅目的"},model:{value:e.readForm.purpose,callback:function(t){e.$set(e.readForm,"purpose",t)},expression:"readForm.purpose"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"授权开始时间"}},[a("el-input",{attrs:{readonly:"",placeholder:"暂无授权开始时间"},model:{value:e.readForm.impowerstarttime,callback:function(t){e.$set(e.readForm,"impowerstarttime",t)},expression:"readForm.impowerstarttime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"授权结束时间"}},[a("el-input",{attrs:{readonly:"",placeholder:"暂无授权结束时间"},model:{value:e.readForm.impowerendtime,callback:function(t){e.$set(e.readForm,"impowerendtime",t)},expression:"readForm.impowerendtime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"详细描述"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},readonly:"",placeholder:"暂无详细描述"},model:{value:e.readForm.describe,callback:function(t){e.$set(e.readForm,"describe",t)},expression:"readForm.describe"}})],1)],1),e._v(" "),e.readForm.rstype==e.API.constObj.fileTypeList[1].id?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"授权说明"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},readonly:"",placeholder:"暂无授权说明"},model:{value:e.readForm.powerdescribe,callback:function(t){e.$set(e.readForm,"powerdescribe",t)},expression:"readForm.powerdescribe"}})],1)],1):e._e()],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"chioceFileTable",attrs:{data:e.tableData,"empty-text":"暂无数据",border:"",height:e.tableHeight}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1)+" ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"a0101",label:"姓名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0104",label:"性别",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0107",label:"出生年月",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0117",label:"民族",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0111a",label:"籍贯"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isImpower",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[!0===t.row.isImpower?a("span",[e._v("已授权")]):!1===t.row.isImpower?a("span",[e._v("已拒绝")]):a("span",[e._v("处理中")])]}}])}),e._v(" "),e.readForm.rstype==e.API.constObj.fileTypeList[0].id?a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[!0===t.row.isImpower?a("el-button",{attrs:{type:"success",icon:"el-icon-view",circle:"",title:"查阅"},on:{click:function(a){e.lookFile(t.$index,t.row)}}}):e._e()]}}])}):e._e()],1),e._v(" "),a("Pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1),e._v(" "),e.readingArchivesVisible?a("el-dialog",{staticClass:"outDialog",attrs:{title:"阅览档案",visible:e.readingArchivesVisible,width:"95%","append-to-body":"","close-on-click-modal":!1,fullscreen:"","before-close":e.dialogBeforeClose},on:{"update:visible":function(t){e.readingArchivesVisible=t}}},[a("ReadingArchivesList",{ref:"readingArchivesListChild",attrs:{id:e.chioceObj.id},on:{ReadingArchivesListBack:e.ReadingArchivesListBack}})],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.goBack}},[e._v("返回")])],1)],1)};s._withStripped=!0;var l={render:s,staticRenderFns:[]},n=l;var d=!1;var c=a("VU/8")(o,n,!1,function(e){d||a("DNj4")},"data-v-6cccf1ea",null);c.options.__file="src/views/archivalBorrowing/outsider/OutsideReadingFile.vue";t.default=c.exports}});