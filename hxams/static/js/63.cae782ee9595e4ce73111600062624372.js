webpackJsonp([63],{"2f/w":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.footer[data-v-a092814c] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n",""])},GKx8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("bOdI"),r=a.n(o),i=a("icmf"),l={name:"PutStorage",props:["e01z500"],components:{organizationTreeSelect:a("Ev+9").a},data:function(){return{putStorageForm:{e01z517:"",storageDate:new Date,e01z544:"",orgId:""},defaultOptions:"",rules:{e01z517:[{required:!0,message:"请输入经办人",trigger:"change"}],storageDate:[{required:!0,message:"请选择入库日期",trigger:"change"}]}}},methods:{orgTreeSelectCall:function(t){this.putStorageForm.orgId=t.id},cancle:function(){this.$emit("putStorageBack")},save:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.saveToNet()})},saveToNet:function(){var t=this;if(!this.putStorageForm.orgId)return this.$message({message:"请选择机构！",type:"error"}),!1;this.$axios({method:"post",url:this.API.toArchivalStorage,data:{e01z500:this.e01z500,e01z517:this.putStorageForm.e01z517,storageDate:this.commonFun.dateFormat(this.putStorageForm.storageDate,"yyyyMMdd"),e01z544:this.putStorageForm.e01z544,b0000:this.putStorageForm.orgId}}).then(function(e){"1"==e.data.code?(t.$message({message:"入库成功！",type:"success"}),t.$emit("putStorageBack","success")):t.$message({type:"error",message:"入库数据失败，请刷新重试！"})}).catch(function(t){})}}},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"putStorageForm",attrs:{rules:t.rules,model:t.putStorageForm,"label-width":"110px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"经办机构：",prop:"orgId"}},[a("organizationTreeSelect",{attrs:{defaultOptions:t.defaultOptions},on:{OrgTreeSelectCall:t.orgTreeSelectCall}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"经办人：",prop:"e01z517"}},[a("el-input",{model:{value:t.putStorageForm.e01z517,callback:function(e){t.$set(t.putStorageForm,"e01z517",e)},expression:"putStorageForm.e01z517"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"入库日期：",prop:"storageDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyyMMdd","value-format":"yyyyMMdd"},model:{value:t.putStorageForm.storageDate,callback:function(e){t.$set(t.putStorageForm,"storageDate",e)},expression:"putStorageForm.storageDate"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注：",prop:"e01z544"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:t.putStorageForm.e01z544,callback:function(e){t.$set(t.putStorageForm,"e01z544",e)},expression:"putStorageForm.e01z544"}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.save("putStorageForm")}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.cancle}},[t._v("取消")])],1)],1)};n._withStripped=!0;var s={render:n,staticRenderFns:[]},p=s;var c=!1;var g=a("VU/8")(l,p,!1,function(t){c||a("Wnql")},"data-v-a092814c",null);g.options.__file="src/views/archivesDailyManagement/fileStorage/PutStorage.vue";var d,f=g.exports,u=(d={name:"FileStorage",components:{hxTables:i.a,putStorage:f},data:function(){var t=this;return{e01z500:"",putStoragePop:!1,fileStorageForm:{a0101:"",e01z517:"",trialDate:"",storageDateStat:"",storageDateEnd:""},columns:[{prop:"valStatus",button:!0,render:!0,label:"操作",width:"70px",fixWidth:!0,fixed:"right",group:[{disabled:!0,value:"3",name:"入库",icon:"iconfont gd-ruku",type:"success",plain:!1,onClick:function(e,a){t.putStoragePop=!0,t.e01z500=e.e01z500}}]},{prop:"e01z501",label:"收件日期",showOverflowTooltip:!0,width:"100px"},{prop:"e100a",label:"档案编号",showOverflowTooltip:!0,width:"100px"},{prop:"a0101",label:"姓名",width:"70px"},{prop:"a0104",label:"性别",showOverflowTooltip:!0,width:"70px"},{prop:"a0107",label:"出生年月",showOverflowTooltip:!0,width:"100px"},{prop:"a0111a",label:"籍贯",showOverflowTooltip:!0,align:"left",width:"100px"},{prop:"a0192a",label:"工作单位与职务",showOverflowTooltip:!0,align:"left",width:"140px"},{prop:"e01z507a",label:"报送单位",showOverflowTooltip:!0,align:"left",width:"120px"},{prop:"typevalue",label:"接收方式",showOverflowTooltip:!0,width:"120px"},{prop:"e01z511",label:"正本",showOverflowTooltip:!0,width:"120px"},{prop:"e01z514",label:"副本",showOverflowTooltip:!0,width:"100px"},{prop:"valstatusvalue",label:"状态",showOverflowTooltip:!0,width:"80px"},{prop:"iselectronicValue",label:"数字档案",showOverflowTooltip:!0,width:"100px"},{prop:"ucreator",label:"接收人",showOverflowTooltip:!0,align:"left",width:"100px"},{prop:"storageDate",label:"入库日期",showOverflowTooltip:!0,width:"100px"},{prop:"e01z517",label:"经办人",showOverflowTooltip:!0,align:"left",width:"100px"},{prop:"e01z544",label:"备注",showOverflowTooltip:!0,align:"left",width:"100px"}],tableData:[],options:{mutiSelect:!1,index:!0,loading:!1,initTable:!0,border:!1,maxHeight:500},pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},reportData:"",uploadUrl:""}},mounted:function(){this.uploadUrl=this.API.baobiaoURL},watch:{tableData:{handler:function(t){this.options.maxHeight=window.innerHeight-this.$refs.table.$el.offsetTop-40-52-37}}}},r()(d,"mounted",function(){this.uploadUrl=this.API.baobiaoURL}),r()(d,"methods",{fetchTableData:function(){var t=this;this.$axios({loading:{isShow:!0,target:".file-review-container"},method:"post",url:this.API.archivalStoragePage,data:{a0101:this.fileStorageForm.a0101,e01z517:this.fileStorageForm.e01z517,storageDateStat:this.fileStorageForm.storageDateStat,storageDateEnd:this.fileStorageForm.storageDateEnd,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(e){var a=e.data;"1"==a.code?(t.tableData=a.data.list,t.pageObj.total=a.data.total):t.$message({type:"error",message:"获取数据失败，请刷新重试！"})}).catch(function(t){})},getExport:function(){var t=this;this.$confirm("确定导出？","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var e=t.$refs.table.columns,a=t.commonFun.getExportParameters1(e);t.$axios({method:"post",url:t.API.exportArchivalStorage,responseType:"arraybuffer",data:{a0100:t.fileStorageForm.a0100,e01z517:t.fileStorageForm.e01z517,storageDateStat:t.fileStorageForm.storageDateStat,storageDateEnd:t.fileStorageForm.storageDateEnd,titlels:a.titlels,colsls:a.colsls}}).then(function(t){this.commonFun.fileDownload(t.data,"档案入库列表.xlsx")}.bind(t))}).catch(function(t){this.$message.warning("取消")}.bind(this))},search:function(){if(null===this.fileStorageForm.trialDate)this.fileStorageForm.storageDateStat="",this.fileStorageForm.storageDateEnd="";else if((this.fileStorageForm.trialDate||""!=this.fileStorageForm.trialDate)&&this.fileStorageForm.trialDate.length>0){var t=this.fileStorageForm.trialDate;this.fileStorageForm.storageDateStat=this.commonFun.dateFormat(t[0],"yyyyMMdd"),this.fileStorageForm.storageDateEnd=this.commonFun.dateFormat(t[1],"yyyyMMdd")}else this.fileStorageForm.storageDateStat="",this.fileStorageForm.storageDateEnd="";this.pageObj.pageIndex=this.API.constObj.pageIndex,this.fetchTableData()},putStorageBack:function(t){this.putStoragePop=!1,"success"==t&&this.fetchTableData()},PrintFun:function(){this.getchangeReportData();var t=this.API.constObj.reportFormData[9].id,e=this.reportData;this.openPostWindow(this.uploadUrl,t,e)},openPostWindow:function(t,e,a){t=t+"?uuid="+e+"&SQLSCRIPT="+a,t=encodeURI(t),window.open(t)},getchangeReportData:function(){var t="",e=this.$store.state.user.uAreacode,a=this.fileStorageForm.a0101,o=this.fileStorageForm.e01z517,r="",i="";if((this.fileStorageForm.trialDate||""!=this.fileStorageForm.trialDate)&&this.fileStorageForm.trialDate.length>0){var l=this.fileStorageForm.trialDate;r=this.commonFun.dateFormat(l[0],"yyyyMMdd"),i=this.commonFun.dateFormat(l[1],"yyyyMMdd")}t+="and be.U_AreaCode='"+e+"'",a&&(t+="and be.a0101 like '%"+a+"%' "),o&&(t+="and e.e01Z517  like '%"+o+"%' "),r&&(t+="and be.STORAGE_DATE &gt;="+r+" "),i&&(t+="and be.STORAGE_DATE &lt;="+i+" "),this.reportData=t}}),d),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"file-storage-container"},[a("el-main",[a("div",{staticClass:"file-storage-container-title"},[a("div",{staticClass:"file-storage-container-titlel"},[a("el-input",{staticClass:"elInuput",attrs:{placeholder:"请输入姓名",clearable:""},model:{value:t.fileStorageForm.a0101,callback:function(e){t.$set(t.fileStorageForm,"a0101",e)},expression:"fileStorageForm.a0101"}}),t._v(" "),a("el-input",{staticClass:"elInuput",attrs:{placeholder:"请输入经办人",clearable:""},model:{value:t.fileStorageForm.e01z517,callback:function(e){t.$set(t.fileStorageForm,"e01z517",e)},expression:"fileStorageForm.e01z517"}}),t._v(" "),a("el-date-picker",{staticClass:"elData",attrs:{type:"daterange",format:"yyyyMMdd","range-separator":"至","start-placeholder":"入库开始日期","end-placeholder":"入库结束日期"},model:{value:t.fileStorageForm.trialDate,callback:function(e){t.$set(t.fileStorageForm,"trialDate",e)},expression:"fileStorageForm.trialDate"}})],1),t._v(" "),a("div",{staticClass:"file-storage-container-titler"},[a("el-button",{attrs:{type:"primary"},on:{click:t.PrintFun}},[t._v("打印")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.getExport}},[t._v("导出")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)]),t._v(" "),a("hxTables",{ref:"table",attrs:{pageObj:t.pageObj,columns:t.columns,dataSource:t.tableData,options:t.options,fetch:t.fetchTableData}}),t._v(" "),t.putStoragePop?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"入库","append-to-body":"","close-on-click-modal":!1,width:"40%",visible:t.putStoragePop},on:{"update:visible":function(e){t.putStoragePop=e}}},[a("putStorage",{attrs:{e01z500:t.e01z500},on:{putStorageBack:t.putStorageBack}})],1):t._e()],1)],1)};h._withStripped=!0;var m={render:h,staticRenderFns:[]},b=m;var S=!1;var v=a("VU/8")(u,b,!1,function(t){S||a("rqIf")},"data-v-6ad7063e",null);v.options.__file="src/views/archivesDailyManagement/fileStorage/FileStorage.vue";e.default=v.exports},Wnql:function(t,e,a){var o=a("2f/w");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("bbd96a66",o,!1,{})},rqIf:function(t,e,a){var o=a("yw/h");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("01a44e96",o,!1,{})},"yw/h":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n[data-v-6ad7063e] .el-dialog .el-dialog__body {\n  padding: 10px;\n}\n[data-v-6ad7063e].el-date-editor .el-range-separator {\n  padding: 0 !important;\n}\n.file-storage-container .el-main[data-v-6ad7063e] {\n  background-color: #fff;\n  padding: 0 !important;\n}\n.file-storage-container .el-main .file-storage-container-title[data-v-6ad7063e] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    padding: 10px;\n}\n.file-storage-container .el-main .file-storage-container-title .file-storage-container-titlel[data-v-6ad7063e] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n.file-storage-container .el-main .file-storage-container-title .file-storage-container-titlel .elInuput[data-v-6ad7063e] {\n        width: 150px;\n        margin-right: 10px;\n}\n.file-storage-container .el-main .file-storage-container-title .file-storage-container-titler[data-v-6ad7063e] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n",""])}});