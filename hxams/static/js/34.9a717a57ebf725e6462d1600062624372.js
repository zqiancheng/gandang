webpackJsonp([34],{"18O7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("cMGX"),n=a("Gu7T"),l=a.n(n),o=a("mvHQ"),c=a.n(o),d=a("JoXd"),h=a("41Z1"),p={name:"ArchivesReceiveAdd",components:{hxTables:a("icmf").a},props:["selectArchives"],data:function(){return{archivesForm:{e01z507a:"",e01z527:"",type:"",confidentialno:"",e01z314:"",e01z501:"",e01z544:""},archivestype:[{value:0,label:"高"},{value:1,label:"中"},{value:2,label:"低"}],archivestypes:[{value:0,label:"机要"},{value:1,label:"派人"}],tableData:[],rules:{e01z507a:[{required:!0,message:"请输入来件单位",trigger:"change"},{min:0,max:this.fieldsConfig.commonLength.eighty,message:"长度必须在0到 "+this.fieldsConfig.commonLength.eighty+"位字符之间",trigger:"blur"}],e01z527:[{required:!0,message:"请选择案卷质量",trigger:"change"}],type:[{required:!0,message:"请选择接收类型",trigger:"change"}],confidentialno:[{required:!0,message:"请输入机要号",trigger:"change"},{min:0,max:50,message:"长度必须在0到 50位字符之间",trigger:"blur"}],e01z314:[{required:!0,message:"请输入来件人员",trigger:"change"},{min:0,max:this.fieldsConfig.commonLength.forty,message:"长度必须在0到 "+this.fieldsConfig.commonLength.forty+"位字符之间",trigger:"blur"}],e01z501:[{required:!0,message:"请选择收件日期",trigger:"change"}],e01z544:[{min:0,max:this.fieldsConfig.commonLength.fiveHundred,message:"长度必须在0到"+this.fieldsConfig.commonLength.fiveHundred+"位字符之间",trigger:"blur"}]},flag:!1,num:0,dataList:"",columns:[{index:!0,prop:"tableIndex",label:"序号",width:"6%",align:"center"},{prop:"a0101",label:"档案人员",showOverflowTooltip:!0,width:"14%"},{prop:"a0104",label:"性别",showOverflowTooltip:!0,width:"12%"},{prop:"a0107",label:"出生年月",showOverflowTooltip:!0,width:"13%"},{prop:"a0117",label:"民族",showOverflowTooltip:!0,width:"12%"},{prop:"a0192a",label:"工作单位及职务",showOverflowTooltip:!0,width:"17%"},{prop:"e01z511",label:"正本卷数",showOverflowTooltip:!0,width:"12%"},{prop:"e01z514",label:"副本卷数",showOverflowTooltip:!0,width:"12%"}],options:{mutiSelect:!1,index:!1,loading:!1,initTable:!0,border:!1,maxHeight:240,indexWidth:"6%"}}},created:function(){this.tableData=this.selectArchives.lists,this.archivesForm.e01z507a=this.selectArchives.e01z704a,this.archivesForm.e01z314=this.selectArchives.e01z717,this.archivesForm.e01z501=new Date},methods:{selectChange:function(e){this.rules.confidentialno[0].required="1"!=e},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(""!=t.tableData&&0!=t.tableData.length){var a=[];t.tableData.forEach(function(e){var t={};t.a0100=e.a0100,t.a0101=e.a0101,t.a0104=e.a0104,t.a0192a=e.a0192a,t.a0117=e.a0117,t.a0107=e.a0107,t.e01z511=e.e01z511,t.e01z514=e.e01z514,a.push(t)});var i={e01z507a:t.$store.state.user.uAreaCodeName,e01z507b:t.$store.state.user.uAreacode,e01z527:t.archivesForm.e01z527,type:t.archivesForm.type,confidentialno:t.archivesForm.confidentialno,e01z314:t.archivesForm.e01z314,e01z501:t.commonFun.dateFormat(t.archivesForm.e01z501,"yyyyMMdd"),e01z544:t.archivesForm.e01z544,lists:a},r=c()(i);t.$emit("back",r)}else t.$message.warning("请添加人员！")})},cancle:function(){this.$emit("back","")}}},u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"archives-add-container"},[a("el-form",{ref:"archivesForm",staticStyle:{"margin-right":"15px"},attrs:{rules:e.rules,model:e.archivesForm,"label-width":"110px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接收单位：",prop:"e01z507a"}},[a("el-input",{attrs:{disabled:""},model:{value:e.archivesForm.e01z507a,callback:function(t){e.$set(e.archivesForm,"e01z507a",t)},expression:"archivesForm.e01z507a"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"案卷质量：",prop:"e01z527"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择案卷质量"},model:{value:e.archivesForm.e01z527,callback:function(t){e.$set(e.archivesForm,"e01z527",t)},expression:"archivesForm.e01z527"}},e._l(e.archivestype,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接收类型：",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择接收类型"},on:{change:e.selectChange},model:{value:e.archivesForm.type,callback:function(t){e.$set(e.archivesForm,"type",t)},expression:"archivesForm.type"}},e._l(e.archivestypes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机要号：",prop:"confidentialno"}},[a("el-input",{attrs:{disabled:"1"==e.archivesForm.type},model:{value:e.archivesForm.confidentialno,callback:function(t){e.$set(e.archivesForm,"confidentialno",t)},expression:"archivesForm.confidentialno"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"经办人员：",prop:"e01z314"}},[a("el-input",{attrs:{disabled:""},model:{value:e.archivesForm.e01z314,callback:function(t){e.$set(e.archivesForm,"e01z314",t)},expression:"archivesForm.e01z314"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"收件日期：",prop:"e01z501"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyyMMdd","value-format":"yyyyMMdd"},model:{value:e.archivesForm.e01z501,callback:function(t){e.$set(e.archivesForm,"e01z501",t)},expression:"archivesForm.e01z501"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注：",prop:"e01z544"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.archivesForm.e01z544,callback:function(t){e.$set(e.archivesForm,"e01z544",t)},expression:"archivesForm.e01z544"}})],1)],1)],1)],1),e._v(" "),a("hxTables",{ref:"table",attrs:{columns:e.columns,dataSource:e.tableData,options:e.options}}),e._v(" "),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save("archivesForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.cancle}},[e._v("取消")])],1)],1)};u._withStripped=!0;var v={render:u,staticRenderFns:[]},m=v;var g=!1;var f=a("VU/8")(p,m,!1,function(e){g||a("R6sI")},"data-v-4fd87f74",null);f.options.__file="src/views/archivesDailyManagement/archivesTransfer/ArchivesReceiveAdd.vue";var b=f.exports,w={name:"AddArchivesTransfer2",components:{areaTreeSelect:h.a,fileSelection:d.a,ArchivesReceiveAdd:b},data:function(){return{detailVisible:!1,fivePeople:!0,innerVisible:!1,archivesForm:{transferouttype:2,e01z704a:"",e01z704b:"",e01z721:"",e01z717:"",e01z701:"",list:[],ids:""},isDetail:!0,transferouttypes:[{value:1,label:"内部"},{value:2,label:"外部"}],rules:{e01z704a:[{required:!0,message:"请输入转往单位",trigger:"change"},{min:0,max:this.fieldsConfig.commonLength.eighty,message:"长度必须在0到 "+this.fieldsConfig.commonLength.eighty+"位字符之间",trigger:"blur"}],transferouttype:[{required:!0,message:"请选中转递方式",trigger:"change"}],e01z701:[{required:!0,message:"请选中转递日期",trigger:"change"}],e01z717:[{required:!0,message:"请输入经办人员",trigger:"change"},{min:0,max:this.fieldsConfig.commonLength.twenty,message:"长度必须在0到 "+this.fieldsConfig.commonLength.twenty+"位字符之间",trigger:"blur"}],e01z721:[{required:!0,message:"请输入转递原因",trigger:"change"},{min:0,max:this.fieldsConfig.commonLength.sixty,message:"长度必须在0到 "+this.fieldsConfig.commonLength.sixty+"位字符之间",trigger:"blur"}]},selectItem:"",selectedPagerlList:[],isSet:!1,flag:!1,title:"请选择转往单位",defaultOptions:"",selectArchives:{},strJson:{}}},created:function(){this.archivesForm.e01z701=new Date,this.getareaTree()},methods:{getSelect:function(e){e&&(this.archivesForm.e01z704b=e.code,this.archivesForm.e01z704a=e.name)},selectChange:function(e){"1"==e?this.isDetail=!1:(this.isDetail=!0,this.archivesForm.e01z704a="",this.archivesForm.e01z704b="")},getareaTree:function(){var e=this;this.$axios({method:"post",url:this.API.areaTree}).then(function(t){"1"==t.data.code||e.$message({type:"error",message:"操作失败，请刷新重试！"})}).catch(function(e){})},handleChange:function(e){},handleChange1:function(e){},save:function(e,t){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;if(a.selectedPagerlList.length<1)a.$message({message:"请添加档案人员！",type:"success"});else{if(1==a.archivesForm.transferouttype){var i=a.$store.state.user.uAreacode;if(a.archivesForm.e01z704b===i)return void a.$confirm("不能对本单位进行转递，请选择正确单位！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})}var r=[];a.selectedPagerlList.forEach(function(e){var t={};t.a0100=e.a0100,t.a0101=e.a0101,t.a0104=e.a0104,t.a0192a=e.a0192a,t.a0117=e.a0117,t.a0107=e.a0107,t.e01z511=e.e01z511,t.e01z514=e.e01z514,r.push(t)});var s={transferouttype:a.archivesForm.transferouttype,e01z704a:a.archivesForm.e01z704a,e01z704b:a.archivesForm.e01z704b,e01z721:a.archivesForm.e01z721,e01z717:a.archivesForm.e01z717,e01z701:a.commonFun.dateFormat(a.archivesForm.e01z701,"yyyyMMdd"),valStatus:t,lists:r};a.strJson=c()(s);0==t?a.addFileTransfer(a.strJson,0,""):1==t&&(a.selectArchives=s,1==a.archivesForm.transferouttype?a.detailVisible=!0:2==a.archivesForm.transferouttype&&a.addFileTransfer(a.strJson,1,""))}})},addFileTransfer:function(e,t,a){var i=this;this.$axios({method:"post",url:this.API.getfileTransferInfo,data:{str:e,strE01z5:a,e01z900Id:""}}).then(function(e){"1"==e.data.code?(i.$message({message:"发送成功！",type:"success"}),i.$emit("addBack","success")):i.$message({type:"error",message:"添加数据失败，请刷新重试！"})}).catch(function(e){})},getChioceFiles:function(e){var t=this;this.innerVisible=!1,this.selectedPagerlList=this.commonFun.concatArray(this.selectedPagerlList,e,"a0100"),this.selectedPagerlList.forEach(function(e){e.isSet=!1,t.$set(e,"e01z511",1),t.$set(e,"e01z514",0)})},clickRow:function(e){this.selectItem=e},delArchives:function(){if(""==this.selectItem)return this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确认",showCancelButton:!1,type:"warning",center:!0}),!1;this.selectedPagerlList.splice(this.selectItem,1),this.selectItem=""},cancle:function(){this.$emit("addBack","")},pwdChange:function(e,t,a){this.selectedPagerlList[t].isSet=a,this.selectedPagerlList=[].concat(l()(this.selectedPagerlList)),this.flag=!a},getBack:function(e){e&&this.addFileTransfer(this.strJson,1,e),this.detailVisible=!1}}},y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-archives-container"},[a("el-form",{ref:"archivesForm",staticStyle:{"margin-right":"10px"},attrs:{rules:e.rules,model:e.archivesForm,"label-width":"110px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"转递方式：",prop:"transferouttype"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择接收类型"},on:{change:e.selectChange},model:{value:e.archivesForm.transferouttype,callback:function(t){e.$set(e.archivesForm,"transferouttype",t)},expression:"archivesForm.transferouttype"}},e._l(e.transferouttypes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"转往单位：",prop:"e01z704a"}},[e.isDetail?a("el-input",{model:{value:e.archivesForm.e01z704a,callback:function(t){e.$set(e.archivesForm,"e01z704a",t)},expression:"archivesForm.e01z704a"}}):a("areaTreeSelect",{staticStyle:{width:"100%"},attrs:{defaultOptions:e.defaultOptions,title:e.title},on:{areaTreeSelectCall:e.getSelect}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"转递原因：",prop:"e01z721"}},[a("el-input",{model:{value:e.archivesForm.e01z721,callback:function(t){e.$set(e.archivesForm,"e01z721",t)},expression:"archivesForm.e01z721"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"经办人员：",prop:"e01z717"}},[a("el-input",{model:{value:e.archivesForm.e01z717,callback:function(t){e.$set(e.archivesForm,"e01z717",t)},expression:"archivesForm.e01z717"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"转递日期：",prop:"e01z701"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyyMMdd","value-format":"yyyyMMdd"},model:{value:e.archivesForm.e01z701,callback:function(t){e.$set(e.archivesForm,"e01z701",t)},expression:"archivesForm.e01z701"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"opration"},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.innerVisible=!0}}},[e._v("档案选择")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.delArchives}},[e._v("删除")])],1),e._v(" "),e.innerVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{height:"97%",overflow:"hidden"},attrs:{width:"55%","close-on-click-modal":!1,title:"添加人员",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("fileSelection",{attrs:{fivePeople:e.fivePeople},on:{GetChioceFiles:e.getChioceFiles}})],1):e._e(),e._v(" "),a("el-table",{staticClass:"add-archives-table",staticStyle:{width:"100%"},attrs:{"empty-text":"您还没有添加数据！","highlight-current-row":"",data:e.selectedPagerlList,height:"180px"},on:{"row-click":e.clickRow}},[a("el-table-column",{attrs:{label:"序号",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"a0101",label:"档案人员","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0104",label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0192a",label:"工作单位及职务","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0117",label:"民族"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0107",label:"出生年月",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z511",label:"转出正本数",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isSet?a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1},on:{change:e.handleChange},model:{value:t.row.e01z511,callback:function(a){e.$set(t.row,"e01z511",a)},expression:"scope.row.e01z511"}}):a("span",[e._v(e._s(t.row.e01z511))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z514",label:"转出副本数",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isSet?a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:0},on:{change:e.handleChange1},model:{value:t.row.e01z514,callback:function(a){e.$set(t.row,"e01z514",a)},expression:"scope.row.e01z514"}}):a("span",[e._v(e._s(t.row.e01z514))])]}}])})],1),e._v(" "),a("div",{staticClass:"opration2"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save("archivesForm",0)}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save("archivesForm",1)}}},[e._v("转递")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.cancle}},[e._v("取消")])],1),e._v(" "),e.detailVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{width:"800px","append-to-body":"","close-on-click-modal":!1,title:"接收登记",visible:e.detailVisible},on:{"update:visible":function(t){e.detailVisible=t}}},[a("ArchivesReceiveAdd",{attrs:{selectArchives:e.selectArchives},on:{back:e.getBack}})],1):e._e()],1)};y._withStripped=!0;var z={render:y,staticRenderFns:[]},_=z;var k=!1;var x=a("VU/8")(w,_,!1,function(e){k||a("6mcV")},"data-v-5f45bdba",null);x.options.__file="src/views/archivesDailyManagement/archivesTransfer/AddArchivesTransfer2.vue";var F=x.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"archives-transfer-detail-container"},[a("el-form",{ref:"receiveForm",staticStyle:{margin:"0 10px"},attrs:{model:e.selectArchives,"label-width":"110px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"经办人员：",prop:"e01z717"}},[a("el-input",{attrs:{disabled:"disabled",readonly:""},model:{value:e.selectArchives.e01z717,callback:function(t){e.$set(e.selectArchives,"e01z717",t)},expression:"selectArchives.e01z717"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"转递原因：",prop:"e01z721"}},[a("el-input",{attrs:{disabled:"disabled",readonly:""},model:{value:e.selectArchives.e01z721,callback:function(t){e.$set(e.selectArchives,"e01z721",t)},expression:"selectArchives.e01z721"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"转往单位名称：",prop:"e01z704a"}},[a("el-input",{attrs:{disabled:"disabled",readonly:""},model:{value:e.selectArchives.e01z704a,callback:function(t){e.$set(e.selectArchives,"e01z704a",t)},expression:"selectArchives.e01z704a"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"转递日期：",prop:"e01z701"}},[a("el-input",{attrs:{disabled:"disabled",readonly:""},model:{value:e.selectArchives.e01z701,callback:function(t){e.$set(e.selectArchives,"e01z701",t)},expression:"selectArchives.e01z701"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"转出正本数：",prop:"e01z711"}},[a("el-input",{attrs:{disabled:"disabled",readonly:""},model:{value:e.selectArchives.e01z711,callback:function(t){e.$set(e.selectArchives,"e01z711",t)},expression:"selectArchives.e01z711"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"转出副本数：",prop:"e01z714"}},[a("el-input",{attrs:{disabled:"disabled",readonly:""},model:{value:e.selectArchives.e01z714,callback:function(t){e.$set(e.selectArchives,"e01z714",t)},expression:"selectArchives.e01z714"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注：",prop:"e01z731"}},[a("el-input",{attrs:{disabled:"disabled",type:"textarea",readonly:"",autosize:{minRows:2,maxRows:4}},model:{value:e.selectArchives.e01z731,callback:function(t){e.$set(e.selectArchives,"e01z731",t)},expression:"selectArchives.e01z731"}})],1)],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{"empty-text":"您还没有添加数据！",data:e.pagerlList,height:"240px"}},[a("el-table-column",{attrs:{prop:"a0101",label:"档案人员","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0104",label:"性别","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0192a",label:"工作单位及职务","show-overflow-tooltip":"","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0117",label:"民族","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0107",label:"出生年月","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"valstatusvalue",label:"数据状态","min-width":"100"}})],1)],1)};A._withStripped=!0;var $={render:A,staticRenderFns:[]},S=$;var T=!1;var D=a("VU/8")({props:["selectArchives"],components:{},data:function(){return{pagerlList:[]}},created:function(){var e=[];e.push(this.selectArchives),this.pagerlList=e},methods:{}},S,!1,function(e){T||a("91gk")},"data-v-06c0c0d0",null);D.options.__file="src/views/archivesDailyManagement/archivesTransfer/ArchivesTransferDetail2.vue";var C=D.exports,P={name:"AcknowledgementRegister",props:["checkedDeliver"],data:function(){return{acknowledgementForm:{e01z724:"",e01z727:"",e01z731:""},rules:{e01z724:[{required:!0,message:"请输入回执人",trigger:"change"}],e01z727:[{required:!0,message:"请选择回执时间",trigger:"change"}]}}},created:function(){this.checkedDeliver&&""!=this.checkedDeliver.e01z724?this.acknowledgementForm=this.checkedDeliver:this.acknowledgementForm.e01z727=new Date},methods:{saveAcknowledge:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.saveToNet()})},saveToNet:function(){var e=this;this.$axios({method:"post",url:this.API.receiptRegistration,data:{e01z700:this.checkedDeliver.e01z700,e01z724:this.acknowledgementForm.e01z724,e01z727:this.commonFun.dateFormat(this.acknowledgementForm.e01z727,"yyyyMMdd"),e01z731:this.acknowledgementForm.e01z731}}).then(function(t){"1"==t.data.code?(e.$message.success("回执登记成功！"),e.$emit("getAcknowledgementRegisterBack","success")):e.$message.error("回执登记失败，请刷新重试！")}).catch(function(e){this.$message.error("回执登记失败，请刷新重试！")})},cancle:function(){this.$emit("getAcknowledgementRegisterBack")}}},I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"acknowledgement-register-container"},[a("el-form",{ref:"acknowledgementForm",staticStyle:{margin:"0 10px"},attrs:{rules:e.rules,model:e.acknowledgementForm,"label-width":"110px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"回执人",prop:"e01z724"}},[a("el-input",{model:{value:e.acknowledgementForm.e01z724,callback:function(t){e.$set(e.acknowledgementForm,"e01z724",t)},expression:"acknowledgementForm.e01z724"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"回执日期",prop:"e01z727"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyyMMdd","value-format":"yyyyMMdd"},model:{value:e.acknowledgementForm.e01z727,callback:function(t){e.$set(e.acknowledgementForm,"e01z727",t)},expression:"acknowledgementForm.e01z727"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注",prop:"e01z731"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:e.acknowledgementForm.e01z731,callback:function(t){e.$set(e.acknowledgementForm,"e01z731",t)},expression:"acknowledgementForm.e01z731"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"oprations",staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveAcknowledge("acknowledgementForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.cancle}},[e._v("取消")])],1)],1)};I._withStripped=!0;var R={render:I,staticRenderFns:[]},V=R;var j=!1;var L=a("VU/8")(P,V,!1,function(e){j||a("M4da")},"data-v-21fa3693",null);L.options.__file="src/views/archivesDailyManagement/archivesTransfer/ReturnReceipt.vue";var O=L.exports,M={name:"ArchivesTransfer2",components:{pagination:s.a,addArchivesTransfer:F,archivesTransferDetail:C,returnReceipt:O,ArchivesReceiveAdd:b},data:function(){return{transferUnit:"",pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},archivesTransferList:[],archivesVisible:!1,detailVisible:!1,acknowledgementRegisterPop:!1,selectArchives:"",tableHeight:0,addWidth:"",checkedDeliver:"",receivingVisible:!1,receivingData:{},ForwardId:"",uploadUrl:""}},watch:{archivesTransferList:{handler:function(e){this.tableHeight=window.innerHeight-this.$refs.table.$el.offsetTop-40-52-93}}},mounted:function(){var e=this;window.onresize=function(){return t=document.body.clientWidth,void(e.addWidth=t>1366?"60%":"75%");var t},this.uploadUrl=this.API.baobiaoURL},created:function(){this.getPagerE01Z700Json();var e=document.body.clientWidth;this.addWidth=e>1366?"60%":"75%"},methods:{deleteFun:function(e){var t=this;this.$axios({loading:{isShow:!0,target:".archiver-transfer-container"},method:"get",url:this.API.deleteE01z7,params:{id:e.id}}).then(function(e){"1"==e.data.code?(t.$message({type:"success",message:"删除成功！"}),t.getPagerE01Z700Json()):t.$message({type:"error",message:"获取数据失败，请刷新重试！"})}).catch(function(e){})},receivingBack:function(e){e&&this.getupdateFileTransferInfo(e,this.ForwardId),this.receivingVisible=!1},getupdateFileTransferInfo:function(e,t){var a=this;this.$axios({loading:{isShow:!0,target:".archiver-transfer-container"},method:"post",url:this.API.updateFileTransferInfo,data:{id:t,strE01z5:e}}).then(function(e){"1"==e.data.code?(a.$message({type:"success",message:"发送成功！"}),a.getPagerE01Z700Json()):a.$message({type:"error",message:"获取数据失败，请刷新重试！"})}).catch(function(e){})},forward:function(e){var t=this;this.ForwardId=e.id,1==e.transferouttype?this.$axios({loading:{isShow:!0,target:".archiver-transfer-container"},method:"post",url:this.API.queryE01z700Destail,data:{id:e.id}}).then(function(e){var a=e.data;"1"==a.code?(t.receivingData=a.data,t.receivingVisible=!0):t.$message({type:"error",message:"获取数据失败，请刷新重试！"})}).catch(function(e){}):2==e.transferouttype&&this.$confirm("是否确定转递?","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.getupdateFileTransferInfo("",t.ForwardId)}).catch(function(){})},handleCurrentChange:function(e){this.pageObj.pageIndex=e,this.getPagerE01Z700Json()},PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getPagerE01Z700Json()},getPagerE01Z700Json:function(){var e=this;this.$axios({loading:{isShow:!0,target:".archiver-transfer-container"},method:"post",url:this.API.queryAllPagePerson,data:{transferUnit:this.transferUnit,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;"1"==a.code?(e.archivesTransferList=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"获取数据失败，请刷新重试！"})}).catch(function(e){})},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.getPagerE01Z700Json()},getBack:function(e){this.archivesVisible=!1,"success"==e&&this.getPagerE01Z700Json()},detail:function(e,t){this.selectArchives=r()({},e),this.detailVisible=!0},acknowledgementRegister:function(e){this.checkedDeliver=e,this.acknowledgementRegisterPop=!0},getAcknowledgementRegisterBack:function(e){this.acknowledgementRegisterPop=!1,"success"===e&&this.getPagerE01Z700Json()},printfn:function(e){var t=e.id,a=this.API.constObj.reportFormData[3].id,i="e01z7_00 ='"+t+"'",r="id ='"+t+"'",s="e1z7.E01Z7_00='"+t+"'and e1z7.U_AreaCode='"+this.$store.state.user.uAreacode+"')and E01Z7_00='"+t+"'";this.openPostWindow(this.uploadUrl,a,i,r,s)},openPostWindow:function(e,t,a,i,r){e=e+"?uuid="+t+"&SCRIPT1="+a+"&SCRIPT2="+i+"&SQLSCRIPT="+r,e=encodeURI(e),window.open(e)}}},E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"archiver-transfer-container"},[a("el-main",[a("div",{staticClass:"title"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.archivesVisible=!0}}},[e._v("添加")]),e._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{clearable:"",placeholder:"请输入转往单位名称"},model:{value:e.transferUnit,callback:function(t){e.transferUnit=t},expression:"transferUnit"}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{ref:"table",staticStyle:{width:"100%",height:"100%"},attrs:{height:e.tableHeight,data:e.archivesTransferList}},[a("el-table-column",{attrs:{label:"序号",align:"center","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作",fixed:"right",align:"center","min-width":"25%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",icon:"iconfont gd-chakan",circle:"",title:"详细"},on:{click:function(a){e.detail(t.row,t.$index)}}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"iconfont gd-huizhimdpi",circle:"",title:"回执登记"},on:{click:function(a){e.acknowledgementRegister(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"iconfont gd-dayinrizhi",circle:"",title:"打印转递通知单"},on:{click:function(a){e.printfn(t.row)}}}),e._v(" "),0==t.row.valStatus?a("el-button",{attrs:{type:"success",icon:"iconfont gd-huizhimdpi",circle:"",title:"转递"},on:{click:function(a){e.forward(t.row)}}}):e._e(),e._v(" "),1==t.row.valStatus?a("el-button",{staticClass:"gray",attrs:{type:"success",icon:"iconfont gd-huizhimdpi",circle:"",title:"转递",disabled:""}}):e._e(),e._v(" "),0==t.row.valStatus?a("el-button",{attrs:{type:"success",icon:"el-icon-close",circle:"",title:"删除"},on:{click:function(a){e.deleteFun(t.row)}}}):e._e(),e._v(" "),1==t.row.valStatus?a("el-button",{staticClass:"gray",attrs:{type:"success",icon:"el-icon-close",circle:"",title:"删除",disabled:""}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z717",label:"经办人员","show-overflow-tooltip":"","min-width":"12%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z704a",label:"转往单位","min-width":"12%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z701",label:"转递日期",width:"140","min-width":"12%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"transferouttype",label:"传递方式",width:"140","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.transferouttype?a("span",[e._v("内部")]):"2"==t.row.transferouttype?a("span",[e._v("外部")]):a("span")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"a0101",label:"档案人员","show-overflow-tooltip":"","min-width":"12%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z724",label:"回执人员","show-overflow-tooltip":"","min-width":"12%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z727",label:"回执日期","min-width":"12%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e01z7Valstatusvalue",label:"状态","min-width":"11%"}})],1),e._v(" "),a("div",[a("pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1)],1),e._v(" "),e.archivesVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{width:e.addWidth,"append-to-body":"","close-on-click-modal":!1,title:"转递登记",visible:e.archivesVisible},on:{"update:visible":function(t){e.archivesVisible=t}}},[a("addArchivesTransfer",{on:{addBack:e.getBack}})],1):e._e(),e._v(" "),e.detailVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{width:e.addWidth,"append-to-body":"","close-on-click-modal":!1,title:"详细",visible:e.detailVisible},on:{"update:visible":function(t){e.detailVisible=t}}},[a("archivesTransferDetail",{attrs:{selectArchives:e.selectArchives},on:{back:e.getBack}})],1):e._e(),e._v(" "),e.acknowledgementRegisterPop?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"回执登记","append-to-body":"","close-on-click-modal":!1,width:"40%",visible:e.acknowledgementRegisterPop},on:{"update:visible":function(t){e.acknowledgementRegisterPop=t}}},[a("returnReceipt",{attrs:{checkedDeliver:e.checkedDeliver},on:{getAcknowledgementRegisterBack:e.getAcknowledgementRegisterBack}})],1):e._e(),e._v(" "),e.receivingVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{width:"800px","append-to-body":"","close-on-click-modal":!1,title:"接收登记",visible:e.receivingVisible},on:{"update:visible":function(t){e.receivingVisible=t}}},[a("ArchivesReceiveAdd",{attrs:{selectArchives:e.receivingData},on:{back:e.receivingBack}})],1):e._e()],1)};E._withStripped=!0;var B={render:E,staticRenderFns:[]},U=B;var Z=!1;var q=a("VU/8")(M,U,!1,function(e){Z||a("iedT")},null,null);q.options.__file="src/views/archivesDailyManagement/archivesTransfer/ArchivesTransfer2.vue";t.default=q.exports},"6mcV":function(e,t,a){var i=a("gjuK");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("7d256ef2",i,!1,{})},"91gk":function(e,t,a){var i=a("x6cM");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("0933ca26",i,!1,{})},M4da:function(e,t,a){var i=a("z61r");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("b1c0b9ca",i,!1,{})},Q83h:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.outDialog /deep/ .el-dialog .el-dialog__body {\n  padding: 10px 0 0 0 !important;\n}\n.is-disabled {\n  background-color: #dcdfe6 !important;\n  border-color: #dcdfe6 !important;\n  color: #909399 !important;\n}\n.archiver-transfer-container .el-main {\n  background-color: #fff;\n  padding: 0 !important;\n}\n.archiver-transfer-container .el-main .title {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    padding: 10px;\n}\n.archiver-transfer-container .el-main .title .right {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n.archiver-transfer-container .el-main .title .right .el-button {\n        margin-left: 10px;\n}\n.archiver-transfer-container .el-main .material_page {\n    margin-top: 10px;\n    text-align: right;\n}\n",""])},R6sI:function(e,t,a){var i=a("aG6o");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("336b0208",i,!1,{})},aG6o:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.outDialog[data-v-4fd87f74] .el-dialog .el-dialog__body {\n  padding: 10px 0 0 0 !important;\n}\n.archives-add-container .opration2[data-v-4fd87f74] {\n  text-align: center;\n}\n.archives-add-container .footer[data-v-4fd87f74] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 10px 0;\n}\n",""])},gjuK:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n[data-v-5f45bdba] .el-dialog .el-dialog__body {\n  padding: 10px 0 0 0 !important;\n}\n.add-archives-container .add-archives-table .el-table__body tr.current-row > td[data-v-5f45bdba] {\n  background: #DCEBFA !important;\n  color: #606266;\n}\n.add-archives-container .opration[data-v-5f45bdba] {\n  margin: 0 0 10px 0;\n}\n.add-archives-container .opration2[data-v-5f45bdba] {\n  padding: 10px 0;\n  text-align: center;\n}\n",""])},iedT:function(e,t,a){var i=a("Q83h");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("6a216878",i,!1,{})},x6cM:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.archives-transfer-detail-container .receive_page[data-v-06c0c0d0] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  margin: 10px 0 -10px 0;\n}\n",""])},z61r:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.oprations[data-v-21fa3693] {\n  padding: 10px 0;\n}\n",""])}});