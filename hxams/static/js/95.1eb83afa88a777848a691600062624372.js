webpackJsonp([95],{DnaJ:function(e,a,t){var i=t("wzH+");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("rjj0")("dd82c93e",i,!1,{})},hIan:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("cMGX"),r=t("FJaO"),l={name:"ReadingFile",props:["applyObj"],components:{Pagination:i.a,ReadingArchivesList:r.default},data:function(){return{readingArchivesVisible:!1,pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},chioceObj:{},readForm:{},tableData:[]}},created:function(){this.applyObj?this.readForm=this.applyObj:this.readForm=this.$route.params,this.getFilesById()},mounted:function(){},computed:{},methods:{handleCurrentChange:function(e){this.pageObj.pageIndex=e,this.getFilesById()},PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getFilesById()},ReadingArchivesListBack:function(){this.readingArchivesVisible=!1,this.$refs.readingArchivesListChild.clearTimer(),this.getFilesById()},dialogBeforeClose:function(e){this.$refs.readingArchivesListChild.clearTimer(),this.readingArchivesVisible=!1},getFilesById:function(){var e=this;this.$axios({loading:{isShow:!0,target:".readingFile"},method:"get",url:this.API.getA01s,params:{id:this.readForm.borrowandreadid,stype:this.commonFun.recognitionFileType(this.readForm.rstype),pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(a){var t=a.data;"1"==t.code?(e.tableData=t.data.list,e.pageObj.total=t.data.total):e.$message({type:"error",message:"查询档案信息失败，请刷新重试！"})}).catch(function(a){e.$message({type:"error",message:"请求异常，请检查网络！"})})},lookFile:function(e,a){this.chioceObj=a,this.readingArchivesVisible=!0}}},n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"container readingFile"},[e.readForm.uAreaname?t("el-header",[e._v(e._s(e.readForm.uAreaname))]):e._e(),e._v(" "),t("el-main",{staticClass:"firstStep"},[t("el-form",{ref:"readForm",staticClass:"demo-ruleForm",attrs:{model:e.readForm,"label-width":"120px",size:"small"}},[t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"查阅目的"}},[t("el-input",{attrs:{readonly:""},model:{value:e.readForm.cyly,callback:function(a){e.$set(e.readForm,"cyly",a)},expression:"readForm.cyly"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"查阅时限(分钟)"}},[t("el-input",{attrs:{readonly:""},model:{value:e.readForm.readingtime,callback:function(a){e.$set(e.readForm,"readingtime",a)},expression:"readForm.readingtime"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"查阅开始时间"}},[t("el-input",{attrs:{readonly:""},model:{value:e.readForm.readingstarttime,callback:function(a){e.$set(e.readForm,"readingstarttime",a)},expression:"readForm.readingstarttime"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"查阅结束时间"}},[t("el-input",{attrs:{readonly:""},model:{value:e.readForm.readingendtime,callback:function(a){e.$set(e.readForm,"readingendtime",a)},expression:"readForm.readingendtime"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"详细描述"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},readonly:""},model:{value:e.readForm.describe,callback:function(a){e.$set(e.readForm,"describe",a)},expression:"readForm.describe"}})],1)],1),e._v(" "),e.readForm.rstype==e.API.constObj.fileTypeList[1].id?t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"授权说明"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},readonly:""},model:{value:e.readForm.powerdescribe,callback:function(a){e.$set(e.readForm,"powerdescribe",a)},expression:"readForm.powerdescribe"}})],1)],1):e._e()],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-table",{staticClass:"chioceFileTable",attrs:{data:e.tableData,"empty-text":"暂无数据，请先选择档案",border:"",height:"190px"}},[t("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.$index+1)+" ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"a0101",label:"姓名",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"a0104",label:"性别",width:"80"}}),e._v(" "),t("el-table-column",{attrs:{prop:"a0107",label:"出生年月",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"a0117",label:"民族",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"a0111a",label:"籍贯"}}),e._v(" "),t("el-table-column",{attrs:{prop:"isImpower",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[!0===a.row.isImpower?t("span",[e._v("已授权")]):!1===a.row.isImpower?t("span",[e._v("已拒绝")]):t("span",[e._v("处理中")])]}}])}),e._v(" "),e.readForm.rstype==e.API.constObj.fileTypeList[0].id?t("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[!0===a.row.isImpower?t("el-button",{attrs:{type:"text"},on:{click:function(t){e.lookFile(a.$index,a.row)}}},[e._v("查阅")]):e._e()]}}])}):e._e()],1),e._v(" "),t("Pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1)],1)],1),e._v(" "),e.readingArchivesVisible?t("el-dialog",{staticClass:"outDialog",attrs:{title:"阅览档案",visible:e.readingArchivesVisible,width:"95%","append-to-body":"","close-on-click-modal":!1,fullscreen:"","before-close":e.dialogBeforeClose},on:{"update:visible":function(a){e.readingArchivesVisible=a}}},[t("ReadingArchivesList",{ref:"readingArchivesListChild",attrs:{id:e.chioceObj.id},on:{ReadingArchivesListBack:e.ReadingArchivesListBack}})],1):e._e()],1)};n._withStripped=!0;var s={render:n,staticRenderFns:[]},o=s;var d=!1;var c=t("VU/8")(l,o,!1,function(e){d||t("DnaJ")},"data-v-3ac99b64",null);c.options.__file="src/views/archivalBorrowing/ReadingFile.vue";a.default=c.exports},"wzH+":function(e,a,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n.readingFile[data-v-3ac99b64] {\n  padding-top: 0;\n}\n.readingFile .el-header[data-v-3ac99b64], .readingFile .el-footer[data-v-3ac99b64] {\n    background-color: #E9EEF3;\n    color: #333;\n    text-align: center;\n    height: 60px;\n    line-height: 60px;\n    font-size: 26px;\n}\n.readingFile .el-row .el-col .chioceFileTable[data-v-3ac99b64] {\n    margin: 10px 0 10px 0;\n}\n",""])}});