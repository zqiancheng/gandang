webpackJsonp([82],{"45OD":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.fileDialog /deep/ .el-dialog .el-dialog__body {\n  padding: 10px 0 0 0 !important;\n}\n.material-batch-add {\n  padding: 0 !important;\n}\n.material-batch-add h3 {\n    font-size: 16px;\n    color: #fff;\n    background-color: #369FDD;\n    line-height: 38px;\n    text-indent: 1em;\n}\n.material-batch-add .el-table {\n    margin-top: 10px;\n}\n.material-batch-add .el-table__body tr.current-row > td {\n    background: #DCEBFA !important;\n    color: #606266;\n}\n.material-batch-add .dialog-footer {\n    padding: 10px 0;\n    text-align: center;\n}\n.material-batch-add .material_page {\n    /*margin-top: 10px;*/\n    text-align: right;\n}\n",""])},A0Cp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),r=a.n(i),s=a("cMGX"),n=a("JoXd"),o=a("a6hc"),l={name:"MaterialBatchAdd",props:["selectMaterial","isEdit"],data:function(){return{isBackObj:!0,source:"0",innerVisible:!1,pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},materialForm:{e01z211a:"",e01z227:"",e01z124:"",e01z224:1,e01z231:"",e01z211:"",e01z217:"",a0100:"",a0100s:"",id:""},personlist:[],showPersonList:[],a0101:"",a0111a:"",a0192a:"",rules:{e01z211a:[{required:!0,message:"请输入材料名称",trigger:"change"},{min:0,max:this.fieldsConfig.commonLength.eighty,message:"长度必须在0到 "+this.fieldsConfig.commonLength.eighty+"位字符之间",trigger:"blur"}],e01z227:[{required:!0,message:"请选择制成日期",trigger:"change"}],e01z211:[{required:!0,message:"请选择材料类号",trigger:"change"}],e01z124:[{required:!0,message:"请选择分数",trigger:"change"}],e01z224:[{required:!0,message:"请选中页数",trigger:"change"}],e01z231:[{min:0,max:this.fieldsConfig.commonLength.fiveHundred,message:"长度必须在0到 "+this.fieldsConfig.commonLength.fiveHundred+"位字符之间",trigger:"blur"}]},materialTypes:[],type:0,eList:[]}},created:function(){if(this.materialForm.e01z227=new Date,this.isEdit){this.materialForm=JSON.parse(r()(this.selectMaterial)),this.materialForm.e01z211=this.selectMaterial.sysId;var e={};e.a0101=this.materialForm.a0101,e.a0111a=this.materialForm.a0111a,e.a0192a=this.materialForm.a0192a,this.showPersonList.push(e)}},methods:{applyTypeCall:function(e){this.materialForm.e01z211=e.codeno,this.materialForm.e01z217=e.code},findA01sById:function(){var e=this;this.$axios({method:"get",url:this.API.findA01sById,params:{id:this.materialForm.id}}).then(function(t){var a=t.data;"1"==a.code?(e.pageObj.total=a.data.total,e.personlist=a.data.list,e.showPersonList=e.commonFun.localPaging(e.personlist,e.pageObj.pageIndex,e.pageObj.pageSize)):e.$message({type:"error",message:"获取数据失败，请刷新重试！"})}).catch(function(e){})},getChioceFiles:function(e){var t=this;this.personlist=this.commonFun.concatArray(this.personlist,e,"a0100"),this.pageObj.total=this.personlist.length,this.showPersonList=this.commonFun.localPaging(this.personlist,this.pageObj.pageIndex,this.pageObj.pageSize),this.innerVisible=!1,this.eList=[],this.personlist.forEach(function(e){var a={};a.a0100=e.a0100,a.a0101=e.a0101,t.eList.push(a)})},handleChangeScore:function(e){},handleChange:function(e){},save:function(e){var t=this;this.materialForm.e01z124>1e7?this.$message("输入份数过大，请重新输入！"):this.materialForm.e01z224>1e7?this.$message("输入页数过大，请重新输入！"):(this.materialForm.a0100s=this.commonFun.joinTgetherId(this.personlist,this.materialForm.a0100s,"a0100"),this.$refs[e].validate(function(e){if(!e)return!1;!t.isEdit&&t.eList.length<=0?t.$confirm("请选择干部人员！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0}):t.isEdit?t.eidtMaterial():t.doAddMaterial()}))},doAddMaterial:function(){var e=this,t={e01z124:this.materialForm.e01z124,e01z211:this.materialForm.e01z211,e01z211a:this.materialForm.e01z211a,e01z217:this.materialForm.e01z217,e01z224:this.materialForm.e01z224,e01z227:this.commonFun.dateFormat(this.materialForm.e01z227,"yyyyMMdd"),e01z231:this.materialForm.e01z231,sourcetype:0,eList:this.eList},a=r()(t);this.$axios({method:"post",url:this.API.addBulkMaterial,data:{resultJson:a}}).then(function(t){"1"==t.data.code?(""==e.materialForm.id?e.$message({message:"添加数据成功！",type:"success"}):e.$message({message:"编辑数据成功！",type:"success"}),e.$emit("back",e.materialForm)):e.$message({type:"error",message:"操作失败，请刷新重试！"})}).catch(function(e){})},eidtMaterial:function(){var e=this;this.$axios({method:"post",url:this.API.updateBulkMaterial,data:{e01z000:this.materialForm.e01z000,a0101:this.materialForm.a0101,a0100:this.materialForm.a0100,e01z124:this.materialForm.e01z124,e01z211:this.materialForm.e01z211,e01z211a:this.materialForm.e01z211a,e01z217:this.materialForm.e01z217,e01z224:this.materialForm.e01z224,e01z227:this.commonFun.dateFormat(this.materialForm.e01z227,"yyyyMMdd"),e01z231:this.materialForm.e01z231}}).then(function(t){"1"==t.data.code?(e.$message.success("编辑数据成功！"),e.$emit("back",e.materialForm)):e.$message({type:"error",message:"操作失败，请刷新重试！"})}).catch(function(e){})},deletesFn2:function(e,t){var a=this;this.$confirm("您确认删除这条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.personlist.splice(t,1),a.pageObj.total=a.personlist.length,a.showPersonList=a.commonFun.localPaging(a.personlist,a.pageObj.pageIndex,a.pageObj.pageSize)})},handleCurrentChange:function(e){this.pageObj.pageIndex=e,this.showPersonList=this.commonFun.localPaging(this.personlist,this.pageObj.pageIndex,this.pageObj.pageSize)},PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.showPersonList=this.commonFun.localPaging(this.personlist,this.pageObj.pageIndex,this.pageObj.pageSize)}},components:{pagination:s.a,fileSelection:n.a,materialTypeSelect:o.a}},m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"material-batch-add"},[a("el-form",{ref:"materialForm",staticStyle:{"margin-right":"15px"},attrs:{rules:e.rules,model:e.materialForm,"label-width":"130px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"材料名称：",prop:"e01z211a"}},[a("el-input",{model:{value:e.materialForm.e01z211a,callback:function(t){e.$set(e.materialForm,"e01z211a",t)},expression:"materialForm.e01z211a"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"材料类别：",prop:"e01z211"}},[a("materialTypeSelect",{attrs:{chioceOptionId:e.materialForm.e01z211,isBackObj:e.isBackObj,isAll:!1,isType:!1},on:{applyTypeCall:e.applyTypeCall}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"材料形成时间：",prop:"e01z227"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyyMMdd","value-format":"yyyyMMdd"},model:{value:e.materialForm.e01z227,callback:function(t){e.$set(e.materialForm,"e01z227",t)},expression:"materialForm.e01z227"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"份数：",prop:"e01z124",id:"e01z124","label-width":"80px"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:1e8},on:{change:e.handleChangeScore},model:{value:e.materialForm.e01z124,callback:function(t){e.$set(e.materialForm,"e01z124",t)},expression:"materialForm.e01z124"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"页数：",prop:"e01z224"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:1e8},on:{change:e.handleChange},model:{value:e.materialForm.e01z224,callback:function(t){e.$set(e.materialForm,"e01z224",t)},expression:"materialForm.e01z224"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注：",prop:"e01z231"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.materialForm.e01z231,callback:function(t){e.$set(e.materialForm,"e01z231",t)},expression:"materialForm.e01z231"}})],1)],1)],1)],1),e._v(" "),a("el-row",[e.isEdit?e._e():a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.innerVisible=!0}}},[e._v("添加人员")])],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"fileDialog",staticStyle:{height:"97%",overflow:"hidden"},attrs:{width:"55%","close-on-click-modal":!1,title:"添加人员",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("fileSelection",{attrs:{type:e.type,source:e.source,checkedlist:e.personlist},on:{GetChioceFiles:e.getChioceFiles}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.showPersonList,"highlight-current-row":"","empty-text":"您还没有添加数据，请先选择添加人员！",height:"180px"}},[a("el-table-column",{attrs:{label:"序号",align:"center","min-width":"6%"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1))]}}])}),e._v(" "),e.isEdit?e._e():a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",icon:"el-icon-close",circle:"",title:"删除"},on:{click:function(a){e.deletesFn2(t.row,t.$index)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"a0101",readonly:"isEdit",label:"姓名",width:"150px;","min-width":"11%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0111a",readonly:"isEdit",label:"籍贯",width:"200px;",align:"left","min-width":"23%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"a0192a",readonly:"isEdit",label:"工作单位及职务","show-overflow-tooltip":"","min-width":"50%"}})],1),e._v(" "),e.isEdit?e._e():a("div",{staticClass:"material_page"},[a("pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save("materialForm")}}},[e._v("保存")])],1)],1)};m._withStripped=!0;var c={render:m,staticRenderFns:[]},h=c;var p=!1;var d=a("VU/8")(l,h,!1,function(e){p||a("LZ+f")},null,null);d.options.__file="src/views/materialManage/materialBatchReceive/MaterialBatchAdd.vue";t.default=d.exports},"LZ+f":function(e,t,a){var i=a("45OD");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("221eacf7",i,!1,{})}});