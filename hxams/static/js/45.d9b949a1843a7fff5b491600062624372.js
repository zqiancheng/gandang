webpackJsonp([45],{"5rXD":function(e,t,a){var i=a("gQ9m");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("5dec1bda",i,!1,{})},MDG2:function(e,t,a){var i=a("fQKW");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("04f88942",i,!1,{})},OSSv:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n/deep/ .el-container {\n  border-top: 1px solid #ddd;\n}\n.outDialog /deep/ .el-dialog .el-dialog__body {\n  padding: 10px 0 0 0 !important;\n}\n.material-collection-container .my-header {\n  padding-top: 15px;\n  display: none;\n}\n.material-collection-container .el-main {\n  background-color: #fff;\n  padding: 0 !important;\n}\n.material-collection-container .el-main .material-collection-title {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    padding: 10px;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n}\n.material-collection-container .el-main .material-collection-title .material-collection-right {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n.material-collection-container .el-main .material-collection-title .material-collection-right .areaTree {\n        margin-right: 10px;\n}\n",""])},"Wne/":function(e,t,a){"use strict";var i=a("41Z1"),l=(a("g7ZD"),{name:"userGroupTreeSelect2",props:["defaultOptions"],data:function(){return{selectedOptions:[],treeProps:{value:"id",label:"name",children:"children"},oldTreeList:[],treeList:[]}},created:function(){this.getData()},mounted:function(){},methods:{handleChange:function(e){var t="";e&&e.length>0&&(t=e[e.length-1]);var a=this.findObjById(t);this.$emit("UserGroupTreeSelectCall",a)},findObjById:function(e){for(var t={},a=0;a<this.oldTreeList.length;a++)if(e==this.oldTreeList[a].id){t=this.oldTreeList[a];break}return t},getData:function(){var e=this,t=this;this.$axios({loading:{isShow:!1},method:"get",url:this.API.findUserOrganizationTree,params:{type:1}}).then(function(a){var i=a.data;if("1"==i.code){t.oldTreeList=i.data,t.treeList=t.commonFun.toTreeData(i.data);var l={};if(t.defaultOptions){var o=t.commonFun.findTreeNodeById(t.oldTreeList,t.defaultOptions,{childKey:"id",fatherKey:"pId"});t.selectedOptions=t.commonFun.createArrIdAndReverse(o,"id"),l=e.findObjById(t.defaultOptions)}else""==t.defaultOptions?l={}:(t.selectedOptions.push(t.treeList[0].id),l=t.treeList[0]);e.$emit("UserGroupTreeSelectCall",l)}else t.$message({type:"error",message:"获取用户组树形下拉框数据失败，请刷新重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})}}}),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userGroupTreeSelect"},[a("el-cascader",{attrs:{placeholder:"请选择","expand-trigger":"hover",options:e.treeList,"change-on-select":!0,props:e.treeProps,clearable:!0,"show-all-levels":!1,clearable:""},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1)};o._withStripped=!0;var n={render:o,staticRenderFns:[]},r=n;var c=!1;var s=a("VU/8")(l,r,!1,function(e){c||a("MDG2")},"data-v-33786154",null);s.options.__file="src/components/UserGroupTreeSelect2.vue";var d=s.exports,p={name:"AddMaterialCollection",components:{areaTreeSelect:i.a,userGroupTreeSelect:d},props:["isArchivesCollection"],data:function(){return{defaultOptions:"",materialCollectionForm:{receiveareacode:"",title:"",content:"",departmentId:""},rules:{receiveareacode:[{required:!0,message:"请选择接收单位",trigger:"blur"}],departmentId:[{required:!0,message:"请选择接收部门",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:0,max:66,message:"长度必须在0到200位字符之间",trigger:"blur"}],content:[{required:!0,message:"请输入催收内容",trigger:"blur"},{min:0,max:333,message:"长度必须在0到1000位字符之间",trigger:"blur"}]}}},created:function(){void 0===this.isArchivesCollection&&(this.isArchivesCollection=!1)},methods:{UserGroupTreeSelectCall:function(e){this.materialCollectionForm.departmentId=e.id},getSelect:function(e){e&&(this.materialCollectionForm.receiveareacode=e.code),this.receiveareacode=this.materialCollectionForm.receiveareacode,this.uAreacode=this.$store.state.user.uAreacode},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(1==t.isArchivesCollection){var a=t.$store.state.user.uAreacode;if(t.materialCollectionForm.receiveareacode===a)return void t.$confirm("不能对本单位进行催收，请选择正确单位！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})}t.saveForNet()})},saveForNet:function(){var e=this,t="";t=this.isArchivesCollection?this.API.addfileOnlinePretrial:this.API.addMaterialCollection,this.$axios({method:"post",url:t,data:{receiveareacode:this.materialCollectionForm.receiveareacode,title:this.materialCollectionForm.title,content:this.materialCollectionForm.content,departmentId:this.materialCollectionForm.departmentId}}).then(function(t){"1"==t.data.code?(e.$message.success("添加数据成功！"),e.resetForm(),e.isArchivesCollection?e.$emit("backAddMC","success"):e.$emit("backAdd","success")):e.$message.error("添加数据失败，请刷新重试！")}).catch(function(e){})},cancle:function(){this.resetForm(),this.isArchivesCollection?this.$emit("backAddMC",""):this.$emit("backAdd","")},resetForm:function(){this.$refs.addMaterialCollection.resetFields()}}},m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-material-collection-container"},[a("el-form",{ref:"addMaterialCollection",attrs:{rules:e.rules,model:e.materialCollectionForm,"label-width":"110px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"接收单位",prop:"receiveareacode"}},[a("areaTreeSelect",{staticClass:"areaTree",staticStyle:{width:"100%"},attrs:{defaultOptions:e.defaultOptions,title:e.title,readonly:""},on:{areaTreeSelectCall:e.getSelect},model:{value:e.materialCollectionForm.receiveareacode,callback:function(t){e.$set(e.materialCollectionForm,"receiveareacode",t)},expression:"materialCollectionForm.receiveareacode"}})],1)],1),e._v(" "),e.receiveareacode===e.uAreacode&&0==this.isArchivesCollection?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"接收部门",prop:"departmentId"}},[a("userGroupTreeSelect",{staticClass:"areaTree",staticStyle:{width:"100%"},attrs:{defaultOptions:e.defaultOptions},on:{"v-model":e.materialCollectionForm.departmentId,UserGroupTreeSelectCall:e.UserGroupTreeSelectCall}})],1)],1):a("el-col",{attrs:{span:24}}),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.materialCollectionForm.title,callback:function(t){e.$set(e.materialCollectionForm,"title",t)},expression:"materialCollectionForm.title"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"催收内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:e.materialCollectionForm.content,callback:function(t){e.$set(e.materialCollectionForm,"content",t)},expression:"materialCollectionForm.content"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save("addMaterialCollection")}}},[e._v("发送")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.cancle}},[e._v("取消")])],1)],1)};m._withStripped=!0;var u={render:m,staticRenderFns:[]},h=u;var f=!1;var g=a("VU/8")(p,h,!1,function(e){f||a("5rXD")},null,null);g.options.__file="src/views/materialManage/materialCollection/AddMaterialCollection.vue";t.a=g.exports},dlpa:function(e,t,a){var i=a("OSSv");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("27363522",i,!1,{})},fQKW:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.el-scrollbar .el-scrollbar__view .el-select-dropdown__item[data-v-33786154] {\n  height: auto;\n  padding: 0;\n}\n.el-select-dropdown__item.selected[data-v-33786154] {\n  font-weight: normal;\n}\nul li > .el-tree .el-tree-node__content[data-v-33786154] {\n  height: auto;\n}\n.el-tree-node__label[data-v-33786154] {\n  font-weight: normal;\n}\n.el-tree > .is-current .el-tree-node__label[data-v-33786154] {\n  color: #409EFF;\n  font-weight: 700;\n}\n.el-tree > .is-current .el-tree-node__children .el-tree-node__label[data-v-33786154] {\n  color: #606266;\n  font-weight: normal;\n}\n",""])},gQ9m:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.add-material-collection-container .footer {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding-bottom: 10px;\n}\n.add-material-collection-container /deep/ .el-cascader {\n  display: inline !important;\n}\n.add-material-collection-container /deep/ .el-cascader__label {\n  position: absolute;\n  left: 0;\n  top: -4px;\n  height: 40px;\n  padding: 0 25px 0 15px;\n  color: #606266;\n  width: 100%;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n  text-align: left;\n  font-size: inherit;\n}\n",""])},me5K:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("icmf"),l=a("41Z1"),o=a("Wne/"),n={name:"MaterialCollection",components:{hxTables:i.a,areaTreeSelect:l.a,addMaterialCollection:o.a},data:function(){return{addmaterial_collection_popUp:!1,defaultOptions:"",receiveareacode:"",title:"发往单位",tableHeight:0,columns:[{index:!0,prop:"tableindex",label:"序号",width:"6%",align:"center"},{prop:"receiveor",label:"发往单位",showOverflowTooltip:!0,align:"left",width:"24%"},{prop:"title",label:"标题",showOverflowTooltip:!0,align:"left",width:"10%"},{prop:"content",label:"催收内容",showOverflowTooltip:!0,align:"left",width:"40%"},{prop:"statusValue",label:"状态",width:"10%"},{prop:"e01z208",label:"发件人",width:"10%",align:"left"}],tableData:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},options:{mutiSelect:!1,index:!1,loading:!1,initTable:!0,border:!1,maxHeight:0,indexWidth:"6%"}}},watch:{tableData:{handler:function(e){this.tableHeight=window.innerHeight-this.$refs.table.$el.offsetTop-50-52-84,this.options.maxHeight=this.tableHeight}}},methods:{fetchTableData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".material-collection-container"},method:"post",url:this.API.queryAllCollection,data:{receiveareacode:this.receiveareacode,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;"1"==a.code?(e.tableData=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"获取数据失败，请刷新重试！"})}).catch(function(e){})},addMaterialCollection:function(){this.addmaterial_collection_popUp=!0},getAddBack:function(e){"success"===e&&this.fetchTableData(),this.addmaterial_collection_popUp=!1},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.fetchTableData()},getSelect:function(e){e&&(this.receiveareacode=e.code)}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"material-collection-container"},[a("el-header",{staticClass:"my-header",staticStyle:{height:"45px"}},[e._v("材料催收")]),e._v(" "),a("el-main",[a("div",{staticClass:"material-collection-title"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addMaterialCollection}},[e._v("添加")]),e._v(" "),a("div",{staticClass:"material-collection-right"},[a("areaTreeSelect",{staticClass:"areaTree",attrs:{defaultOptions:e.defaultOptions,title:e.title},on:{areaTreeSelectCall:e.getSelect}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1),e._v(" "),a("hxTables",{ref:"table",attrs:{pageObj:e.pageObj,columns:e.columns,dataSource:e.tableData,options:e.options,fetch:e.fetchTableData}}),e._v(" "),e.addmaterial_collection_popUp?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{"append-to-body":"",title:"添加","close-on-click-modal":!1,width:"40%","max-height":"60%",visible:e.addmaterial_collection_popUp},on:{"update:visible":function(t){e.addmaterial_collection_popUp=t}}},[a("addMaterialCollection",{on:{backAdd:e.getAddBack}})],1):e._e()],1)],1)};r._withStripped=!0;var c={render:r,staticRenderFns:[]},s=c;var d=!1;var p=a("VU/8")(n,s,!1,function(e){d||a("dlpa")},null,null);p.options.__file="src/views/materialManage/materialCollection/MaterialCollection.vue";t.default=p.exports}});