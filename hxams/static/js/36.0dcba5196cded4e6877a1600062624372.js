webpackJsonp([36],{"3bfu":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.approvelHistoryList[data-v-cb46708e] {\n  width: 100%;\n}\n.approvelHistoryList .el-steps[data-v-cb46708e] {\n    margin-bottom: 20px;\n}\n",""])},B5y8:function(e,t,a){var i=a("l3XI");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("cca2d78e",i,!1,{})},IN91:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.fileApprove[data-v-7f84b5d7] {\n  min-width: 1126px;\n}\n.fileApprove .container[data-v-7f84b5d7] {\n    padding: 0 !important;\n    border-left: none;\n    border-right: none;\n}\n.fileApprove .container .el-main[data-v-7f84b5d7] {\n      padding: 0;\n}\n.fileApprove[data-v-7f84b5d7] .el-tabs__nav-wrap::after {\n    height: 1px;\n}\n",""])},PMb3:function(e,t,a){var i=a("vSTv");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("41187d32",i,!1,{})},T3FD:function(e,t,a){"use strict";var i={name:"ApprovelHistoryList",components:{},props:["applyId"],data:function(){return{tableData:[],flowData:[]}},created:function(){},mounted:function(){this.getData()},computed:{},methods:{getData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".approvelHistoryList"},method:"get",url:this.API.approvaled,params:{id:this.applyId}}).then(function(t){var a=t.data;"1"==a.code?(e.tableData=a.data.flows,e.flowData=a.data.flow,e.flowData.push({gw:"",name:"完成"})):e.$message({type:"error",message:"查询审批历史列表失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})}}},o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"approvelHistoryList"},[a("el-steps",{attrs:{active:e.flowData.length,"align-center":"","process-status":"finish"}},e._l(e.flowData,function(e,t){return a("el-step",{key:t,attrs:{title:e.name,description:e.gw}})}),1),e._v(" "),a("el-table",{staticClass:"table",attrs:{data:e.tableData,height:"250px"}},[a("el-table-column",{attrs:{prop:"workflowstage",label:"流程阶段",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"approvestep",label:"具体审批步骤",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"操作人类型",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gw",label:"操作人岗位",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"approvedate",label:"审核时间",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"approver",label:"审核人",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sStatue",label:"状态",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sResult",label:"结果",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reason",label:"批注","min-width":"80","show-overflow-tooltip":""}})],1)],1)};o._withStripped=!0;var l={render:o,staticRenderFns:[]},s=l;var n=!1;var r=a("VU/8")(i,s,!1,function(e){n||a("fiN7")},"data-v-cb46708e",null);r.options.__file="src/views/archivalBorrowing/ApprovelHistoryList.vue";t.a=r.exports},fiN7:function(e,t,a){var i=a("3bfu");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("2f07ea5a",i,!1,{})},l3XI:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.applyScopeSelect .el-select[data-v-5cc9cb52] {\n  width: 100%;\n}\n",""])},r783:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("g7ZD");var i={name:"ApplyScopeSelect",props:["chioceOptionId"],data:function(){return{dataList:[],chioceId:this.chioceOptionId}},computed:{},created:function(){this.getData()},methods:{changeChioceId:function(e){this.chioceId=e,this.$emit("ApplyScopeSelectCall",e)},getData:function(){var e=this;this.$axios({loading:{isShow:!1},method:"get",url:this.API.getDataList,params:{id:this.API.constObj.applyScopeId}}).then(function(t){var a=t.data;"1"==a.code?(e.dataList=a.data,self.defaultOptions&&self.defaultOptions.length>0&&(self.selectedOptions=self.defaultOptions,e.$emit("ApplyScopeSelectCall",self.selectedOptions))):e.$message({type:"error",message:"获取查借阅范围下拉框数据失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})}}},o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"applyScopeSelect"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择查借阅范围"},on:{change:e.changeChioceId},model:{value:e.chioceId,callback:function(t){e.chioceId=t},expression:"chioceId"}},e._l(e.dataList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)};o._withStripped=!0;var l={render:o,staticRenderFns:[]},s=l;var n=!1;var r=a("VU/8")(i,s,!1,function(e){n||a("B5y8")},"data-v-5cc9cb52",null);r.options.__file="src/components/ApplyScopeSelect.vue";var p=r.exports,c=a("PODl"),d=a("cMGX"),h=a("T3FD"),m=a("KmTd"),u=a("42XM"),v={name:"ApproveList",props:["tableType","mainHeight"],components:{Pagination:d.a,ApplyScopeSelect:p,ReadReasonsSelect:c.a,ApprovelHistoryList:h.a,ApplyFileDetail:m.a,ApproveAlert:u.a},data:function(){return{authorizationType:this.tableType,tableData:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},applyObj:{},multipleSelection:[],approvelVisible:!1,detailVisible:!1,approvelHistoryVisible:!1,dialogTitle:"查借申请",searchForm:{userName:"",appointDate:"",startDate:"",endDate:"",applyStatus:"",purpose:"",describe:""}}},created:function(){this.getData()},mounted:function(){this.tableHeight=this.mainHeight-75-1*this.$refs.multipleTable.$el.offsetHeight-45},watch:{mainHeight:function(e,t){this.mainHeight=e,this.tableHeight=this.mainHeight-75-1*this.$refs.multipleTable.$el.offsetHeight-45}},methods:{PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getData()},ReadReasonsCall:function(e){this.searchForm.purpose=e},ApplyScopeCall:function(e){this.searchForm.applyStatus=e},ApproveAlertCall:function(e){this.approvelVisible=!1,e&&this.search()},startDateChange:function(){var e=this.searchForm.startDate,t=this.searchForm.endDate;e&&e.length>0&&t&&t.length>0&&(new Date(e).getTime()>new Date(t).getTime()&&(this.$message({type:"error",message:"申请开始日期不能大于结束日期!"}),this.searchForm.startDate=""))},endDateChange:function(){var e=this.searchForm.startDate,t=this.searchForm.endDate;e&&e.length>0&&t&&t.length>0&&(new Date(e).getTime()>new Date(t).getTime()&&(this.$message({type:"error",message:"申请开始日期不能大于结束日期!"}),this.searchForm.endDate=""))},getData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".approveList"},method:"post",url:this.API.approvals,data:{pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize,type:this.searchForm.applyStatus,userName:this.searchForm.userName,startDate:this.searchForm.startDate,endDate:this.searchForm.endDate,purpose:this.searchForm.purpose,describe:this.searchForm.describe,aType:this.tableType}}).then(function(t){var a=t.data;"1"==a.code?(e.tableData=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"查询失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},dateFormat:function(e,t,a,i){return this.commonFun.dateFormat(a,"yyyy-MM-dd HH:mm")},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.getData()},handleDetail:function(e,t){this.applyObj=this.tableData[e],this.detailVisible=!0},showApproveldialog:function(e,t){this.applyObj=this.tableData[e],this.approvelVisible=!0},handleHistory:function(e,t){this.applyObj=this.tableData[e],this.approvelHistoryVisible=!0},approvelRequest:function(){var e=this,t=this;this.$refs.approvelForm.validate(function(a){a&&e.setApprovel(t)})},setApprovel:function(e){var t=this;e.$axios({loading:{isShow:!0,target:".approveList"},method:"post",url:e.API.approvaling,data:{id:e.applyObj.id,result:e.approvelForm.result,reason:e.approvelForm.reason}}).then(function(a){"1"==a.data.code?(e.approvelForm={result:null,reason:""},t.approvelVisible=!1,e.getData(),e.$message({type:"success",message:"审批处理成功!"})):e.$message({type:"error",message:"审批处理失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})}}},g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"approveList"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",[a("el-input",{staticClass:"inputWidth120",attrs:{placeholder:"输入申请人"},model:{value:e.searchForm.userName,callback:function(t){e.$set(e.searchForm,"userName",t)},expression:"searchForm.userName"}})],1),e._v(" "),a("el-form-item",[a("el-date-picker",{staticStyle:{width:"170px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"申请开始日期"},on:{change:e.startDateChange},model:{value:e.searchForm.startDate,callback:function(t){e.$set(e.searchForm,"startDate",t)},expression:"searchForm.startDate"}})],1),e._v(" "),a("el-form-item",[a("el-date-picker",{staticStyle:{width:"170px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"申请结束日期"},on:{change:e.endDateChange},model:{value:e.searchForm.endDate,callback:function(t){e.$set(e.searchForm,"endDate",t)},expression:"searchForm.endDate"}})],1),e._v(" "),a("el-form-item",[a("ReadReasonsSelect",{staticClass:"inputWidth190",on:{ReadReasonsCall:e.ReadReasonsCall}})],1),e._v(" "),a("el-form-item",[a("ApplyScopeSelect",{staticClass:"inputWidth150",on:{ApplyScopeSelectCall:e.ApplyScopeCall}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("查询")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,height:e.tableHeight}},[a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",icon:"iconfont gd-chakan",circle:"",title:"详细"},on:{click:function(a){e.handleDetail(t.$index,t.row)}}}),e._v(" "),1==e.tableType?a("el-button",{attrs:{type:"success",icon:"iconfont gd-chengchangdanganshenhe-",circle:"",title:"审批"},on:{click:function(a){e.showApproveldialog(t.$index,t.row)}}}):e._e(),e._v(" "),a("el-button",{attrs:{type:"success",icon:"iconfont gd-lishishuju",circle:"",title:"审批历史"},on:{click:function(a){e.handleHistory(t.$index,t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1)+" ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"申请人",width:"100","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"cyly",label:"查借阅理由",sortable:"",width:"160","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"u_createdate",label:"申请时间",sortable:"",width:"140",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"状态",sortable:"",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"aData",label:"申请档案集合","min-width":"140","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"describe",label:"详细描述","min-width":"100","show-overflow-tooltip":""}})],1),e._v(" "),a("Pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1)],1),e._v(" "),e.detailVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"详细",visible:e.detailVisible,width:"65%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.detailVisible=t}}},[a("ApplyFileDetail",{attrs:{chioceObj:e.applyObj}})],1):e._e(),e._v(" "),e.approvelHistoryVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"审批历史",visible:e.approvelHistoryVisible,width:"68%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.approvelHistoryVisible=t}}},[a("ApprovelHistoryList",{attrs:{applyId:e.applyObj.id}})],1):e._e(),e._v(" "),e.approvelVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"审批",visible:e.approvelVisible,width:"350px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.approvelVisible=t}}},[a("ApproveAlert",{attrs:{applyId:e.applyObj.id},on:{ApproveAlertCall:e.ApproveAlertCall}})],1):e._e()],1)};g._withStripped=!0;var f={render:g,staticRenderFns:[]},b=f;var y=!1;var w=a("VU/8")(v,b,!1,function(e){y||a("PMb3")},"data-v-78207031",null);w.options.__file="src/views/archivalBorrowing/ApproveList.vue";var D={name:"FileApprove",components:{ApproveList:w.exports},data:function(){return{mainHeight:"",activeName:"fileApprove",tabsData:[{label:"待审批列表",name:"fileApprove",tableType:"1"},{label:"已审批列表",name:"quickAuthorization",tableType:"2"}]}},created:function(){},mounted:function(){this.mainHeight=window.innerHeight-this.$refs.elMain.$el.offsetTop},computed:{},methods:{}},_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fileApprove"},[a("div",{staticClass:"container"},[a("el-main",{ref:"elMain",style:{height:e.mainHeight+"px"}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabsData,function(t){return a("el-tab-pane",{attrs:{label:t.label,name:t.name}},[e.activeName==t.name?a("ApproveList",{attrs:{mainHeight:e.mainHeight,tableType:t.tableType}}):e._e()],1)}),1)],1)],1)])};_._withStripped=!0;var x={render:_,staticRenderFns:[]},A=x;var S=!1;var F=a("VU/8")(D,A,!1,function(e){S||a("rFdC")},"data-v-7f84b5d7",null);F.options.__file="src/views/archivalBorrowing/FileApprove.vue";t.default=F.exports},rFdC:function(e,t,a){var i=a("IN91");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("1579b499",i,!1,{})},vSTv:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\nel-dialog .del-dialog-cnt[data-v-78207031] {\n  font-size: 16px;\n  text-align: center;\n}\n.approveList[data-v-78207031] {\n  width: 100%;\n  font-size: 14px;\n}\n.approveList .el-form[data-v-78207031] {\n    padding: 0 20px;\n}\n.approveList .inputWidth120[data-v-78207031] {\n    width: 120px;\n}\n.approveList .inputWidth240[data-v-78207031] {\n    width: 240px;\n}\n.approveList .inputWidth190[data-v-78207031] {\n    width: 190px;\n}\n.approveList .inputWidth150[data-v-78207031] {\n    width: 150px;\n}\n.approveList .el-form-item--mini.el-form-item[data-v-78207031],\n  .approveList .el-form-item--small.el-form-item[data-v-78207031] {\n    margin-bottom: 14px;\n}\n[data-v-78207031] .el-dialog__body {\n  padding: 20px 0 20px !important;\n}\n",""])}});