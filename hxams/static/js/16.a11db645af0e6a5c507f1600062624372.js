webpackJsonp([16],{"/6IZ":function(e,t,a){var o=a("fHkj");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("0c3c2008",o,!1,{})},"6+5n":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.selectUser[data-v-43e7f4d2] {\n  width: 100%;\n}\n.selectUser .el-form[data-v-43e7f4d2] {\n    padding: 0 20px;\n}\n",""])},"8qbE":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\nel-dialog .del-dialog-cnt[data-v-78b1ddb9] {\n  font-size: 16px;\n  text-align: center;\n}\n.roleManagement[data-v-78b1ddb9] {\n  width: 100%;\n  font-size: 14px;\n}\n.roleManagement .container[data-v-78b1ddb9] {\n    padding: 0 !important;\n    border-left: none;\n    border-right: none;\n}\n.roleManagement .container .demo-form-inline[data-v-78b1ddb9] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      padding: 10px 0 10px 10px;\n}\n.roleManagement .container .demo-form-inline .el-input[data-v-78b1ddb9] {\n        width: 180px;\n        padding: 0 10px 0 10px;\n}\n.roleManagement .container .el-table .el-button[data-v-78b1ddb9] {\n      color: #FFFFFF !important;\n}\n.roleManagement .container .el-table .gray[data-v-78b1ddb9] {\n      background-color: #dcdfe6;\n      border-color: #dcdfe6;\n      color: #909399;\n}\n.roleManagement .container .el-table .red[data-v-78b1ddb9] {\n      color: #ff0000;\n}\n.roleManagement .container .pagination[data-v-78b1ddb9] {\n      margin: 0;\n}\n",""])},"9T7M":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.setRolePower[data-v-baab5f66] {\n  padding-bottom: 10px;\n}\n.setRolePower .el-row[data-v-baab5f66] {\n    padding: 0 0 10px 10px;\n}\n.setRolePower .el-tree[data-v-baab5f66] {\n    height: 300px;\n    overflow-y: auto;\n}\n",""])},BHTu:function(e,t,a){var o=a("zSXf");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("5dad4040",o,!1,{})},MrZK:function(e,t,a){var o=a("6+5n");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("466f2754",o,!1,{})},OLXY:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.getRolePower[data-v-0fd3e9d9] {\n  padding-bottom: 10px;\n}\n.getRolePower .el-tree[data-v-0fd3e9d9] {\n    height: 300px;\n    overflow-y: auto;\n}\n",""])},Sf92:function(e,t,a){var o=a("qUq4");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("50075148",o,!1,{})},TOU7:function(e,t,a){var o=a("8qbE");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("75a9476f",o,!1,{})},VubZ:function(e,t,a){var o=a("XIfy");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("d3d2ef30",o,!1,{})},XIfy:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\nel-dialog .del-dialog-cnt[data-v-5386a333] {\n  font-size: 16px;\n  text-align: center;\n}\n[data-v-5386a333] .el-dialog__body {\n  padding: 20px 0 20px !important;\n}\n.usersInRole[data-v-5386a333] {\n  width: 100%;\n  font-size: 14px;\n}\n.usersInRole .demo-form-inline[data-v-5386a333] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    padding: 0 0 10px 10px;\n}\n.usersInRole .demo-form-inline .el-input[data-v-5386a333] {\n      width: 180px;\n      margin: 0 10px;\n}\n.gray[data-v-5386a333] {\n  color: #dcdfe6;\n}\n.red[data-v-5386a333] {\n  color: #ff0000;\n}\n",""])},Z2hJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("cMGX"),s=a("mvHQ"),i=a.n(s),n=a("Hh1l"),r=(a("g7ZD"),{name:"RoleStatusSelect",props:["chioceOptionId"],data:function(){return{dataList:[],chioceId:""}},computed:{},created:function(){this.getData()},methods:{changeChioceId:function(e){this.chioceId=e,this.$emit("RoleStatusCall",e)},getData:function(){var e=this;this.$axios({loading:{isShow:!1},method:"get",url:this.API.getDataList,params:{id:this.API.constObj.roleStatusId}}).then(function(t){var a=t.data;"1"==a.code?(e.dataList=a.data,e.chioceOptionId?(e.chioceId=e.chioceOptionId,e.$emit("RoleStatusCall",e.chioceId)):(e.chioceId=a.data[0].id,e.$emit("RoleStatusCall",e.chioceId))):e.$message({type:"error",message:"获取角色状态下拉框数据失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})}}}),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roleStatusSelect"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择状态"},on:{change:e.changeChioceId},model:{value:e.chioceId,callback:function(t){e.chioceId=t},expression:"chioceId"}},e._l(e.dataList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)};l._withStripped=!0;var c={render:l,staticRenderFns:[]},d=c;var h=!1;var u=a("VU/8")(r,d,!1,function(e){h||a("BHTu")},"data-v-193d4558",null);u.options.__file="src/components/RoleStatusSelect.vue";var p={name:"AddOrEditRole",components:{RoleStatusSelect:u.exports,roleBenchNameSelect:n.a},props:["roleObj"],data:function(){return{roleForm:{id:"",name:"",workbenchid:"",remarks:"",status:"",workbenchName:""},pageType:"add",rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:15,message:"角色名称 2-15 个字符",trigger:"blur"}],workbenchid:[{required:!0,message:"请选择工作台",trigger:"blur"}],status:[{required:!0,message:"请选择角色状态",trigger:"blur"}],remarks:[{required:!1,message:"请输入备注",trigger:"blur"},{min:0,max:100,message:"备注在 0-100 个字符",trigger:"blur"}]}}},created:function(){"{}"!=i()(this.roleObj)?(this.pageType="edit",this.setFormData()):this.pageType="add"},mounted:function(){},computed:{},methods:{roleBenchNameSelectCall:function(e){this.roleForm.workbenchid=e.id},RoleStatusCall:function(e){this.roleForm.status=e},cancelOpt:function(){this.resetForm(),this.$emit("addOrEditRoleCallBack",!1)},addRoleGroup:function(e){delete this.roleForm.id;var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$axios({loading:{isShow:!0,target:".addOrEditRole"},method:"post",url:t.API.saveOrUpdateRole,data:t.roleForm}).then(function(e){"1"==e.data.code?(t.$message({type:"success",message:"添加角色成功!"}),t.resetForm(),t.$emit("addOrEditRoleCallBack",!0)):t.$message({type:"error",message:"添加角色失败，请退出重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})})},editRoleGroup:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$axios({loading:{isShow:!0,target:".addOrEditRole"},method:"post",url:t.API.saveOrUpdateRole,data:t.roleForm}).then(function(e){"1"==e.data.code?(t.$message({type:"success",message:"修改角色信息成功!"}),t.resetForm(),t.$emit("addOrEditRoleCallBack",!0)):t.$message({type:"error",message:"修改角色信息失败，请退出重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})})},setFormData:function(){this.roleForm.id=this.roleObj.id,this.roleForm.name=this.roleObj.name,this.roleForm.workbenchid=this.roleObj.workbenchid,this.roleForm.remarks=this.roleObj.remarks,this.roleForm.status=this.roleObj.status,this.roleForm.workbenchName=this.roleObj.workbenchName},resetForm:function(){this.pageType="add",this.$refs.roleForm.resetFields()}}},g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addOrEditRole"},[a("el-form",{ref:"roleForm",staticClass:"demo-ruleForm",attrs:{model:e.roleForm,rules:e.rules,"label-width":"100px",size:"small"}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{minLength:"2",maxLength:"15",placeholder:"请输入角色名称(2~15字符)"},model:{value:e.roleForm.name,callback:function(t){e.$set(e.roleForm,"name",t)},expression:"roleForm.name"}})],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"工作台",prop:"workbenchid"}},[a("roleBenchNameSelect",{attrs:{chioceOptionId:e.roleForm.workbenchid},on:{roleBenchNameSelectCall:e.roleBenchNameSelectCall}})],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"角色状态",prop:"status"}},[a("RoleStatusSelect",{attrs:{chioceOptionId:e.roleForm.status},on:{RoleStatusCall:e.RoleStatusCall}})],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:7},maxLength:"100",placeholder:"请输入备注(0~100个字符)"},model:{value:e.roleForm.remarks,callback:function(t){e.$set(e.roleForm,"remarks",t)},expression:"roleForm.remarks"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["add"==e.pageType?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addRoleGroup("roleForm")}}},[e._v("保存")]):"edit"==e.pageType?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editRoleGroup("roleForm")}}},[e._v("保存")]):e._e(),e._v(" "),a("el-button",{on:{click:e.cancelOpt}},[e._v("取 消")])],1)],1)};g._withStripped=!0;var m={render:g,staticRenderFns:[]},f=m;var b=!1;var v=a("VU/8")(p,f,!1,function(e){b||a("/6IZ")},"data-v-9a028518",null);v.options.__file="src/views/userRightsManagement/AddOrEditRole.vue";var w=v.exports,y={name:"SelectUser",props:["roleInfo"],components:{UserGroupTreeSelect:a("/kpT").a,Pagination:o.a},data:function(){return{tableData:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},multipleSelection:[],searchForm:{userGroupId:"",nameAndPinyin:""}}},created:function(){},mounted:function(){this.getData()},computed:{},methods:{PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getData()},UserGroupTreeSelectCall:function(e){e&&e.id?this.searchForm.userGroupId=e.id:this.searchForm.userGroupId=""},getData:function(){var e=this;this.$axios({method:"post",url:this.API.findUserListByRoleIdPage,data:{id:this.roleInfo.id,organizationIDS:this.searchForm.userGroupId,cn:this.searchForm.nameAndPinyin,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;"1"==a.code?(e.tableData=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"查询用户列表失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.getData()},confirmChioce:function(){var e=this.multipleSelection;e.length<1?this.$message({message:"请至少选中一条数据!",type:"warning"}):(this.$emit("SelectUserCall",e),this.$refs.multipleTable.clearSelection())},handleSelectionChange:function(e){this.multipleSelection=e}}},x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"selectUser"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.confirmChioce}},[e._v("确定")])],1),e._v(" "),a("el-form-item",[a("UserGroupTreeSelect",{attrs:{defaultOptions:e.searchForm.userGroupId},on:{UserGroupTreeSelectCall:e.UserGroupTreeSelectCall},model:{value:e.searchForm.userGroupId,callback:function(t){e.$set(e.searchForm,"userGroupId",t)},expression:"searchForm.userGroupId"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"输入姓名或账户"},model:{value:e.searchForm.nameAndPinyin,callback:function(t){e.$set(e.searchForm,"nameAndPinyin",t)},expression:"searchForm.nameAndPinyin"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,height:"250px"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1)+" ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cn",label:"姓名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uid",label:"账户",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"stationName",label:"岗位","min-width":"150","show-overflow-tooltip":""}})],1),e._v(" "),a("Pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1)};x._withStripped=!0;var _={render:x,staticRenderFns:[]},R=_;var I=!1;var S=a("VU/8")(y,R,!1,function(e){I||a("MrZK")},"data-v-43e7f4d2",null);S.options.__file="src/components/SelectUser.vue";var $=S.exports,k={name:"UsersInRole",props:["roleObj"],components:{Pagination:o.a,SelectUser:$},data:function(){return{tableData:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},userObject:{},chioceUserList:[],selectUserVisible:!1,searchForm:{cn:""}}},created:function(){},mounted:function(){this.getData()},computed:{},methods:{PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getData()},SelectUserCall:function(e){this.selectUserVisible=!1;var t=this.concatParams(e,"id");this.batchAddUsers(t)},handleSelectionChange:function(e){this.chioceUserList=e},batchDeleteUsers:function(){var e=this;0!==this.chioceUserList.length?this.$confirm("确定要批量删除选中的用户吗?","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.concatParams(e.chioceUserList,"userId");e.delUser(t)}).catch(function(){}):this.$message({message:"请至少选中一条数据!",type:"warning"})},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.getData()},showAddUser:function(){this.selectUserVisible=!0},concatParams:function(e,t){var a="";return e.forEach(function(e,o,s){o==s.length-1?a+=e[t]:a+=e[t]+","}),a},getData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".usersInRole"},method:"post",url:this.API.findCorrespondingUserPage,data:{id:this.roleObj.id,cn:this.searchForm.cn,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;"1"==a.code?(e.tableData=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"查询失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},batchAddUsers:function(e){var t=this;this.$axios({loading:{isShow:!0,target:".usersInRole"},method:"post",url:this.API.bathAddPowerUserRoles,data:{id:this.roleObj.id,userIds:e}}).then(function(e){"1"==e.data.code?(t.$message({type:"success",message:"批量添加用户成功!"}),t.search()):t.$message({type:"error",message:"批量添加用户失败，请刷新重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})},delUser:function(e){var t=this;this.$axios({loading:{isShow:!0,target:".usersInRole"},method:"post",url:this.API.bathDeletePowerUserRoles,data:{id:this.roleObj.id,userIds:e}}).then(function(e){"1"==e.data.code?(t.$message({type:"success",message:"用户批量删除成功!"}),t.search()):t.$message({type:"error",message:"批量删除用户失败，请刷新重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})}}},O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"usersInRole"},[a("div",{staticClass:"demo-form-inline"},[a("el-button",{attrs:{type:"primary"},on:{click:e.showAddUser}},[e._v("添加人员")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.batchDeleteUsers}},[e._v("批量删除")]),e._v(" "),a("el-input",{attrs:{placeholder:"输入姓名或账户",clearable:""},model:{value:e.searchForm.cn,callback:function(t){e.$set(e.searchForm,"cn",t)},expression:"searchForm.cn"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,height:"200"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"70",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1)+" ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cn",label:"姓名",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uid",label:"账户",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"station",label:"岗位","min-width":"130"}})],1),e._v(" "),a("Pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}}),e._v(" "),e.selectUserVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"添加人员",visible:e.selectUserVisible,width:"60%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.selectUserVisible=t}}},[a("SelectUser",{attrs:{roleInfo:e.roleObj},on:{SelectUserCall:e.SelectUserCall}})],1):e._e()],1)};O._withStripped=!0;var j={render:O,staticRenderFns:[]},P=j;var D=!1;var C=a("VU/8")(k,P,!1,function(e){D||a("VubZ")},"data-v-5386a333",null);C.options.__file="src/views/userRightsManagement/UsersInRole.vue";var F=C.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setRolePower"},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.checkedBack}},[e._v("还原")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.checkedAll}},[e._v("全选")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.resetChecked}},[e._v("取消全选")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveRole}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.cancelSet}},[e._v("取 消")])],1),e._v(" "),a("el-tree",{ref:"treeMenu",attrs:{"show-checkbox":"",data:e.treeData,"node-key":e.propsData.key,props:e.propsData,"default-checked-keys":e.chioceValue}})],1)};U._withStripped=!0;var V={render:U,staticRenderFns:[]},T=V;var M=!1;var A=a("VU/8")({name:"SetRolePower",props:["roleObj"],data:function(){return{propsData:{key:"id",label:"name"},roleId:"",oldTreeData:[],treeData:[],oldChioceValue:[],chioceValue:[]}},created:function(){},mounted:function(){this.roleId=this.roleObj.id,this.getData()},computed:{},methods:{checkedAll:function(){this.$refs.treeMenu.setCheckedNodes(this.oldTreeData),this.chioceValue=this.$refs.treeMenu.getCheckedKeys(!0)},resetChecked:function(){this.$refs.treeMenu.setCheckedKeys([]),this.chioceValue=this.$refs.treeMenu.getCheckedKeys(!0)},cancelSet:function(){this.$emit("SetRolePowerCallBack",!1)},checkedBack:function(){this.$refs.treeMenu.setCheckedKeys(this.oldChioceValue),this.chioceValue=this.$refs.treeMenu.getCheckedKeys(!0)},saveRole:function(){if(this.chioceValue=this.$refs.treeMenu.getCheckedKeys(!0),0!=this.chioceValue.length){var e="";this.chioceValue.forEach(function(t,a,o){a==o.length-1?e+=t:e+=t+","}),this.saveRolePower(e)}else this.$message({type:"warning",message:"您还没有选择菜单!"})},getData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".setRolePower"},method:"get",url:this.API.roleMenuTree,params:{id:this.roleId}}).then(function(t){var a=t.data;"1"==a.code?(e.oldTreeData=a.data.menuTreeList,e.treeData=e.commonFun.toTreeData(a.data.menuTreeList),e.chioceValue=a.data.arrayRole,e.oldChioceValue=a.data.arrayRole):e.$message({type:"error",message:"获取角色权限信息失败，请退出重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},saveRolePower:function(e){var t=this;this.$axios({loading:{isShow:!0,target:".setRolePower"},method:"get",url:this.API.saveOrUpdateRoleMenu,params:{id:this.roleId,menuid:e}}).then(function(e){"1"==e.data.code?(t.$message({type:"success",message:"角色权限设置成功!"}),t.$emit("SetRolePowerCallBack",!0)):t.$message({type:"error",message:"保存角色权限失败，请刷新重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})}}},T,!1,function(e){M||a("e+HE")},"data-v-baab5f66",null);A.options.__file="src/views/userRightsManagement/SetRolePower.vue";var z=A.exports,E=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"getRolePower"},[t("el-tree",{attrs:{data:this.treeData,"node-key":this.propsData.key,props:this.propsData}})],1)};E._withStripped=!0;var L={render:E,staticRenderFns:[]},N=L;var B=!1;var G=a("VU/8")({name:"GetRolePower",props:["roleObj"],data:function(){return{propsData:{key:"id",label:"name"},roleId:"",treeData:[]}},created:function(){},mounted:function(){this.roleId=this.roleObj.id,this.getData()},computed:{},methods:{getData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".getRolePower"},method:"get",url:this.API.viewPower,params:{id:this.roleId}}).then(function(t){var a=t.data;"1"==a.code?e.treeData=e.commonFun.toTreeData(a.data):e.$message({type:"error",message:"获取角色权限信息失败，请退出重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})}}},N,!1,function(e){B||a("gugN")},"data-v-0fd3e9d9",null);G.options.__file="src/views/userRightsManagement/GetRolePower.vue";var H=G.exports,Z={name:"SortroleManagementContainer",components:{},props:[""],data:function(){return{selectdata:"",index:"",ids:"",sortList:[]}},computed:{},watch:{},methods:{tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.index=a},clickRow:function(e){this.selectdata=e,this.index=e.index},getData:function(){var e=this;this.$axios({method:"get",url:this.API.sortRoleList}).then(function(t){var a=t.data;if("1"==a.code){if(e.sortList=a.data,0==e.sortList.length)return void e.$message("没有要排序的数据！");if(1==e.sortList.length)return void e.$message("只有一条数据,不需要进行排序！")}else e.$message({type:"error",message:"获取排序列表失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},restoreData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".sort-roleManagement-container"},method:"get",url:this.API.initializationRoleSort}).then(function(t){"1"==t.data.code?(e.$message.success("排序成功！"),e.$emit("sortRoleCall",!0)):e.$message({type:"error",message:"排序失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},moveUp:function(){if(""!=this.selectdata){if(this.index>0){var e=this.sortList[this.index-1];this.sortList.splice(this.index-1,1),this.sortList.splice(this.index,0,e),this.index=this.index-1}else this.$message("已经是第一条，不可上移")}else this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},moveDown:function(){if(""!=this.selectdata){if(this.index+1===this.sortList.length)this.$message("已经是最后一条，不可下移");else{var e=this.sortList[this.index+1];this.sortList.splice(this.index+1,1),this.sortList.splice(this.index,0,e),this.index=this.index+1}}else this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},sava:function(){var e=[];this.sortList.forEach(function(t){e.push(t.id)}),e.length<=0||(this.ids=e.join(",").toString(),this.saveForNet())},saveForNet:function(){var e=this;this.$axios({method:"get",url:this.API.upAndDownRole,params:{ids:this.ids}}).then(function(t){"1"==t.data.code?(e.$message.success("排序成功！"),e.$emit("sortRoleCall",!0)):e.$message({type:"error",message:"排序失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})}},created:function(){this.getData()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sort-roleManagement-container"},[a("div",{staticClass:"sort-roleManagement-title"},[a("el-button",{attrs:{type:"primary"},on:{click:e.restoreData}},[e._v("初始化顺序")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.moveUp}},[e._v("上移")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.moveDown}},[e._v("下移")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sava}},[e._v("保存")])],1),e._v(" "),a("div",{staticClass:"sort-roleManagement-content"},[a("el-table",{ref:"srotRoleTable",staticClass:"material_table",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","row-class-name":e.tableRowClassName,height:"350px",data:e.sortList},on:{"row-click":e.clickRow}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"workbenchName",label:"工作台ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remarks",label:"备注","show-overflow-tooltip":""}})],1)],1)])};q._withStripped=!0;var K={render:q,staticRenderFns:[]},X=K;var J=!1;var Y=a("VU/8")(Z,X,!1,function(e){J||a("Sf92")},"data-v-5aaeffd8",null);Y.options.__file="src/views/userRightsManagement/SortRole.vue";var Q=Y.exports,W={name:"RoleManagement",components:{Pagination:o.a,AddOrEditRole:w,UsersInRole:F,SetRolePower:z,GetRolePower:H,SortRole:Q},data:function(){return{bSetTableHeight:!1,tableHeight:window.innerHeight-70-52-5,tableData:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},roleObject:{},multipleSelection:[],roleVisible:!1,usersInRoleVisible:!1,setRolePowerVisible:!1,getRolePowerVisible:!1,dialogTitle:"添加角色",searchForm:{roleName:""},sortRoleVisible:!1}},created:function(){},mounted:function(){this.getData()},watch:{bSetTableHeight:function(e,t){this.tableHeight=window.innerHeight-this.$refs.multipleTable.$el.offsetTop-185}},methods:{handleCurrentChange:function(e){this.pageObj.pageIndex=e,this.getData()},PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getData()},addOrEditRoleCallBack:function(e){this.roleVisible=!1,e&&this.getData()},setRolePowerCallBack:function(e){this.setRolePowerVisible=!1,e&&this.getData()},isSystemFunc:function(e,t,a,o){var s="是";return a||(s="否"),s},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.getData()},addRole:function(){this.roleObject={},this.dialogTitle="添加角色",this.roleVisible=!0},handleEdit:function(e,t){this.roleObject=this.tableData[e],this.roleObject.uIssystem?this.$message({type:"warning",message:"系统内置角色不能编辑!"}):(this.dialogTitle="编辑角色信息",this.roleVisible=!0)},handleShowUserInRole:function(e,t){this.roleObject=this.tableData[e],this.usersInRoleVisible=!0},handleSetRolePower:function(e,t){this.roleObject=this.tableData[e],this.setRolePowerVisible=!0},handleGetRolePower:function(e,t){this.roleObject=this.tableData[e],this.getRolePowerVisible=!0},handleDelete:function(e,t){var a=this.tableData[e];if(a.uIssystem)this.$message({type:"warning",message:"系统内置角色不能删除!"});else{var o=this;this.$confirm("确定要删除该角色吗?","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.delRole(a.id,o)}).catch(function(){})}},getData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".roleManagement"},method:"post",url:this.API.findRolesPage,data:{name:this.searchForm.roleName,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;e.bSetTableHeight=!0,"1"==a.code?(e.tableData=a.data.list,e.pageObj.total=a.data.total):e.$message({type:"error",message:"查询失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},delRole:function(e,t){t.$axios({loading:{isShow:!0,target:".roleManagement"},method:"get",url:t.API.deleteRole,params:{id:e}}).then(function(e){var a=e.data;"1"==a.code?(t.$message({type:"success",message:"角色删除成功!"}),t.getData()):"7"==a.code?(t.$message({type:"warning",message:"该角色下有用户不能删除！"}),t.getData()):t.$message({type:"error",message:"删除角色失败，请刷新重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})},sortRole:function(){this.sortRoleVisible=!0},sortRoleCall:function(e){this.sortRoleVisible=!1,e&&this.getData()}}},ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roleManagement"},[a("div",{staticClass:"container"},[a("div",{staticClass:"demo-form-inline"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("添加角色")]),e._v(" "),a("el-input",{attrs:{placeholder:"输入角色名称",clearable:""},model:{value:e.searchForm.roleName,callback:function(t){e.$set(e.searchForm,"roleName",t)},expression:"searchForm.roleName"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sortRole}},[e._v("排序")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,height:e.tableHeight}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1)+" ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"角色名称",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"workbenchName",label:"工作台",sortable:"",width:"200","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"uIssystem",label:"是否系统内置",sortable:"",width:"130",formatter:e.isSystemFunc}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusName",label:"状态",sortable:"",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remarks",label:"备注","min-width":"250","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.uIssystem?a("el-button",{staticClass:"gray",attrs:{type:"success",icon:"el-icon-edit",circle:"",title:"编辑"}}):a("el-button",{attrs:{type:"success",icon:"el-icon-edit",circle:"",title:"编辑"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}}),e._v(" "),1==t.row.uIssystem?a("el-button",{staticClass:"gray",attrs:{type:"success",icon:"el-icon-close",circle:"",title:"删除"}}):a("el-button",{attrs:{type:"success",icon:"el-icon-close",circle:"",title:"删除"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"iconfont gd-yonghuguanli1",circle:"",title:"对应人员"},on:{click:function(a){e.handleShowUserInRole(t.$index,t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"iconfont gd-renyuanguanli1",circle:"",title:"查看权限"},on:{click:function(a){e.handleGetRolePower(t.$index,t.row)}}}),e._v(" "),1==t.row.uIssystem?a("el-button",{staticClass:"gray",attrs:{type:"success",icon:"iconfont gd-yonghujiaose",circle:"",title:"分配权限"}}):a("el-button",{attrs:{type:"success",icon:"iconfont gd-yonghujiaose",circle:"",title:"分配权限"},on:{click:function(a){e.handleSetRolePower(t.$index,t.row)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("Pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1)],1),e._v(" "),e.roleVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:e.dialogTitle,visible:e.roleVisible,width:"30%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.roleVisible=t}}},[a("AddOrEditRole",{attrs:{roleObj:e.roleObject},on:{addOrEditRoleCallBack:e.addOrEditRoleCallBack}})],1):e._e(),e._v(" "),e.usersInRoleVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"角色对应人员",visible:e.usersInRoleVisible,width:"60%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.usersInRoleVisible=t}}},[a("UsersInRole",{attrs:{roleObj:e.roleObject}})],1):e._e(),e._v(" "),e.setRolePowerVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"分配权限",visible:e.setRolePowerVisible,width:"32%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.setRolePowerVisible=t}}},[a("SetRolePower",{attrs:{roleObj:e.roleObject},on:{SetRolePowerCallBack:e.setRolePowerCallBack}})],1):e._e(),e._v(" "),e.getRolePowerVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"查看权限",visible:e.getRolePowerVisible,width:"30%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.getRolePowerVisible=t}}},[a("GetRolePower",{attrs:{roleObj:e.roleObject}})],1):e._e(),e._v(" "),e.sortRoleVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:"排序",visible:e.sortRoleVisible,"append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.sortRoleVisible=t}}},[a("SortRole",{on:{sortRoleCall:e.sortRoleCall}})],1):e._e()],1)};ee._withStripped=!0;var te={render:ee,staticRenderFns:[]},ae=te;var oe=!1;var se=a("VU/8")(W,ae,!1,function(e){oe||a("TOU7")},"data-v-78b1ddb9",null);se.options.__file="src/views/userRightsManagement/RoleManagement.vue";t.default=se.exports},"e+HE":function(e,t,a){var o=a("9T7M");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("6e4309a6",o,!1,{})},fHkj:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.addOrEditRole[data-v-9a028518] {\n  padding: 0 10px 10px 0;\n}\n.addOrEditRole .dialog-footer[data-v-9a028518] {\n    text-align: center;\n}\n.addOrEditRole .el-select[data-v-9a028518] {\n    width: 100%;\n}\n",""])},gugN:function(e,t,a){var o=a("OLXY");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("5ca626f0",o,!1,{})},qUq4:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.sort-roleManagement-container[data-v-5aaeffd8] {\n  height: 100%;\n}\n.sort-roleManagement-container .sort-roleManagement-title[data-v-5aaeffd8] {\n    padding: 0 20px 15px !important;\n}\n",""])},zSXf:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.roleStatusSelect .el-select[data-v-193d4558] {\n  width: 100%;\n}\n",""])}});