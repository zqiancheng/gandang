webpackJsonp([23],{ECDw:function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,"\n.stationSelect .el-select[data-v-a1097160] {\n  width: 100%;\n}\n",""])},GMjB:function(e,t,s){var a=s("PGjk");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("310cd022",a,!1,{})},"I/6s":function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,"\n.userStatusSelect .el-select[data-v-ccd902ae] {\n  width: 100%;\n}\n",""])},PGjk:function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,"\nel-dialog .del-dialog-cnt[data-v-6e36504e] {\n  font-size: 16px;\n  text-align: center;\n}\n.userManagement[data-v-6e36504e] {\n  width: 100%;\n  font-size: 14px;\n}\n.gray[data-v-6e36504e] {\n  color: #dcdfe6;\n}\n.red[data-v-6e36504e] {\n  color: #ff0000;\n}\n",""])},UiN7:function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,"\n.addOrEditUsers .dialog-footer[data-v-9e8c180c] {\n  text-align: center;\n  padding-bottom: 10px;\n}\n.addOrEditUsers .demo-ruleForm[data-v-9e8c180c] {\n  padding: 0 10px 0 0;\n}\n.addOrEditUsers .el-select[data-v-9e8c180c] {\n  width: 100%;\n}\n",""])},WjaZ:function(e,t,s){var a=s("ECDw");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("5e81a640",a,!1,{})},ZZHl:function(e,t,s){var a=s("UiN7");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("8887f832",a,!1,{})},eYkT:function(e,t,s){"use strict";var a=s("mvHQ"),i=s.n(a),r=(s("g7ZD"),{name:"UserStatusSelect",props:["chioceOptionId"],data:function(){return{dataList:[],chioceId:""}},computed:{},created:function(){this.getData()},methods:{changeChioceId:function(e){this.chioceId=e,this.$emit("UserStatusCall",e)},getData:function(){var e=this;this.$axios({loading:{isShow:!1},method:"get",url:this.API.getDataList,params:{id:this.API.constObj.userStatusId}}).then(function(t){var s=t.data;"1"==s.code?(e.dataList=s.data,e.chioceOptionId?(e.chioceId=e.chioceOptionId,e.$emit("UserStatusCall",e.chioceId)):(e.chioceId=s.data[0].id,e.$emit("UserStatusCall",e.chioceId))):e.$message({type:"error",message:"获取用户状态下拉框数据失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})}}}),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"userStatusSelect"},[s("el-select",{attrs:{clearable:"",placeholder:"请选择状态"},on:{change:e.changeChioceId},model:{value:e.chioceId,callback:function(t){e.chioceId=t},expression:"chioceId"}},e._l(e.dataList,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)};n._withStripped=!0;var o={render:n,staticRenderFns:[]},l=o;var c=!1;var d=s("VU/8")(r,l,!1,function(e){c||s("hy3g")},"data-v-ccd902ae",null);d.options.__file="src/components/UserStatusSelect.vue";var u=d.exports,h={name:"StationSelect",props:["chioceOptionId"],data:function(){return{dataList:[],chioceId:""}},computed:{},created:function(){this.getData()},methods:{changeChioceId:function(e){this.chioceId=e,this.$emit("StationSelectCall",e)},getData:function(){var e=this;this.$axios({loading:{isShow:!1},method:"get",url:this.API.findAllStations,params:{name:this.API.constObj.applyTypeId}}).then(function(t){var s=t.data;"1"==s.code?(e.dataList=s.data,e.chioceOptionId?(e.chioceId=e.chioceOptionId,e.$emit("StationSelectCall",e.chioceOptionId)):(e.chioceId=s.data[0].id,e.$emit("StationSelectCall",e.chioceId))):e.$message({type:"error",message:"获取岗位下拉框数据失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})}},mounted:function(){}},m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"stationSelect"},[s("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.changeChioceId},model:{value:e.chioceId,callback:function(t){e.chioceId=t},expression:"chioceId"}},e._l(e.dataList,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)};m._withStripped=!0;var g={render:m,staticRenderFns:[]},p=g;var f=!1;var v=s("VU/8")(h,p,!1,function(e){f||s("WjaZ")},"data-v-a1097160",null);v.options.__file="src/components/StationSelect.vue";var b={name:"AddOrEditUsers",components:{UserStatusSelect:u,StationSelect:v.exports},props:["userObj","orgId"],data:function(){return{userForm:{orgId:"",id:"",cn:"",stationsid:"",uid:"",status:"",secretlevel:"1"},secretlevel:[{value:1,label:"密级"},{value:2,label:"一般"},{value:3,label:"核心"}],pageType:"add",rules:{cn:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:12,message:"长度在 2 到 12 个字符",trigger:"blur"}],uid:[{required:!0,message:"请输入登录账户名",trigger:"blur"},{min:2,max:30,message:"长度在2 到 30 个字符",trigger:"blur"}]}}},created:function(){"{}"!==i()(this.userObj)?(this.pageType="edit",this.setFormData()):this.pageType="add",this.userForm.orgId=this.orgId},mounted:function(){},computed:{},methods:{StationSelectCall:function(e){this.userForm.stationsid=e},UserStatusCall:function(e){this.userForm.status=e},setFormData:function(){this.userForm.id=this.userObj.userId,this.userForm.cn=this.userObj.cn,this.userForm.uid=this.userObj.uid,this.userForm.stationsid=this.userObj.stationsid,this.userForm.status=this.userObj.status,this.userForm.istrilateral=this.userObj.istrilateral,this.userForm.secretlevel=this.userObj.secretlevel},addUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$axios({loading:{isShow:!0,target:".addOrEditUsers"},method:"post",url:t.API.saveUser,data:t.userForm}).then(function(e){var s=e.data;"1"==s.code?(t.$message({type:"success",message:"添加用户成功!"}),t.resetForm(),t.$emit("UserCallBack",!0)):"4"==s.code?t.$message({type:"error",message:"姓名或登录账户已存在，请修改！"}):t.$message({type:"error",message:"添加用户失败，请退出重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})})},editUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$axios({loading:{isShow:!0,target:".addOrEditUsers"},method:"post",url:t.API.updateUser,data:t.userForm}).then(function(e){var s=e.data;"1"==s.code?(t.$message({type:"success",message:"修改用户信息成功!"}),t.resetForm(),t.$emit("UserCallBack",!0)):"4"==s.code?t.$message({type:"error",message:"姓名或登录账户已存在，请修改！"}):t.$message({type:"error",message:"修改用户信息失败，请退出重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})})},cancelBook:function(){this.resetForm(),this.$emit("UserCallBack",!1)},resetForm:function(){this.pageType="add",this.$refs.userForm.resetFields()}}},x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"addOrEditUsers"},[s("el-form",{ref:"userForm",staticClass:"demo-ruleForm",attrs:{model:e.userForm,rules:e.rules,"label-width":"100px",size:"small"}},[s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:"姓名",prop:"cn"}},[s("el-input",{attrs:{placeholder:"请输入姓名(2~12个字符)",minLength:"2",maxLength:"12"},model:{value:e.userForm.cn,callback:function(t){e.$set(e.userForm,"cn",t)},expression:"userForm.cn"}})],1)],1),e._v(" "),s("el-col",[s("el-form-item",{attrs:{label:"登录账户",prop:"uid"}},[s("el-input",{attrs:{placeholder:"请输入登录账户(2~30个字符)",minLength:"2",maxLength:"30"},model:{value:e.userForm.uid,callback:function(t){e.$set(e.userForm,"uid",t)},expression:"userForm.uid"}})],1)],1),e._v(" "),s("el-col",[s("el-form-item",{attrs:{label:"岗位"}},[s("div",{staticClass:"satationSelect"},[s("StationSelect",{attrs:{chioceOptionId:e.userForm.stationsid},on:{StationSelectCall:e.StationSelectCall}})],1)])],1),e._v(" "),s("el-col",[s("el-form-item",{attrs:{label:"用户状态"}},[s("div",{staticClass:"userStatusSelect"},[s("UserStatusSelect",{attrs:{chioceOptionId:e.userForm.status},on:{UserStatusCall:e.UserStatusCall}})],1)])],1),e._v(" "),s("el-col",[s("el-form-item",{attrs:{label:"密级"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userForm.secretlevel,callback:function(t){e.$set(e.userForm,"secretlevel",t)},expression:"userForm.secretlevel"}},e._l(e.secretlevel,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["add"==e.pageType?s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addUser("userForm")}}},[e._v("保存")]):"edit"==e.pageType?s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editUser("userForm")}}},[e._v("保存")]):e._e(),e._v(" "),s("el-button",{on:{click:e.cancelBook}},[e._v("取 消")])],1)],1)};x._withStripped=!0;var _={render:x,staticRenderFns:[]},y=_;var S=!1;var $=s("VU/8")(b,y,!1,function(e){S||s("ZZHl")},"data-v-9e8c180c",null);$.options.__file="src/views/userRightsManagement/AddOrEditUsers.vue";t.a=$.exports},f1t6:function(e,t,s){"use strict";var a={name:"SortUserManageMentContainer",props:["id"],data:function(){return{selectdata:"",index:"",ids:"",sortList:[]}},created:function(){this.getData()},methods:{tableRowClassName:function(e){var t=e.row,s=e.rowIndex;t.index=s},clickRow:function(e){this.selectdata=e,this.index=e.index},getData:function(){var e=this;this.$axios({method:"get",url:this.API.sortUserLists,params:{orgid:this.id}}).then(function(t){var s=t.data;if("1"==s.code){if(e.sortList=s.data,0==e.sortList.length)return void e.$message("没有要排序的数据！");if(1==e.sortList.length)return void e.$message("只有一条数据,不需要进行排序！")}else e.$message({type:"error",message:"获取排序列表失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},restoreData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".sort-userManagement-container"},method:"get",url:this.API.initializationOrder}).then(function(t){"1"==t.data.code?(e.$message.success("排序成功！"),e.$emit("userSort",!0)):e.$message({type:"error",message:"排序失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},moveUp:function(){if(""!=this.selectdata){if(this.index>0){var e=this.sortList[this.index-1];this.sortList.splice(this.index-1,1),this.sortList.splice(this.index,0,e),this.index=this.index-1}else this.$message("已经是第一条，不可上移")}else this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},moveDown:function(){if(""!=this.selectdata){if(this.index+1===this.sortList.length)this.$message("已经是最后一条，不可下移");else{var e=this.sortList[this.index+1];this.sortList.splice(this.index+1,1),this.sortList.splice(this.index,0,e),this.index=this.index+1}}else this.$confirm("请选择一条数据！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0})},sava:function(){var e=[];this.sortList.forEach(function(t){e.push(t.id)}),e.length<=0||(this.ids=e.join(",").toString(),this.saveForNet())},saveForNet:function(){var e=this;this.$axios({method:"post",url:this.API.upAndDown,data:{ids:this.ids}}).then(function(t){"1"==t.data.code?(e.$message.success("排序成功！"),e.$emit("userSort",!0)):e.$message({type:"error",message:"排序失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})}}},i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sort-userManagement-container"},[s("div",{staticClass:"sort-userManagement-title"},[s("el-button",{attrs:{type:"primary"},on:{click:e.restoreData}},[e._v("初始化顺序")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.moveUp}},[e._v("上移")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.moveDown}},[e._v("下移")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.sava}},[e._v("保存")])],1),e._v(" "),s("div",{staticClass:"sort-userManagement-content"},[s("el-table",{ref:"table",staticClass:"material_table",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","row-class-name":e.tableRowClassName,height:"350px",data:e.sortList},on:{"row-click":e.clickRow}},[s("el-table-column",{attrs:{label:"序号",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1))]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"uid",label:"账户"}}),e._v(" "),s("el-table-column",{attrs:{prop:"cn",label:"姓名","show-overflow-tooltip":""}})],1)],1)])};i._withStripped=!0;var r={render:i,staticRenderFns:[]},n=r;var o=!1;var l=s("VU/8")(a,n,!1,function(e){o||s("rk25")},"data-v-5aab8e2e",null);l.options.__file="src/views/userRightsManagement/SortUser.vue";t.a=l.exports},hy3g:function(e,t,s){var a=s("I/6s");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("2cf6432c",a,!1,{})},rk25:function(e,t,s){var a=s("x4xm");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("3d12fd09",a,!1,{})},suaJ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("cMGX"),i=s("eYkT"),r=s("f1t6"),n={name:"UserManagement",components:{Pagination:a.a,AddOrEditUsers:i.a,SortUser:r.a},data:function(){return{bSetTableHeight:!1,tableHeight:window.innerHeight-70-52-5,tableData:[],pageObj:{pageIndex:this.API.constObj.pageIndex,total:0,pageSize:this.API.constObj.pageSize},userObject:{},multipleSelection:[],userVisible:!1,dialogTitle:"添加用户",searchForm:{cn:""},sortUserVisble:!1,id:""}},created:function(){},mounted:function(){this.getData()},watch:{bSetTableHeight:function(e,t){this.tableHeight=window.innerHeight-this.$refs.multipleTable.$el.offsetTop-170}},methods:{handleCurrentChange:function(e){this.pageObj.pageIndex=e,this.getData()},PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getData()},UserCallBack:function(e){this.userVisible=!1,e&&this.getData()},getData:function(){var e=this;this.$axios({loading:{isShow:!0,target:".userManagement"},method:"post",url:this.API.findUserInfo,data:{orgId:"",cn:this.searchForm.cn,pageIndex:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var s=t.data;e.bSetTableHeight=!0,"1"==s.code?(e.tableData=s.data.list,e.pageObj.total=s.data.total):e.$message({type:"error",message:"查询失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},search:function(){this.pageObj.pageIndex=this.API.constObj.pageIndex,this.getData()},addUser:function(){this.userObject={},this.dialogTitle="添加用户",this.userVisible=!0},handleEdit:function(e,t){this.userObject=this.tableData[e],this.userObject.uIssystem?this.$message({type:"warning",message:"系统内置用户不能编辑!"}):(this.dialogTitle="编辑用户信息",this.userVisible=!0)},handleDelete:function(e,t){var s=this.tableData[e];if(s.uIssystem)this.$message({type:"warning",message:"系统内置用户不能删除!"});else{var a=this;this.$confirm("确定要删除该用户吗?","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.delUser(s.id,a)}).catch(function(){})}},delUser:function(e,t){t.$axios({loading:{isShow:!0,target:".userManagement"},method:"get",url:t.API.deleteUser,params:{id:e}}).then(function(e){"1"==e.data.code?(t.$message({type:"success",message:"用户删除成功!"}),t.getData()):t.$message({type:"error",message:"删除用户失败，请刷新重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})},sortUser:function(){this.sortUserVisble=!0},sortUserCall:function(e){this.sortUserVisble=!1,e&&this.getData()}}},o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"userManagement"},[s("div",{staticClass:"container"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm}},[s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.addUser}},[e._v("添加用户")])],1),e._v(" "),s("el-form-item",[s("el-input",{attrs:{placeholder:"输入姓名或账户"},model:{value:e.searchForm.cn,callback:function(t){e.$set(e.searchForm,"cn",t)},expression:"searchForm.cn"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.sortUser}},[e._v("排序")])],1)],1),e._v(" "),s("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"",height:e.tableHeight}},[s("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.pageObj.pageIndex*e.pageObj.pageSize+t.$index+1)+" ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"cn",label:"姓名",width:"150",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"uid",label:"账户",width:"150",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"stationName",label:"岗位","min-width":"130",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"statusName",label:"状态",sortable:"",width:"130",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.status?s("el-button",{staticClass:"gray",attrs:{type:"text"}},[e._v("编辑")]):s("el-button",{attrs:{type:"text"},on:{click:function(s){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),2==t.row.status?s("el-button",{staticClass:"gray",attrs:{type:"text"}},[e._v("删除")]):s("el-button",{attrs:{type:"text"},on:{click:function(s){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("div",{staticClass:"pagination"},[s("Pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1)],1),e._v(" "),e.userVisible?s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"outDialog",attrs:{title:e.dialogTitle,visible:e.userVisible,width:"30%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.userVisible=t}}},[s("AddOrEditUsers",{attrs:{userObj:e.userObject},on:{UserCallBack:e.UserCallBack}})],1):e._e(),e._v(" "),e.sortUserVisble?s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"排序",visible:e.sortUserVisble,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.sortUserVisble=t}}},[s("sortUser",{attrs:{id:e.id},on:{sortUserCall:e.sortUserCall}})],1):e._e()],1)};o._withStripped=!0;var l={render:o,staticRenderFns:[]},c=l;var d=!1;var u=s("VU/8")(n,c,!1,function(e){d||s("GMjB")},"data-v-6e36504e",null);u.options.__file="src/views/userRightsManagement/UserManagement.vue";t.default=u.exports},x4xm:function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,"\n.sort-userManagement-container[data-v-5aab8e2e] {\n  height: 100%;\n  padding-bottom: 10px;\n}\n.sort-userManagement-container .sort-userManagement-title[data-v-5aab8e2e] {\n    padding: 0 0 10px 10px;\n}\n",""])}});